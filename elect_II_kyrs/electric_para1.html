<!-- electric_para1.html
     –ü–∞—Ä–∞ 1 (–ï–ª–µ–∫—Ç—Ä–∏–∫–∏, –∞—É–¥–∏—Ç–æ—Ä–Ω–æ): –ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π) ¬∑ –ï—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞ (QR) ¬∑ –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É
     –ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è GitHub Pages —Ç–∞ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –≤ Moodle —á–µ—Ä–µ–∑ <iframe>.
--><!DOCTYPE html><html lang="uk"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ï–ª–µ–∫—Ç—Ä–∏–∫–∏ ¬∑ –ü–∞—Ä–∞ 1 ‚Äî –ù–∞—Ä—è–¥, –ï—Ç–∏–∫–µ—Ç–∫–∞ –∫–æ–ª–∞, –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É</title>
<meta name="color-scheme" content="light dark">
<style>
  /* –¢–µ–º–∞ (standalone) */
  :root{
    --bg:#0b1220; --bg2:#111827; --card:#0f172a; --text:#e2e8f0; --muted:#9aa5b1;
    --accent:#22c55e; --accent-2:#60a5fa; --line:#1f2937;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:linear-gradient(180deg,var(--bg),var(--bg2) 30%,var(--bg)); color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif; line-height:1.55
  }
  .wrap{max-width:980px; margin:0 auto; padding:24px 16px 64px}
  .badge{display:inline-block; padding:6px 10px; border:1px solid var(--line); background:#0b1220; border-radius:999px; font-size:12px; color:var(--muted)}
  h1{font-size:32px; margin:6px 0 12px; line-height:1.15; background:linear-gradient(90deg,#60a5fa,#22c55e);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent}
  h2{font-size:22px; margin:22px 0 12px}
  h3{font-size:18px; margin:12px 0 8px; color:#cbd5e1}
  p{margin:8px 0}
  .card{background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid var(--line); border-radius:16px; padding:16px; margin:12px 0; box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .grid{display:grid; gap:12px}
  .g3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:820px){.g3{grid-template-columns:1fr}}
  .kpi{display:flex; align-items:center; gap:10px; padding:10px 12px; border:1px dashed #263042; border-radius:12px}
  .mono,code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  .btn{display:inline-block; padding:10px 14px; border-radius:10px; border:1px solid var(--line); background:#0d1a2e; color:#dbeafe; text-decoration:none; cursor:pointer}
  .btn:hover{background:#0f1f39}
  .footer{margin-top:18px; font-size:12px; color:#93a3b5}

  /* –ö–≤–∏—Ç–∞–Ω—Ü—ñ—è 58 –º–º */
  .ticket-wrap{display:flex; gap:16px; flex-wrap:wrap}
  .panel{flex:1 1 360px}
  .field{display:flex; gap:8px; margin:6px 0}
  .field label{min-width:140px; color:#cbd5e1}
  .field input,.field select,.field textarea{
    flex:1; padding:8px 10px; border-radius:10px; border:1px solid #223049; background:#0d1a2e; color:#e5e7eb
  }
  .field textarea{min-height:60px; resize:vertical}
  .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:8px}

  .ticket{
    width:58mm; background:#fff; color:#000; padding:6mm 4mm; border-radius:6px;
    box-shadow:0 0 0 1px #e5e7eb inset; font-family:"Courier New",ui-monospace,monospace;
  }
  .ticket h4{margin:0 0 6px; font-size:13px; text-align:center}
  .ticket p{margin:2px 0; font-size:12px}
  .ticket .center{text-align:center}
  .ticket .line{border-top:1px dashed #111; margin:6px 0}
  .ticket small{font-size:10px}
  .ticket .qr{font-size:10px; word-break:break-all}

  .no-print{display:block}

  /* –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (iframe/Moodle) */
  html.embedded body{background:#fff; color:#111}
  html.embedded .card{background:#fff; border:1px solid #e5e7eb; box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial; background:none; color:#111}

  @media print{
    @page{ size:58mm auto; margin:4mm }
    body{ background:#fff; color:#000 }
    .no-print, .card:not(.printable){ display:none !important }
    .ticket{ box-shadow:none; width:auto; padding:0 }
  }
</style>

<style>
/* PRINT PATCH v1 CSS (auto) */
.ticket{ font-weight:700; letter-spacing:0.1px }
.ticket h4{ font-weight:700 }
.ticket p,
.ticket b,
.ticket strong,
.ticket span,
.ticket small{ font-weight:700 }
</style>

<meta name="description" content="–ü–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ä–æ–±—ñ—Ç —ñ –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è: –Ω–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π), –µ—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É"><link rel="canonical" href="https://edlab.pp.ua/elect_II_kyrs/electric_para1.html"><meta property="og:type" content="article"><meta property="og:title" content="‚ö° –ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ ¬∑ üè∑Ô∏è –ï—Ç–∏–∫–µ—Ç–∫–∞ –∫–æ–ª–∞ ¬∑ üß∞ –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É (–¥—Ä—É–∫ 58 –º–º)"><meta property="og:description" content="–ü–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ä–æ–±—ñ—Ç —ñ –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è: –Ω–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π), –µ—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É"><meta property="og:url" content="https://edlab.pp.ua/elect_II_kyrs/electric_para1.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"LearningResource","name":"‚ö° –ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ ¬∑ üè∑Ô∏è –ï—Ç–∏–∫–µ—Ç–∫–∞ –∫–æ–ª–∞ ¬∑ üß∞ –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É (–¥—Ä—É–∫ 58 –º–º)","description":"–ü–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ä–æ–±—ñ—Ç —ñ –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è: –Ω–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π), –µ—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É","inLanguage":"uk","educationalLevel":"college","url":"https://edlab.pp.ua/elect_II_kyrs/electric_para1.html","provider":{"@type":"Organization","name":"EDLab"}}</script></head>
<body>
  <div class="wrap">
    <span class="badge">–ï–ª–µ–∫—Ç—Ä–∏–∫–∏ ¬∑ –ü–∞—Ä–∞ 1 ¬∑ –∞—É–¥–∏—Ç–æ—Ä–Ω–æ</span>
    <h1>‚ö° –ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ ¬∑ üè∑Ô∏è –ï—Ç–∏–∫–µ—Ç–∫–∞ –∫–æ–ª–∞ ¬∑ üß∞ –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É (–¥—Ä—É–∫ 58 –º–º)</h1>

    <div class="card">
      <h2>üéØ –ú–µ—Ç–∞</h2>
      <p>–ü–æ–∫–∞–∑–∞—Ç–∏, —è–∫ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö —Ä–æ–±—ñ—Ç —ñ –º–∞—Ä–∫—É–≤–∞–Ω–Ω—è: <b>–Ω–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π)</b>, <b>–µ—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞</b>, <b>–ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É</b> ‚Äî –∑ –º–∏—Ç—Ç—î–≤–∏–º –¥—Ä—É–∫–æ–º 58 –º–º.</p>
      <div class="grid g3">
        <div class="kpi"><span>üõ°Ô∏è</span><div><b>–ë–µ–∑–ø–µ–∫–∞</b><br>PPE, –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π, –≤–∏–¥ —Ä–æ–±—ñ—Ç</div></div>
        <div class="kpi"><span>üè∑Ô∏è</span><div><b>–ú–∞—Ä–∫—É–≤–∞–Ω–Ω—è</b><br>—â–∏—Ç/–∫–æ–ª–æ, –∞–≤—Ç–æ–º–∞—Ç, –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</div></div>
        <div class="kpi"><span>üß∞</span><div><b>–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</b><br>—ñ–Ω–≤. ‚Ññ, —Å—Ç–∞–Ω, PASS/FAIL</div></div>
      </div>
    </div>

    <div class="card printable">
      <h2>üß™ –ü—Ä–∞–∫—Ç–∏–∫—É–º: –∑–∞–ø–æ–≤–Ω–∏ —Ç–∞ –Ω–∞–¥—Ä—É–∫—É–π</h2>
      <div class="ticket-wrap">
        <!-- –í–≤—ñ–¥–Ω—ñ –¥–∞–Ω—ñ -->
        <div class="panel">
          <h3>1) –í–∏–±—ñ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
          <div class="field">
            <label for="docType">–¢–∏–ø</label>
            <select id="docType">
              <option value="permit">–ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π)</option>
              <option value="label">–ï—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞</option>
              <option value="tool">–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É</option>
            </select>
          </div>

          <!-- –°–ø—ñ–ª—å–Ω—ñ –ø–æ–ª—è -->
          <h3>2) –ü–æ–ª—è</h3>
          <div class="field">
            <label for="responsible">–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π</label>
            <input id="responsible" type="text" value="–ü–Ü–ë / –≥—Ä—É–ø–∞">
          </div>
          <div class="field">
            <label for="location">–õ–æ–∫–∞—Ü—ñ—è/—â–∏—Ç</label>
            <input id="location" type="text" value="–©–û-1 / –º–∞–π—Å—Ç–µ—Ä–Ω—è">
          </div>

          <!-- Permit -->
          <div class="field permit">
            <label for="work">–í–∏–¥ —Ä–æ–±—ñ—Ç</label>
            <input id="work" type="text" value="–ó–∞–º—ñ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∞ 16 –ê">
          </div>
          <div class="field permit">
            <label for="ppe">–ó–∞—Å–æ–±–∏ –∑–∞—Ö–∏—Å—Ç—É (PPE)</label>
            <input id="ppe" type="text" value="–î—ñ–µ–ª–µ–∫—Ç—Ä. —Ä—É–∫–∞–≤–∏—á–∫–∏, –æ–∫—É–ª—è—Ä–∏">
          </div>
          <div class="field permit">
            <label for="lockout">–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è/–ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è</label>
            <input id="lockout" type="text" value="–í–∏–º–∫–Ω–µ–Ω–æ –≤–≤—ñ–¥, –ø–æ–ø–µ—Ä–µ–¥–∂—É–≤–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—á–∫–∞">
          </div>

          <!-- Label -->
          <div class="field label">
            <label for="circuit">–ö–æ–ª–æ / ‚Ññ –∞–≤—Ç–æ–º–∞—Ç–∞</label>
            <input id="circuit" type="text" value="–ö–æ–ª–æ ‚Ññ5 / B16">
          </div>
          <div class="field label">
            <label for="load">–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</label>
            <input id="load" type="text" value="–†–æ–∑–µ—Ç–∫–∏ –º–∞–π—Å—Ç–µ—Ä–Ω—ñ (–¥–æ 3 –∫–í—Ç)">
          </div>
          <div class="field label">
            <label for="qr">QR-–ø–æ—Å–∏–ª–∞–Ω–Ω—è (–æ–ø—Ü.)</label>
            <input id="qr" type="text" placeholder="https://...">
          </div>

          <!-- Tool -->
          <div class="field tool">
            <label for="toolname">–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç / —ñ–Ω–≤. ‚Ññ</label>
            <input id="toolname" type="text" value="–ú—É–ª—å—Ç–∏–º–µ—Ç—Ä DT-9205A / 001">
          </div>
          <div class="field tool">
            <label for="status">–°—Ç–∞–Ω</label>
            <select id="status">
              <option>PASS</option>
              <option>FAIL</option>
            </select>
          </div>
          <div class="field tool">
            <label for="notes">–ü—Ä–∏–º—ñ—Ç–∫–∞</label>
            <textarea id="notes" placeholder="–û–ø–∏—Å –∑–∞—É–≤–∞–∂–µ–Ω—å –∞–±–æ —É–º–æ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è"></textarea>
          </div>

          <div class="row no-print">
            <button class="btn" type="button" id="buildBtn">üß© –ó—ñ–±—Ä–∞—Ç–∏</button>
            <button class="btn" type="button" id="printBtn">üñ®Ô∏è –î—Ä—É–∫ 58 –º–º</button>
            <button class="btn" type="button" id="saveBtn">üì• TXT</button>
          </div>
          <p class="no-print" style="color:#9aa5b1; margin-top:6px">–ü—ñ–¥–∫–∞–∑–∫–∞: —è–∫—â–æ –æ–±—Ä—ñ–∑–∞—î –ø–æ–ª—è ‚Äî —É –¥—ñ–∞–ª–æ–∑—ñ –¥—Ä—É–∫—É –∑–º–µ–Ω—à –º–∞—Å—à—Ç–∞–± –¥–æ 90‚Äì95%.</p>
        </div>

        <!-- –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ -->
        <div class="panel">
          <h3>3) –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ (—Å—Ç—Ä—ñ—á–∫–∞ 58 –º–º)</h3>
          <div id="ticket" class="ticket" aria-live="polite">
            <h4>–ï–õ–ï–ö–¢–†–û–ú–û–ù–¢–ê–ñ ¬∑ –î–û–ö–£–ú–ï–ù–¢</h4>
            <p class="center"><small id="t-date">–î–∞—Ç–∞: ‚Äî</small></p>
            <div class="line"></div>
            <p><b id="t-title">–ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π)</b></p>

            <!-- Permit -->
            <div id="permitBlock">
              <p>–õ–æ–∫–∞—Ü—ñ—è/—â–∏—Ç: <span id="t-location">‚Äî</span></p>
              <p>–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: <span id="t-resp">‚Äî</span></p>
              <p>–†–æ–±–æ—Ç–∏: <span id="t-work">‚Äî</span></p>
              <p>PPE: <span id="t-ppe">‚Äî</span></p>
              <p>Lockout/Tagout: <span id="t-lock">‚Äî</span></p>
            </div>

            <!-- Label -->
            <div id="labelBlock" style="display:none">
              <p>–©–∏—Ç: <span id="t-location2">‚Äî</span></p>
              <p>–ö–æ–ª–æ/–∞–≤—Ç–æ–º–∞—Ç: <span id="t-circuit">‚Äî</span></p>
              <p>–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: <span id="t-load">‚Äî</span></p>
              <p class="qr" id="t-qr" style="display:none">QR: ‚Äî</p>
            </div>

            <!-- Tool -->
            <div id="toolBlock" style="display:none">
              <p>–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: <span id="t-toolname">‚Äî</span></p>
              <p>–°—Ç–∞–Ω: <span id="t-status">‚Äî</span></p>
              <p id="t-notes-wrap" style="display:none">–ü—Ä–∏–º—ñ—Ç–∫–∞: <span id="t-notes">‚Äî</span></p>
              <p>–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: <span id="t-resp2">‚Äî</span></p>
            </div>

            <div class="line"></div>
            <p class="center"><small>–ü—ñ–¥–ø–∏—Å: ____________</small></p>
            <div class="line"></div>
            <p class="center"><small id="t-ref">Ref: ELC-0001</small></p>
          </div>
          <div class="row no-print" style="margin-top:8px">
            <button class="btn" type="button" id="refreshBtn">üîÑ –û–Ω–æ–≤–∏—Ç–∏</button>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ü™ú –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ (–∫–æ—Ä–æ—Ç–∫–æ)</h2>
      <ol>
        <li>–û–±–µ—Ä–∏ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞.</li>
        <li>–ó–∞–ø–æ–≤–Ω–∏ –ø–æ–ª—è (–º—ñ–Ω—ñ–º—É–º ‚Äî –≤–∏–¥ —Ä–æ–±—ñ—Ç/—â–∏—Ç/–≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –∞–±–æ –∫–æ–ª–æ/–∞–≤—Ç–æ–º–∞—Ç/–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –∞–±–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/—ñ–Ω–≤. ‚Ññ/—Å—Ç–∞–Ω).</li>
        <li>–ù–∞—Ç–∏—Å–Ω–∏ ¬´üß© –ó—ñ–±—Ä–∞—Ç–∏¬ª, –ø–µ—Ä–µ–≤—ñ—Ä –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥.</li>
        <li>–ù–∞–¥—Ä—É–∫—É–π ¬´üñ®Ô∏è –î—Ä—É–∫ 58 –º–º¬ª –∞–±–æ –∑–±–µ—Ä–µ–∂–∏ ¬´üì• TXT¬ª.</li>
      </ol>
      <p class="footer">–ü—ñ—Å–ª—è –¥—Ä—É–∫—É ‚Äî –∑—Ä–æ–±–∏ —Ñ–æ—Ç–æ –π –¥–æ–¥–∞–π —É —Å–ø—ñ–ª—å–Ω—É –ø–∞–ø–∫—É –≥—Ä—É–ø–∏: <span class="mono">–ì–†–£–ü–ê_–ü—Ä—ñ–∑–≤–∏—â–µ_–ù–∞—Ä—è–¥/–ï—Ç–∏–∫–µ—Ç–∫–∞/–ü—Ä–æ—Ç–æ–∫–æ–ª.jpg</span></p>
    </div>
  </div>

<script>
  // –í–±—É–¥–æ–≤–∞–Ω–æ —É Moodle ‚Üí ¬´—Å—Ç—Ä–∏–º–∞–Ω–∏–π¬ª –≤–∏–≥–ª—è–¥
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  const docType = document.getElementById('docType');

  const fieldsPermit = document.querySelectorAll('.permit');
  const fieldsLabel  = document.querySelectorAll('.label');
  const fieldsTool   = document.querySelectorAll('.tool');

  function toggleBlocks(){
    const t = docType.value;
    fieldsPermit.forEach(el=>el.style.display = (t==='permit') ? '' : 'none');
    fieldsLabel.forEach(el=>el.style.display  = (t==='label')  ? '' : 'none');
    fieldsTool.forEach(el=>el.style.display   = (t==='tool')   ? '' : 'none');

    document.getElementById('permitBlock').style.display = (t==='permit') ? '' : 'none';
    document.getElementById('labelBlock').style.display  = (t==='label')  ? '' : 'none';
    document.getElementById('toolBlock').style.display   = (t==='tool')   ? '' : 'none';
  }
  docType.addEventListener('change', toggleBlocks);
  toggleBlocks();

  function buildTicket(){
    const now = new Date(); const pad = n=>n.toString().padStart(2,'0');
    const stamp = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} ${pad(now.getHours())}:${pad(now.getMinutes())}`;
    document.getElementById('t-date').textContent = `–î–∞—Ç–∞: ${stamp}`;

    const t = docType.value;
    let title = '–î–æ–∫—É–º–µ–Ω—Ç';
    if(t==='permit') title = '–ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫ (–∫–æ—Ä–æ—Ç–∫–∏–π)';
    if(t==='label')  title = '–ï—Ç–∏–∫–µ—Ç–∫–∞ –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–æ–ª–∞';
    if(t==='tool')   title = '–ü—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É';
    document.getElementById('t-title').textContent = title;

    // –°–ø—ñ–ª—å–Ω—ñ
    const resp = document.getElementById('responsible').value.trim() || '‚Äî';
    const loc  = document.getElementById('location').value.trim() || '‚Äî';

    // Permit
    document.getElementById('t-location').textContent = loc;
    document.getElementById('t-resp').textContent = resp;
    document.getElementById('t-work').textContent = (document.getElementById('work').value.trim() || '‚Äî');
    document.getElementById('t-ppe').textContent  = (document.getElementById('ppe').value.trim()  || '‚Äî');
    document.getElementById('t-lock').textContent = (document.getElementById('lockout').value.trim() || '‚Äî');

    // Label
    document.getElementById('t-location2').textContent = loc;
    document.getElementById('t-circuit').textContent = (document.getElementById('circuit').value.trim() || '‚Äî');
    document.getElementById('t-load').textContent    = (document.getElementById('load').value.trim()    || '‚Äî');
    const qr = document.getElementById('qr').value.trim();
    const qrEl = document.getElementById('t-qr');
    if(qr){ qrEl.style.display=''; qrEl.textContent = `QR: ${qr}`; } else { qrEl.style.display='none'; }

    // Tool
    document.getElementById('t-toolname').textContent = (document.getElementById('toolname').value.trim() || '‚Äî');
    document.getElementById('t-status').textContent   = (document.getElementById('status').value || '‚Äî');
    const notes = document.getElementById('notes').value.trim();
    const notesWrap = document.getElementById('t-notes-wrap');
    if(notes){ notesWrap.style.display=''; document.getElementById('t-notes').textContent = notes; } else { notesWrap.style.display='none'; }
    document.getElementById('t-resp2').textContent = resp;

    // Ref
    const ref = 'ELC-' + Math.random().toString(36).slice(2,7).toUpperCase();
    document.getElementById('t-ref').textContent = `Ref: ${ref}`;
  }

  function downloadTXT(){
    const lines = [];
    lines.push('ELECTRO DOC 58mm');
    lines.push('-----------------');
    lines.push(document.getElementById('t-title').textContent);
    lines.push(document.getElementById('t-date').textContent);

    const t = docType.value;
    if(t==='permit'){
      lines.push(`–õ–æ–∫–∞—Ü—ñ—è/—â–∏—Ç: ${document.getElementById('t-location').textContent}`);
      lines.push(`–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: ${document.getElementById('t-resp').textContent}`);
      lines.push(`–†–æ–±–æ—Ç–∏: ${document.getElementById('t-work').textContent}`);
      lines.push(`PPE: ${document.getElementById('t-ppe').textContent}`);
      lines.push(`Lockout/Tagout: ${document.getElementById('t-lock').textContent}`);
    } else if(t==='label'){
      lines.push(`–©–∏—Ç: ${document.getElementById('t-location2').textContent}`);
      lines.push(`–ö–æ–ª–æ/–∞–≤—Ç–æ–º–∞—Ç: ${document.getElementById('t-circuit').textContent}`);
      lines.push(`–ù–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: ${document.getElementById('t-load').textContent}`);
      const qrEl = document.getElementById('t-qr');
      if(qrEl.style.display!=='none'){ lines.push(qrEl.textContent); }
    } else {
      lines.push(`–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: ${document.getElementById('t-toolname').textContent}`);
      lines.push(`–°—Ç–∞–Ω: ${document.getElementById('t-status').textContent}`);
      const notesWrap = document.getElementById('t-notes-wrap');
      if(notesWrap.style.display!=='none'){ lines.push(`–ü—Ä–∏–º—ñ—Ç–∫–∞: ${document.getElementById('t-notes').textContent}`); }
      lines.push(`–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: ${document.getElementById('t-resp2').textContent}`);
    }
    lines.push('-----------------');
    lines.push(document.getElementById('t-ref').textContent);
    lines.push('–ü—ñ–¥–ø–∏—Å: ____________');

    const blob = new Blob([lines.join('\n')], {type:'text/plain;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'electro_doc_58mm.txt';
    a.click();
    URL.revokeObjectURL(a.href);
  }

  document.getElementById('buildBtn').addEventListener('click', buildTicket);
  document.getElementById('refreshBtn').addEventListener('click', buildTicket);
  document.getElementById('printBtn').addEventListener('click', ()=>printTicketNewTab());
  document.getElementById('saveBtn').addEventListener('click', downloadTXT);

  // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥
  buildTicket();
</script>

<script>
// PRINT PATCH v1 (auto)
function printTicketNewTab(){
  var ticket = document.getElementById('ticket');
  if(!ticket){ alert('–ù–µ–º–∞—î #ticket –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ'); return; }
  try{
    var someTxt = (document.querySelector('#ticket span, #ticket p, #ticket h4')||{}).textContent||'';
    if(!someTxt || someTxt.trim()==='‚Äî'){ if(typeof buildTicket==='function') buildTicket(); }
  }catch(_){}

  var css = `
    @media print { @page { size:58mm auto; margin:0 } }
    html,body{ margin:0; padding:0; background:#fff; color:#000 }
    .ticket{
      width:58mm; margin:0; padding:6mm 4mm; background:#fff; color:#000;
      font-family:"Courier New", Courier, monospace; font-weight:700; letter-spacing:0.1px;
      border:none; box-shadow:none; border-radius:0
    }
    .ticket h4{ margin:0 0 6px; font-size:13px; text-align:center; font-weight:700 }
    .ticket p{ margin:2px 0; font-size:12px; font-weight:700 }
    .ticket b,.ticket strong,.ticket span{ font-weight:700 }
    .line{ border-top:1px dashed #111; margin:6px 0 }
    small{ font-size:10px; font-weight:700 }
  `;
  var html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>–ß–µ–∫ 58 –º–º</title><style>${css}</style></head><body>${ticket.outerHTML}
  <script>
    window.addEventListener('load',()=>{
      try{ window.focus(); window.print(); if(window.opener) window.opener.postMessage({type:'ticketPrint',status:'invoked'},'*'); }
      catch(e){ if(window.opener) window.opener.postMessage({type:'ticketPrint',status:'error'},'*'); }
    });
  <\/script>
  </body></html>`;

  var w = window.open('', '_blank');
  if(!w){ openTicketOnly(); return; }  // –ø–æ–ø–∞–ø –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ ‚Äî —Ñ–æ–ª–±–µ–∫
  w.document.open(); w.document.write(html); w.document.close();

  var timer = setTimeout(()=>{ openTicketOnly(); }, 1200);
  window.addEventListener('message', (ev)=>{
    if(ev && ev.data && ev.data.type==='ticketPrint'){ clearTimeout(timer); }
  }, {once:true});
}

function openTicketOnly(){
  var ticket = document.getElementById('ticket');
  if(!ticket){ alert('–ù–µ–º–∞—î #ticket –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ'); return; }
  try{
    var someTxt = (document.querySelector('#ticket span, #ticket p, #ticket h4')||{}).textContent||'';
    if(!someTxt || someTxt.trim()==='‚Äî'){ if(typeof buildTicket==='function') buildTicket(); }
  }catch(_){}

  var css = `
    @media print { @page { size:58mm auto; margin:0 } }
    html,body{ margin:0; background:#fff; color:#000 }
    .ticket{
      width:58mm; margin:0; padding:6mm 4mm; background:#fff; color:#000;
      font-family:"Courier New", Courier, monospace; font-weight:700; letter-spacing:0.1px;
      border:none; box-shadow:none; border-radius:0
    }
    .ticket h4{ margin:0 0 6px; font-size:13px; text-align:center; font-weight:700 }
    .ticket p{ margin:2px 0; font-size:12px; font-weight:700 }
    .line{ border-top:1px dashed #111; margin:6px 0 }
    small{ font-size:10px; font-weight:700 }
  `;
  var html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>–ß–µ–∫ 58 –º–º</title><style>${css}</style></head><body>${ticket.outerHTML}
<script>window.addEventListener('load',()=>{ try{ window.focus(); window.print(); }catch(e){} });<\/script>
</body></html>`;

  var blob = new Blob([html], {type:'text/html'});
  var url = URL.createObjectURL(blob);
  window.open(url, '_blank');
  setTimeout(()=>URL.revokeObjectURL(url), 60000);
}
</script>



</body></html>