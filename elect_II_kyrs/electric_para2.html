<!-- electric_para2.html
     –ü–∞—Ä–∞ 2 (–ï–ª–µ–∫—Ç—Ä–∏–∫–∏, –∞—É–¥–∏—Ç–æ—Ä–Ω–æ): –ñ—É—Ä–Ω–∞–ª –ü–ü–† ¬∑ —á–µ–∫-–ª–∏—Å—Ç–∏ ¬∑ PASS/FAIL ¬∑ –µ–∫—Å–ø–æ—Ä—Ç CSV ¬∑ –¥—Ä—É–∫ 58 –º–º ¬∑ NFC/QR-—Ç–µ–∫—Å—Ç
     –ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∏–π —Ñ–∞–π–ª –¥–ª—è GitHub Pages —Ç–∞ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –≤ Moodle —á–µ—Ä–µ–∑ <iframe>.
--><!DOCTYPE html><html lang="uk"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ï–ª–µ–∫—Ç—Ä–∏–∫–∏ ¬∑ –ü–∞—Ä–∞ 2 ‚Äî –ñ—É—Ä–Ω–∞–ª –ü–ü–†, —á–µ–∫-–ª–∏—Å—Ç–∏, –¥—Ä—É–∫ 58 –º–º, NFC/QR</title>
<meta name="color-scheme" content="light dark">
<style>
  :root{
    --bg:#0b1220; --bg2:#111827; --card:#0f172a; --text:#e2e8f0; --muted:#9aa5b1; --line:#1f2937;
    --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --info:#60a5fa;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:linear-gradient(180deg,var(--bg),var(--bg2) 30%,var(--bg)); color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif; line-height:1.55
  }
  .wrap{max-width:1024px; margin:0 auto; padding:24px 16px 64px}
  .badge{display:inline-block; padding:6px 10px; border:1px solid var(--line); background:#0b1220; border-radius:999px; font-size:12px; color:var(--muted)}
  h1{font-size:32px; margin:6px 0 12px; line-height:1.15; background:linear-gradient(90deg,#60a5fa,#22c55e); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
  h2{font-size:22px; margin:22px 0 12px}
  h3{font-size:18px; margin:12px 0 8px; color:#cbd5e1}
  p{margin:8px 0}
  .card{background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid var(--line); border-radius:16px; padding:16px; margin:12px 0; box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .grid{display:grid; gap:12px}
  .g2{grid-template-columns:1fr 1fr}
  @media (max-width:900px){.g2{grid-template-columns:1fr}}
  .row{display:flex; gap:10px; flex-wrap:wrap}
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

  /* –¢–∞–±–ª–∏—Ü—è –∂—É—Ä–Ω–∞–ª—É */
  table{width:100%; border-collapse:separate; border-spacing:0; border:1px solid #223049; border-radius:12px; overflow:hidden}
  thead th{background:#0c1629; color:#a5b4fc; text-align:left; padding:10px 12px; font-size:14px}
  tbody td{padding:8px 10px; border-top:1px solid #1f2937; font-size:14px; vertical-align:top}
  tbody tr:nth-child(even){background:#0b1324}
  .status{display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid #223049; background:#0d1a2e; font-size:12px}
  .dot{width:10px; height:10px; border-radius:50%}
  .pass .dot{background:var(--ok)} .fail .dot{background:var(--bad)} .due .dot{background:var(--warn)}
  .btn{display:inline-block; padding:8px 12px; border-radius:10px; border:1px solid var(--line); background:#0d1a2e; color:#dbeafe; text-decoration:none; cursor:pointer}
  .btn:hover{background:#0f1f39}

  /* –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è */
  .field{display:flex; gap:8px; margin:6px 0}
  .field label{min-width:140px; color:#cbd5e1}
  .field input,.field select,.field textarea{flex:1; padding:8px 10px; border-radius:10px; border:1px solid #223049; background:#0d1a2e; color:#e5e7eb}
  .small{font-size:12px; color:#93a3b5}

  /* –ö–≤–∏—Ç–∞–Ω—Ü—ñ—è 58 –º–º */
  .ticket{width:58mm; background:#fff; color:#000; padding:6mm 4mm; border-radius:6px; box-shadow:0 0 0 1px #e5e7eb inset; font-family:"Courier New",ui-monospace,monospace}
  .ticket h4{margin:0 0 6px; font-size:13px; text-align:center}
  .ticket p{margin:2px 0; font-size:12px}
  .ticket .center{text-align:center}
  .ticket .line{border-top:1px dashed #111; margin:6px 0}
  .ticket small{font-size:10px}
  .ticket .qr{font-size:10px; word-break:break-all}

  /* –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (iframe/Moodle) */
  html.embedded body{background:#fff; color:#111}
  html.embedded .card{background:#fff; border:1px solid #e5e7eb; box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial; background:none; color:#111}

  @media print{
    @page{ size:58mm auto; margin:4mm }
    body{ background:#fff; color:#000 }
    .no-print, .card:not(.printable){ display:none !important }
    .ticket{ box-shadow:none; width:auto; padding:0 }
  }
</style>

<style>
/* PRINT PATCH v1 CSS (auto) */
.ticket{ font-weight:700; letter-spacing:0.1px }
.ticket h4{ font-weight:700 }
.ticket p,
.ticket b,
.ticket strong,
.ticket span,
.ticket small{ font-weight:700 }
</style>

<meta name="description" content="–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–∏–π –∂—É—Ä–Ω–∞–ª –ü–ü–† –µ–ª–µ–∫—Ç—Ä–æ–æ–±‚Äô—î–∫—Ç—ñ–≤, –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–º, —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å PASS/FAIL, –¥—Ä—É–∫—É–≤–∞—Ç–∏ ¬´–ú—ñ—Ç–∫—É –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è 58 –º–º¬ª —ñ –≥–µ–Ω–µ—Ä"><link rel="canonical" href="https://edlab.pp.ua/elect_II_kyrs/electric_para2.html"><meta property="og:type" content="article"><meta property="og:title" content="üõ†Ô∏è –ñ—É—Ä–Ω–∞–ª –ü–ü–† ¬∑ ‚úÖ/‚ùå —á–µ–∫-–ª–∏—Å—Ç–∏ ¬∑ üßæ –¥—Ä—É–∫ 58 –º–º ¬∑ üîó NFC/QR"><meta property="og:description" content="–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–∏–π –∂—É—Ä–Ω–∞–ª –ü–ü–† –µ–ª–µ–∫—Ç—Ä–æ–æ–±‚Äô—î–∫—Ç—ñ–≤, –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–º, —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å PASS/FAIL, –¥—Ä—É–∫—É–≤–∞—Ç–∏ ¬´–ú—ñ—Ç–∫—É –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è 58 –º–º¬ª —ñ –≥–µ–Ω–µ—Ä"><meta property="og:url" content="https://edlab.pp.ua/elect_II_kyrs/electric_para2.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"LearningResource","name":"üõ†Ô∏è –ñ—É—Ä–Ω–∞–ª –ü–ü–† ¬∑ ‚úÖ/‚ùå —á–µ–∫-–ª–∏—Å—Ç–∏ ¬∑ üßæ –¥—Ä—É–∫ 58 –º–º ¬∑ üîó NFC/QR","description":"–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–∏–π –∂—É—Ä–Ω–∞–ª –ü–ü–† –µ–ª–µ–∫—Ç—Ä–æ–æ–±‚Äô—î–∫—Ç—ñ–≤, –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–º, —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å PASS/FAIL, –¥—Ä—É–∫—É–≤–∞—Ç–∏ ¬´–ú—ñ—Ç–∫—É –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è 58 –º–º¬ª —ñ –≥–µ–Ω–µ—Ä","inLanguage":"uk","educationalLevel":"college","url":"https://edlab.pp.ua/elect_II_kyrs/electric_para2.html","provider":{"@type":"Organization","name":"EDLab"}}</script></head>
<body>
  <div class="wrap">
    <span class="badge">–ï–ª–µ–∫—Ç—Ä–∏–∫–∏ ¬∑ –ü–∞—Ä–∞ 2 ¬∑ –∞—É–¥–∏—Ç–æ—Ä–Ω–æ</span>
    <h1>üõ†Ô∏è –ñ—É—Ä–Ω–∞–ª –ü–ü–† ¬∑ ‚úÖ/‚ùå —á–µ–∫-–ª–∏—Å—Ç–∏ ¬∑ üßæ –¥—Ä—É–∫ 58 –º–º ¬∑ üîó NFC/QR</h1>

    <div class="card">
      <h2>üéØ –ú–µ—Ç–∞</h2>
      <p>–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ü–∏—Ñ—Ä–æ–≤–∏–π –∂—É—Ä–Ω–∞–ª –ü–ü–† –µ–ª–µ–∫—Ç—Ä–æ–æ–±‚Äô—î–∫—Ç—ñ–≤, –ø—Ä–æ–≤–æ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –∑–∞ —á–µ–∫-–ª–∏—Å—Ç–æ–º, —Ñ—ñ–∫—Å—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å <b>PASS/FAIL</b>, –¥—Ä—É–∫—É–≤–∞—Ç–∏ ¬´–ú—ñ—Ç–∫—É –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è 58 –º–º¬ª —ñ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ <b>NFC/QR-—Ä—è–¥–æ–∫</b> –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É.</p>
      <div class="row">
        <button class="btn" type="button" onclick="seedDemo()">üîÑ –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥</button>
        <button class="btn" type="button" onclick="exportCSV()">üì§ –ï–∫—Å–ø–æ—Ä—Ç CSV</button>
      </div>
      <p class="small">–ü–æ—Ä–∞–¥–∞: –ø—ñ—Å–ª—è –∑–∞–Ω—è—Ç—Ç—è –∑–∞–≤–∞–Ω—Ç–∞–∂ CSV —É —Å–ø—ñ–ª—å–Ω—É –ø–∞–ø–∫—É –≥—Ä—É–ø–∏. –ù–∞–∑–≤–∞: <span class="mono">–ì–†–£–ü–ê_–ü—Ä—ñ–∑–≤–∏—â–µ_–ü–ü–†.csv</span></p>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç–∞ -->
    <div class="card">
      <h2>‚ûï –î–æ–¥–∞—Ç–∏ –æ–±‚Äô—î–∫—Ç –¥–æ –∂—É—Ä–Ω–∞–ª—É</h2>
      <div class="field">
        <label for="objName">–û–±‚Äô—î–∫—Ç</label>
        <input id="objName" type="text" value="–©–û-1 / –ê–≤—Ç–æ–º–∞—Ç B16">
      </div>
      <div class="field">
        <label for="objPlace">–ú—ñ—Å—Ü–µ</label>
        <input id="objPlace" type="text" value="–ú–∞–π—Å—Ç–µ—Ä–Ω—è">
      </div>
      <div class="field">
        <label for="period">–ü–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ—Å—Ç—å</label>
        <select id="period">
          <option value="1">1 –º—ñ—Å</option>
          <option value="3" selected="">3 –º—ñ—Å</option>
          <option value="6">6 –º—ñ—Å</option>
          <option value="12">12 –º—ñ—Å</option>
        </select>
      </div>
      <div class="field">
        <label for="resp">–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π</label>
        <input id="resp" type="text" value="–ü–Ü–ë / –≥—Ä—É–ø–∞">
      </div>
      <div class="row">
        <button class="btn" type="button" onclick="addObject()">‚ûï –î–æ–¥–∞—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü—é</button>
      </div>
      <p class="small">–ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–π –ø–µ—Ä–µ–≤—ñ—Ä–∫—É (—á–µ–∫-–ª–∏—Å—Ç) —ñ –∑–∞—Ñ—ñ–∫—Å—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
    </div>

    <!-- –ñ—É—Ä–Ω–∞–ª -->
    <div class="card printable">
      <h2>üìã –ñ—É—Ä–Ω–∞–ª –ü–ü–†</h2>
      <table id="journal">
        <thead>
          <tr>
            <th>#</th>
            <th>–û–±‚Äô—î–∫—Ç</th>
            <th>–ú—ñ—Å—Ü–µ</th>
            <th>–ü–µ—Ä—ñ–æ–¥, –º—ñ—Å</th>
            <th>–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π</th>
            <th>–û—Å—Ç–∞–Ω–Ω—è –¥–∞—Ç–∞</th>
            <th>–ù–∞—Å—Ç—É–ø–Ω–∞ –¥–∞—Ç–∞</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î—ñ—ó</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <p class="small">–°—Ç–∞—Ç—É—Å–∏: <span class="status pass"><span class="dot"></span>PASS</span> ¬∑ <span class="status fail"><span class="dot"></span>FAIL</span> ¬∑ <span class="status due"><span class="dot"></span>DUE</span> (–∫–æ–ª–∏ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ/—Å—å–æ–≥–æ–¥–Ω—ñ).</p>
    </div>

    <!-- –ß–µ–∫-–ª–∏—Å—Ç + –¥—Ä—É–∫ -->
    <div class="card">
      <h2>‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ ¬∑ –ú—ñ—Ç–∫–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è 58 –º–º</h2>
      <div class="grid g2">
        <div>
          <h3>1) –û–±–µ—Ä–∏ —Ä—è–¥–æ–∫ –∂—É—Ä–Ω–∞–ª—É –π –≤–∏–∫–æ–Ω–∞–π —á–µ–∫-–ª–∏—Å—Ç</h3>
          <div id="selectedInfo" class="small">–û–±—Ä–∞–Ω–æ: ‚Äî</div>
          <div id="checklist" style="margin-top:8px">
            <label><input type="checkbox" class="cl" data-name="–í–∏–º–∫–Ω–µ–Ω–Ω—è –∂–∏–≤–ª–µ–Ω–Ω—è"> –í–∏–º–∫–Ω–µ–Ω–Ω—è –∂–∏–≤–ª–µ–Ω–Ω—è (LOTO)</label><br>
            <label><input type="checkbox" class="cl" data-name="–í—ñ–∑—É–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥"> –í—ñ–∑—É–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ (–∫–æ—Ä–ø—É—Å, –∫–ª–µ–º–∏, –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è)</label><br>
            <label><input type="checkbox" class="cl" data-name="–ó–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤"> –ó–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (–∑–∞ –ø–æ—Ç—Ä–µ–±–∏)</label><br>
            <label><input type="checkbox" class="cl" data-name="–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞—Ö–∏—Å—Ç—É"> –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–º—ñ–Ω–∞–ª—É –∑–∞—Ö–∏—Å—Ç—É (–∞–≤—Ç–æ–º–∞—Ç/–ü–ó–í)</label><br>
            <label><input type="checkbox" class="cl" data-name="–¢–µ—Å—Ç —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó"> –¢–µ—Å—Ç —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó/–º–∞—Ä–∫—É–≤–∞–Ω–Ω—è</label><br>
          </div>
          <div class="row" style="margin-top:8px">
            <button class="btn" type="button" onclick="markPass()">‚úÖ PASS</button>
            <button class="btn" type="button" onclick="markFail()">‚ùå FAIL</button>
          </div>
          <p class="small">–ü—ñ–¥ —á–∞—Å FAIL –¥–æ–¥–∞–π –ø—Ä–∏–º—ñ—Ç–∫—É –≤ –ø–æ–ª—ñ –Ω–∏–∂—á–µ –ø–µ—Ä–µ–¥ –¥—Ä—É–∫–æ–º.</p>
          <div class="field" style="margin-top:8px">
            <label for="note">–ü—Ä–∏–º—ñ—Ç–∫–∞</label>
            <input id="note" type="text" placeholder="–ù–∞–ø—Ä.: –ó–∞–º—ñ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∞ –¥–æ 20.10.2025">
          </div>
        </div>

        <div>
          <h3>2) –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –º—ñ—Ç–∫–∏ 58 –º–º</h3>
          <div id="ticket" class="ticket" aria-live="polite">
            <h4>–ü–ü–† ¬∑ –ú–Ü–¢–ö–ê –û–ë–°–õ–£–ì–û–í–£–í–ê–ù–ù–Ø</h4>
            <p class="center"><small id="t-date">–î–∞—Ç–∞: ‚Äî</small></p>
            <div class="line"></div>
            <p><b id="t-obj">–û–±‚Äô—î–∫—Ç: ‚Äî</b></p>
            <p>–ú—ñ—Å—Ü–µ: <span id="t-place">‚Äî</span></p>
            <p>–ü–µ—Äi–æ–¥–∏—á–Ωi—Å—Ç—å: <span id="t-per">‚Äî</span> –º—ñ—Å</p>
            <p>–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: <span id="t-resp">‚Äî</span></p>
            <p>–°—Ç–∞—Ç—É—Å: <span id="t-status">‚Äî</span></p>
            <p id="t-note-wrap" style="display:none">–ü—Ä–∏–º—ñ—Ç–∫–∞: <span id="t-note">‚Äî</span></p>
            <div class="line"></div>
            <p>–û—Å—Ç–∞–Ω–Ω—è: <span id="t-last">‚Äî</span></p>
            <p>–ù–∞—Å—Ç—É–ø–Ω–∞: <span id="t-next">‚Äî</span></p>
            <div class="line"></div>
            <p class="qr"><small id="t-nfc">NFC/QR: ‚Äî</small></p>
            <p class="center"><small>–ü—ñ–¥–ø–∏—Å: ____________</small></p>
          </div>
          <div class="row no-print" style="margin-top:8px">
            <button class="btn" type="button" onclick="buildTicket()">üß© –ó—ñ–±—Ä–∞—Ç–∏ –º—ñ—Ç–∫—É</button>
            <button class="btn" type="button" onclick="printTicketNewTab()">üñ®Ô∏è –î—Ä—É–∫ 58 –º–º</button>
            <button class="btn" type="button" onclick="downloadTXT()">üì• TXT</button>
          </div>
          <p class="small">NFC/QR-—Ä—è–¥–æ–∫ –Ω–∏–∂—á–µ –º–æ–∂–Ω–∞ <b>–∑–∞–ø–∏—Å–∞—Ç–∏ –Ω–∞ NFC-–º—ñ—Ç–∫—É</b> —Å—Ç–æ—Ä–æ–Ω–Ω—ñ–º –¥–æ–¥–∞—Ç–∫–æ–º –∞–±–æ –Ω–∞–¥—Ä—É–∫—É–≤–∞—Ç–∏ —É –≤–∏–≥–ª—è–¥—ñ QR (–æ–Ω–ª–∞–π–Ω-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º).</p>
        </div>
      </div>
    </div>

    <!-- NFC/QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä -->
    <div class="card">
      <h2>üîó NFC/QR-—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä</h2>
      <p class="small">–†–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ —Ñ–æ—Ä–º–∞—Ç URL, —â–æ –≤–µ–¥–µ –Ω–∞ —Ü—é —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ —è–∫–æ—Ä–µ–º –æ–±‚Äô—î–∫—Ç–∞.</p>
      <div class="field">
        <label for="nfcText">–¢–µ–∫—Å—Ç –¥–ª—è –∑–∞–ø–∏—Å—É –Ω–∞ NFC / QR</label>
        <input id="nfcText" type="text" value="https://serawww7.github.io/edlab/electric_para2.html#asset=ELC-001">
      </div>
      <div class="row">
        <button class="btn" type="button" onclick="genNFC()">üîÅ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑ –æ–±—Ä–∞–Ω–æ–≥–æ —Ä—è–¥–∫–∞</button>
        <button class="btn" type="button" onclick="copyNFC()">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
      </div>
      <p class="small">–©–æ–± –∑–∞–∫–æ–¥—É–≤–∞—Ç–∏ NFC: –≤—ñ–¥–∫—Ä–∏–π –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∑–∞–ø–∏—Å—É NFC ‚Üí ¬´Write¬ª ‚Üí –≤—Å—Ç–∞–≤ —Ü–µ–π —Ä—è–¥–æ–∫ ‚Üí —Ç–æ—Ä–∫–Ω–∏—Å—è –º—ñ—Ç–∫–æ—é —Ç–µ–ª–µ—Ñ–æ–Ω–∞.</p>
    </div>
  </div>

<script>
  // –†–µ–∂–∏–º ¬´–≤–±—É–¥–æ–≤–∞–Ω–æ —É Moodle¬ª
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  const tbody = document.querySelector('#journal tbody');
  let data = []; // {id, name, place, period, resp, lastISO, nextISO, status}

  function pad(n){ return n.toString().padStart(2,'0'); }
  function toISO(d){ return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`; }
  function addMonths(date, m){
    const d = new Date(date.getTime());
    d.setMonth(d.getMonth() + m);
    return d;
  }
  function todayISO(){ return toISO(new Date()); }

  function render(){
    tbody.innerHTML = '';
    const today = new Date(todayISO());
    data.forEach((row, i)=>{
      const tr = document.createElement('tr');

      const next = new Date(row.nextISO);
      let statusClass = row.status === 'PASS' ? 'pass' : (row.status === 'FAIL' ? 'fail' : 'due');
      if (row.status === 'PASS' && next <= today) statusClass = 'due';

      tr.innerHTML = `
        <td>${i+1}</td>
        <td>${row.name}</td>
        <td>${row.place}</td>
        <td>${row.period}</td>
        <td>${row.resp}</td>
        <td>${row.lastISO}</td>
        <td>${row.nextISO}</td>
        <td><span class="status ${statusClass}"><span class="dot"></span>${statusClass.toUpperCase()}</span></td>
        <td class="mono">
          <button class="btn" data-act="select" data-id="${row.id}">–û–±—Ä–∞—Ç–∏</button>
          <button class="btn" data-act="pass" data-id="${row.id}">PASS</button>
          <button class="btn" data-act="fail" data-id="${row.id}">FAIL</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  function addObject(){
    const name = document.getElementById('objName').value.trim();
    const place= document.getElementById('objPlace').value.trim();
    const period = parseInt(document.getElementById('period').value,10);
    const resp = document.getElementById('resp').value.trim();
    if(!name || !place || !resp){ alert('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –û–±‚Äô—î–∫—Ç, –ú—ñ—Å—Ü–µ —Ç–∞ –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ–≥–æ'); return; }
    const last = new Date(); // —Å—å–æ–≥–æ–¥–Ω—ñ —è–∫ –ø–æ—Ç–æ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
    const next = addMonths(last, period);
    const row = {
      id: 'ELC-' + Math.random().toString(36).slice(2,7).toUpperCase(),
      name, place, period, resp,
      lastISO: toISO(last),
      nextISO: toISO(next),
      status: 'PASS'
    };
    data.push(row);
    render();
    selectRow(row.id);
  }

  function seedDemo(){
    data = [
      {id:'ELC-001', name:'–©–û-1 / –ê–≤—Ç–æ–º–∞—Ç B16', place:'–ú–∞–π—Å—Ç–µ—Ä–Ω—è', period:3, resp:'–°—Ç—É–¥–µ–Ω—Ç 1', lastISO:todayISO(), nextISO:toISO(addMonths(new Date(),3)), status:'PASS'},
      {id:'ELC-002', name:'–ü–æ–¥–æ–≤–∂—É–≤–∞—á ‚Ññ2', place:'–õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è', period:1, resp:'–°—Ç—É–¥–µ–Ω—Ç 2', lastISO:todayISO(), nextISO:toISO(addMonths(new Date(),1)), status:'PASS'}
    ];
    render();
    selectRow('ELC-001');
  }

  // –í–∏–±—ñ—Ä —Ä—è–¥–∫–∞
  let currentId = null;
  function selectRow(id){
    const row = data.find(r=>r.id===id);
    if(!row) return;
    currentId = id;
    document.getElementById('selectedInfo').textContent = `–û–±—Ä–∞–Ω–æ: ${row.name} (${row.id})`;
    buildTicket(); // –æ–Ω–æ–≤–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥
  }

  tbody.addEventListener('click', (e)=>{
    const b = e.target.closest('button');
    if(!b) return;
    const id = b.getAttribute('data-id');
    const act = b.getAttribute('data-act');
    const row = data.find(r=>r.id===id);
    if(!row) return;

    if(act==='select'){ selectRow(id); return; }
    if(act==='pass'){
      row.status = 'PASS';
      row.lastISO = todayISO();
      row.nextISO = toISO(addMonths(new Date(), row.period));
      render(); selectRow(id);
    }
    if(act==='fail'){
      row.status = 'FAIL';
      row.lastISO = todayISO();
      row.nextISO = toISO(addMonths(new Date(), row.period)); // –ø–ª–∞–Ω –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –æ–≥–ª—è–¥—É
      render(); selectRow(id);
    }
  });

  // –ú–∞—Ä–∫—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —á–µ–∫-–ª–∏—Å—Ç
  function markPass(){
    if(!currentId){ alert('–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å —Ä—è–¥–æ–∫ –∂—É—Ä–Ω–∞–ª—É'); return; }
    const row = data.find(r=>r.id===currentId);
    row.status = 'PASS';
    row.lastISO = todayISO();
    row.nextISO = toISO(addMonths(new Date(), row.period));
    render(); selectRow(currentId);
  }
  function markFail(){
    if(!currentId){ alert('–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å —Ä—è–¥–æ–∫ –∂—É—Ä–Ω–∞–ª—É'); return; }
    const row = data.find(r=>r.id===currentId);
    row.status = 'FAIL';
    row.lastISO = todayISO();
    row.nextISO = toISO(addMonths(new Date(), row.period));
    render(); selectRow(currentId);
  }

  // –ü–æ–±—É–¥–æ–≤–∞ –º—ñ—Ç–∫–∏ 58 –º–º
  function buildTicket(){
    const now = new Date(); const stamp = `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} ${pad(now.getHours())}:${pad(now.getMinutes())}`;
    document.getElementById('t-date').textContent = `–î–∞—Ç–∞: ${stamp}`;

    const row = data.find(r=>r.id===currentId);
    if(!row){
      document.getElementById('t-obj').textContent = '–û–±‚Äô—î–∫—Ç: ‚Äî';
      document.getElementById('t-place').textContent = '‚Äî';
      document.getElementById('t-per').textContent = '‚Äî';
      document.getElementById('t-resp').textContent = '‚Äî';
      document.getElementById('t-status').textContent = '‚Äî';
      document.getElementById('t-last').textContent = '‚Äî';
      document.getElementById('t-next').textContent = '‚Äî';
      document.getElementById('t-note-wrap').style.display = 'none';
      document.getElementById('t-nfc').textContent = 'NFC/QR: ‚Äî';
      return;
    }
    const note = document.getElementById('note').value.trim();

    document.getElementById('t-obj').textContent = `–û–±‚Äô—î–∫—Ç: ${row.name}`;
    document.getElementById('t-place').textContent = row.place;
    document.getElementById('t-per').textContent = row.period;
    document.getElementById('t-resp').textContent = row.resp;
    document.getElementById('t-status').textContent = row.status;
    document.getElementById('t-last').textContent = row.lastISO;
    document.getElementById('t-next').textContent = row.nextISO;

    if(note){
      document.getElementById('t-note').textContent = note;
      document.getElementById('t-note-wrap').style.display = '';
    }else{
      document.getElementById('t-note-wrap').style.display = 'none';
    }

    const url = `https://serawww7.github.io/edlab/electric_para2.html#asset=${row.id}`;
    document.getElementById('t-nfc').textContent = `NFC/QR: ${url}`;
    document.getElementById('nfcText').value = url;
  }

  function downloadTXT(){
    const lines = [];
    lines.push('PPR LABEL 58mm');
    lines.push('----------------');
    lines.push(document.getElementById('t-date').textContent);
    lines.push(document.getElementById('t-obj').textContent);
    lines.push(`–ú—ñ—Å—Ü–µ: ${document.getElementById('t-place').textContent}`);
    lines.push(`–ü–µ—Ä—ñ–æ–¥–∏—á–Ω—ñ—Å—Ç—å: ${document.getElementById('t-per').textContent} –º—ñ—Å`);
    lines.push(`–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π: ${document.getElementById('t-resp').textContent}`);
    lines.push(`–°—Ç–∞—Ç—É—Å: ${document.getElementById('t-status').textContent}`);
    const noteWrap = document.getElementById('t-note-wrap');
    if(noteWrap.style.display!=='none'){ lines.push(`–ü—Ä–∏–º—ñ—Ç–∫–∞: ${document.getElementById('t-note').textContent}`); }
    lines.push(`–û—Å—Ç–∞–Ω–Ω—è: ${document.getElementById('t-last').textContent}`);
    lines.push(`–ù–∞—Å—Ç—É–ø–Ω–∞: ${document.getElementById('t-next').textContent}`);
    lines.push(document.getElementById('t-nfc').textContent);

    const blob = new Blob([lines.join('\n')], {type:'text/plain;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'ppr_label_58mm.txt';
    a.click();
    URL.revokeObjectURL(a.href);
  }

  function exportCSV(){
    const headers = ['id','object','place','period_months','responsible','last_date','next_date','status'];
    const rows = data.map(r=>[r.id, r.name, r.place, r.period, r.resp, r.lastISO, r.nextISO, r.status]);
    const csv = [headers.join(','), ...rows.map(a=>a.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(','))].join('\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'journal_ppr.csv';
    a.click();
    URL.revokeObjectURL(a.href);
  }

  function genNFC(){
    if(!currentId){ alert('–û–±–µ—Ä—ñ—Ç—å —Ä—è–¥–æ–∫ –∂—É—Ä–Ω–∞–ª—É'); return; }
    const row = data.find(r=>r.id===currentId);
    const url = `https://serawww7.github.io/edlab/electric_para2.html#asset=${row.id}`;
    document.getElementById('nfcText').value = url;
    buildTicket();
  }
  function copyNFC(){
    const el = document.getElementById('nfcText');
    el.select(); el.setSelectionRange(0, el.value.length);
    document.execCommand('copy');
    alert('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ —É –±—É—Ñ–µ—Ä –æ–±–º—ñ–Ω—É.');
  }

  // –Ø–∫—â–æ –ø—Ä–∏–π—à–ª–∏ –∑ #asset=... ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–∏–¥—ñ–ª–∏–º–æ —Ç–∞ –ø—ñ–¥—Å–≤—ñ—Ç–∏–º–æ (–¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î, –±–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –±–µ–∑ –±–µ–∫–µ–Ω–¥—É)
  (function(){
    const h = location.hash || '';
    const m = h.match(/asset=([A-Z0-9\-]+)/i);
    if(m){ document.getElementById('nfcText').value = location.href; }
  })();

  // –°—Ç–∞—Ä—Ç
  seedDemo();
</script>

<script>
// PRINT PATCH v1 (auto)
function printTicketNewTab(){
  var ticket = document.getElementById('ticket');
  if(!ticket){ alert('–ù–µ–º–∞—î #ticket –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ'); return; }
  try{
    var someTxt = (document.querySelector('#ticket span, #ticket p, #ticket h4')||{}).textContent||'';
    if(!someTxt || someTxt.trim()==='‚Äî'){ if(typeof buildTicket==='function') buildTicket(); }
  }catch(_){}

  var css = `
    @media print { @page { size:58mm auto; margin:0 } }
    html,body{ margin:0; padding:0; background:#fff; color:#000 }
    .ticket{
      width:58mm; margin:0; padding:6mm 4mm; background:#fff; color:#000;
      font-family:"Courier New", Courier, monospace; font-weight:700; letter-spacing:0.1px;
      border:none; box-shadow:none; border-radius:0
    }
    .ticket h4{ margin:0 0 6px; font-size:13px; text-align:center; font-weight:700 }
    .ticket p{ margin:2px 0; font-size:12px; font-weight:700 }
    .ticket b,.ticket strong,.ticket span{ font-weight:700 }
    .line{ border-top:1px dashed #111; margin:6px 0 }
    small{ font-size:10px; font-weight:700 }
  `;
  var html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>–ß–µ–∫ 58 –º–º</title><style>${css}</style></head><body>${ticket.outerHTML}
  <script>
    window.addEventListener('load',()=>{
      try{ window.focus(); window.print(); if(window.opener) window.opener.postMessage({type:'ticketPrint',status:'invoked'},'*'); }
      catch(e){ if(window.opener) window.opener.postMessage({type:'ticketPrint',status:'error'},'*'); }
    });
  <\/script>
  </body></html>`;

  var w = window.open('', '_blank');
  if(!w){ openTicketOnly(); return; }  // –ø–æ–ø–∞–ø –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ ‚Äî —Ñ–æ–ª–±–µ–∫
  w.document.open(); w.document.write(html); w.document.close();

  var timer = setTimeout(()=>{ openTicketOnly(); }, 1200);
  window.addEventListener('message', (ev)=>{
    if(ev && ev.data && ev.data.type==='ticketPrint'){ clearTimeout(timer); }
  }, {once:true});
}

function openTicketOnly(){
  var ticket = document.getElementById('ticket');
  if(!ticket){ alert('–ù–µ–º–∞—î #ticket –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ'); return; }
  try{
    var someTxt = (document.querySelector('#ticket span, #ticket p, #ticket h4')||{}).textContent||'';
    if(!someTxt || someTxt.trim()==='‚Äî'){ if(typeof buildTicket==='function') buildTicket(); }
  }catch(_){}

  var css = `
    @media print { @page { size:58mm auto; margin:0 } }
    html,body{ margin:0; background:#fff; color:#000 }
    .ticket{
      width:58mm; margin:0; padding:6mm 4mm; background:#fff; color:#000;
      font-family:"Courier New", Courier, monospace; font-weight:700; letter-spacing:0.1px;
      border:none; box-shadow:none; border-radius:0
    }
    .ticket h4{ margin:0 0 6px; font-size:13px; text-align:center; font-weight:700 }
    .ticket p{ margin:2px 0; font-size:12px; font-weight:700 }
    .line{ border-top:1px dashed #111; margin:6px 0 }
    small{ font-size:10px; font-weight:700 }
  `;
  var html = `<!DOCTYPE html><html><head><meta charset="utf-8"><title>–ß–µ–∫ 58 –º–º</title><style>${css}</style></head><body>${ticket.outerHTML}
<script>window.addEventListener('load',()=>{ try{ window.focus(); window.print(); }catch(e){} });<\/script>
</body></html>`;

  var blob = new Blob([html], {type:'text/html'});
  var url = URL.createObjectURL(blob);
  window.open(url, '_blank');
  setTimeout(()=>URL.revokeObjectURL(url), 60000);
}
</script>



</body></html>