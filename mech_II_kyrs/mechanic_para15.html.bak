<!-- mechanic_para15.html
     –ü–ê–†–ê 15 (–∞—É–¥–∏—Ç–æ—Ä–Ω–æ) –¥–ª—è –º–µ—Ö–∞–Ω—ñ–∫—ñ–≤
     –¢–µ–º–∞: –ì–Ü–î–†–ê–í–õ–Ü–ö–ê ‚Äî —Ü–∏–ª—ñ–Ω–¥—Ä–∏ (—Å–∏–ª–∞/—à–≤–∏–¥–∫—ñ—Å—Ç—å/—á–∞—Å), –Ω–∞—Å–æ—Å–∏ (–ø–æ–¥–∞—á–∞/–ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å/–≤—Ç—Ä–∞—Ç–∏),
           –ª—ñ–Ω—ñ—ó (—à–≤–∏–¥–∫—ñ—Å—Ç—å —É —à–ª–∞–Ω–≥—É —Ç–∞ –ø—ñ–¥–±—ñ—Ä √ò), –∑–∞–ø–æ–±—ñ–∂–Ω–∏–π –∫–ª–∞–ø–∞–Ω, —Ç–µ–ø–ª–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è,
           –∂—É—Ä–Ω–∞–ª, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC, CSV.
     –§–æ–∫—É—Å: —Ç–µ–ª–µ—Ñ–æ–Ω–∏/–ü–ö; –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫; –≥–æ—Ç–æ–≤–æ –¥–ª—è GitHub Pages —Ç–∞ Moodle (iframe).
     –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è: —Ç–µ–ª–µ—Ñ–æ–Ω–∏; (–æ–ø—Ü.) –º–∞–Ω–æ–º–µ—Ç—Ä, —à—Ç–∞–Ω–≥–µ–Ω—Ü–∏—Ä–∫—É–ª—å, —Å–µ–∫—É–Ω–¥–æ–º—ñ—Ä; –ø—Ä–∏–Ω—Ç–µ—Ä 58 –º–º; NFC-–º—ñ—Ç–∫–∏.

     –ü—Ä–∏–º—ñ—Ç–∫–∞ –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É: —Ç–µ–º–Ω—ñ –∫–ª—ñ—Ç–∏–Ω–∫–∏ —Ç–∞–±–ª–∏—Ü—å –º–∞—é—Ç—å —Å–≤—ñ—Ç–ª–∏–π —Ç–µ–∫—Å—Ç (.dark).
-->
<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ü–∞—Ä–∞ 15 (–º–µ—Ö–∞–Ω—ñ–∫–∏) ‚Äî –ì—ñ–¥—Ä–∞–≤–ª—ñ–∫–∞: —Ü–∏–ª—ñ–Ω–¥—Ä–∏, –Ω–∞—Å–æ—Å–∏, —à–ª–∞–Ω–≥–∏, –∫–ª–∞–ø–∞–Ω, —Ç–µ–ø–ª–æ, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC</title>
<meta name="color-scheme" content="light dark">
<style>
  :root{
    --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --text:#e2e8f0;
    --accent:#22c55e; --accent-2:#60a5fa; --warn:#f59e0b; --bad:#ef4444; --good:#10b981; --line:#1f2937;
    --darkcell:#0b1324; --darkink:#e6eef9; --darkink2:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b1220,#111827 30%,#0b1220);color:var(--text);
       font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;line-height:1.55}
  .wrap{max-width:1100px;margin:0 auto;padding:24px 16px 64px}
  .badge{display:inline-block;padding:6px 10px;border:1px solid var(--line);background:#0b1220;border-radius:999px;
         font-size:12px;color:var(--muted);letter-spacing:.3px}
  h1{font-size:34px;margin:6px 0 12px;line-height:1.15;
     background:linear-gradient(90deg,#60a5fa,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  h2{font-size:22px;margin:28px 0 12px} h3{font-size:18px;margin:20px 0 8px;color:#cbd5e1}
  p{margin:10px 0}.small{font-size:12px;color:#9fb0c8}.muted{color:#93a3b5}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#dbeafe;text-decoration:none;cursor:pointer}
  .btn:hover{background:#0f1f39}
  .grid{display:grid;gap:12px}.g2{grid-template-columns:repeat(2,minmax(0,1fr))}.g3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:1000px){.g2,.g3{grid-template-columns:1fr}}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg,#0f172a,#0b1220);border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .box{border:1px solid #223049;border-radius:12px;padding:12px;background:var(--darkcell);color:var(--darkink)}
  .ok{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  .table{width:100%;border-collapse:separate;border-spacing:0;overflow:auto;border-radius:12px;border:1px solid #223049}
  .table th,.table td{padding:8px 10px;border-bottom:1px solid #1f2937;font-size:14px;vertical-align:top}
  .table thead th{background:#0c1629;color:#a5b4fc;text-align:left;position:sticky;top:0}
  .table tbody tr:nth-child(even){background:var(--darkcell);color:var(--darkink2)}
  .table td.dark,.table th.dark{background:var(--darkcell)!important;color:var(--darkink2)!important}
  .out{background:var(--darkcell);color:var(--darkink2);border:1px dashed #263042;padding:10px 12px;border-radius:10px;word-break:break-all}
  input[type="text"],input[type="number"],input[type="date"],select,textarea{width:100%;padding:8px 10px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#e6eef9}
  /* –ß–µ–∫ 58 –º–º */
  .ticket{width:58mm;background:#fff;color:#000;padding:6mm 4mm;border-radius:6px;box-shadow:0 0 0 1px #e5e7eb inset;font-family:"Courier New",ui-monospace,monospace}
  .ticket h4{margin:0 0 6px;font-size:13px;text-align:center}.ticket p{margin:2px 0;font-size:12px}.ticket .line{border-top:1px dashed #111;margin:6px 0}
  .ticket small{font-size:10px}
  /* –í–±—É–¥–æ–≤–∞–Ω–æ (iframe) ‚Üí —Å–≤—ñ—Ç–ª–∏–π –≤–∏–≥–ª—è–¥ */
  html.embedded body{background:#fff;color:#111}
  html.embedded .card{background:#fff;border:1px solid #e5e7eb;box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial;background:none;color:#111}
  html.embedded .box{background:#f8fafc;color:#111}
  html.embedded .table tbody tr:nth-child(even){background:#f3f4f6;color:#111}
  @media print{@page{margin:4mm}.no-print{display:none!important}}
</style>
</head>
<body>
<div class="wrap">
  <span class="badge">–ü–∞—Ä–∞ 15 ¬∑ –∞—É–¥–∏—Ç–æ—Ä–Ω–æ ¬∑ –º–µ—Ö–∞–Ω—ñ–∫–∏</span>
  <h1>üíß –ì—ñ–¥—Ä–∞–≤–ª—ñ–∫–∞: —Ü–∏–ª—ñ–Ω–¥—Ä–∏, –Ω–∞—Å–æ—Å–∏, —à–ª–∞–Ω–≥–∏, –∫–ª–∞–ø–∞–Ω, —Ç–µ–ø–ª–æ, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC</h1>

  <div class="card">
    <h2>üéØ –ú–µ—Ç–∞</h2>
    <p>
      –ó–∞ –ø–∞—Ä—É —Å—Ç—É–¥–µ–Ω—Ç–∏ –Ω–∞–≤—á–∞—Ç—å—Å—è —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ <b>—Å–∏–ª—É —Ç–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –≥—ñ–¥—Ä–æ—Ü–∏–ª—ñ–Ω–¥—Ä–∞</b>, <b>—á–∞—Å —Ö–æ–¥—É</b>,
      –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ <b>–Ω–∞—Å–æ—Å–∞</b> (–ø–æ–¥–∞—á–∞/–ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å/—Ç–µ–ø–ª–æ–≤—Ç—Ä–∞—Ç–∏), <b>—à–≤–∏–¥–∫—ñ—Å—Ç—å —É —à–ª–∞–Ω–≥—É</b> —ñ –ø—ñ–¥–±—ñ—Ä <b>–≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ √ò</b>,
      –∫–æ—Ä–µ–∫—Ç–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ <b>–∑–∞–ø–æ–±—ñ–∂–Ω–∏–π –∫–ª–∞–ø–∞–Ω</b>, –≤–µ—Å—Ç–∏ <b>–∂—É—Ä–Ω–∞–ª</b>, —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ <b>–∫–≤–∏—Ç–æ–∫</b>, <b>NFC</b> —Ç–∞ <b>CSV</b>.
    </p>
    <p class="small">–§–æ—Ä–º—É–ª–∏: A=œÄ¬∑D¬≤/4; A—à—Ç=œÄ¬∑(D¬≤‚àíd¬≤)/4; F=P¬∑A (P —É –ü–∞); v=Q/A; t=—Ö—ñ–¥/v; P–Ω–∞—Å–æ—Å–∞‚âàp¬∑Q/600 (–∫–í—Ç, p ‚Äî –±–∞—Ä, Q ‚Äî –ª/—Ö–≤);
      —à–≤–∏–¥–∫—ñ—Å—Ç—å —É —à–ª–∞–Ω–≥—É w=Q/(œÄ¬∑D–≤–Ω¬≤/4) (—ñ–∑ Q —É –º¬≥/—Å). –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó: —Ç–∏—Å–∫ <span class="mono">180‚Äì210 –±–∞—Ä</span> (—Ç–∏–ø–æ–≤–æ),
      —à–≤–∏–¥–∫—ñ—Å—Ç—å —É –Ω–∞–ø—ñ—Ä–Ω—ñ–π –ª—ñ–Ω—ñ—ó <span class="mono">2‚Äì5 –º/—Å</span>, —É –∑–ª–∏–≤–Ω—ñ–π <span class="mono">1‚Äì3 –º/—Å</span>.</p>
  </div>

  <!-- 1. –¶–ò–õ–Ü–ù–î–† -->
  <div class="card">
    <h2>üõ†Ô∏è –¶–∏–ª—ñ–Ω–¥—Ä: —Å–∏–ª–∞, —à–≤–∏–¥–∫—ñ—Å—Ç—å, —á–∞—Å</h2>
    <div class="grid g3">
      <div class="box">
        <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ü–∏–ª—ñ–Ω–¥—Ä–∞</h3>
        <div class="row">
          <div style="flex:1"><label>√ò –ø–æ—Ä—à–Ω—è D, –º–º</label><input id="D" type="number" step="1" value="80"></div>
          <div style="flex:1"><label>√ò —à—Ç–æ–∫–∞ d, –º–º</label><input id="d" type="number" step="1" value="45"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–•—ñ–¥, –º–º</label><input id="stroke" type="number" step="1" value="500"></div>
          <div style="flex:1"><label>–¢–∏—Å–∫ p, –±–∞—Ä</label><input id="p" type="number" step="1" value="200"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–ü–æ–¥–∞—á–∞ Q, –ª/—Ö–≤</label><input id="Q" type="number" step="0.1" value="35"></div>
          <div style="flex:1"><label>–°—Ç–æ—Ä–æ–Ω–∞</label>
            <select id="side"><option value="cap" selected>–±–µ–∑—à—Ç–æ–∫–æ–≤–∞ (–≤–∏—à—Ç–æ–≤—Ö)</option><option value="rod">—à—Ç–æ–∫–æ–≤–∞ (–≤—Ç—è–≥)</option></select>
          </div>
        </div>
      </div>
      <div class="box">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <p>–ü–ª–æ—â–∞ A: <b><span id="A">‚Äî</span></b> —Å–º¬≤</p>
        <p>–°–∏–ª–∞ F: <b><span id="F">‚Äî</span></b> –∫–ù</p>
        <p>–®–≤–∏–¥–∫—ñ—Å—Ç—å v: <b><span id="v">‚Äî</span></b> –º–º/—Å</p>
        <p>–ß–∞—Å —Ö–æ–¥—É t: <b><span id="t">‚Äî</span></b> —Å</p>
      </div>
      <div class="box">
        <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        <div class="row">
          <button class="btn" onclick="calcCyl()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="presetCyl()">üß™ –ü—Ä–∏–∫–ª–∞–¥</button>
          <button class="btn" onclick="copyCSV('csvCyl')">üìã CSV (cylinder)</button>
        </div>
        <div id="csvCyl" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
  </div>

  <!-- 2. –ù–ê–°–û–° -->
  <div class="card">
    <h2>üöø –ù–∞—Å–æ—Å: –ø–æ–¥–∞—á–∞, –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å, —Ç–µ–ø–ª–æ</h2>
    <div class="grid g3">
      <div class="box">
        <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–∞—Å–æ—Å–∞</h3>
        <div class="row">
          <div style="flex:1"><label>–†–æ–±–æ—á–∏–π –æ–±'—î–º, —Å–º¬≥/–æ–±</label><input id="disp" type="number" step="0.1" value="28"></div>
          <div style="flex:1"><label>–û–±–µ—Ä—Ç–∏, –æ–±/—Ö–≤</label><input id="rpm" type="number" step="1" value="2000"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–¢–∏—Å–∫, –±–∞—Ä</label><input id="ppump" type="number" step="1" value="200"></div>
          <div style="flex:1"><label>Œ∑ –æ–±'—î–º–Ω–∞/–º–µ—Ö., %</label><input id="eta" type="number" step="1" value="85"></div>
        </div>
      </div>
      <div class="box">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <p>–ü–æ–¥–∞—á–∞ Q: <b><span id="Qpump">‚Äî</span></b> –ª/—Ö–≤</p>
        <p>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å –≤–∞–ª—É: <b><span id="PkW">‚Äî</span></b> –∫–í—Ç</p>
        <p>–í—Ç—Ä–∞—Ç–∏ (—Ç–µ–ø–ª–æ): <b><span id="Heat">‚Äî</span></b> –∫–í—Ç</p>
      </div>
      <div class="box">
        <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        <div class="row">
          <button class="btn" onclick="calcPump()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="copyCSV('csvPump')">üìã CSV (pump)</button>
        </div>
        <div id="csvPump" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
    <p class="small muted">Q (–ª/—Ö–≤) ‚âà <span class="mono">disp(—Å–º¬≥/–æ–±)¬∑rpm / 1000</span> ¬∑ Œ∑–æ–±'—î–º–Ω; P–∫–í—Ç ‚âà <span class="mono">p(–±–∞—Ä)¬∑Q(–ª/—Ö–≤)/600 / Œ∑–º–µ—Ö</span>.</p>
  </div>

  <!-- 3. –®–õ–ê–ù–ì / –®–í–ò–î–ö–Ü–°–¢–¨ -->
  <div class="card">
    <h2>üßµ –®–ª–∞–Ω–≥: —à–≤–∏–¥–∫—ñ—Å—Ç—å –ø–æ—Ç–æ–∫—É —Ç–∞ –ø—ñ–¥–±—ñ—Ä √ò</h2>
    <div class="grid g3">
      <div class="box">
        <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ª—ñ–Ω—ñ—ó</h3>
        <div class="row">
          <div style="flex:1"><label>Q, –ª/—Ö–≤</label><input id="Qline" type="number" step="0.1" value="35"></div>
          <div style="flex:1"><label>√ò –≤–Ω—É—Ç—Ä., –º–º</label><input id="Din" type="number" step="0.5" value="12.7"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–¢–∏–ø –ª—ñ–Ω—ñ—ó</label>
            <select id="lineType"><option value="pressure" selected>–Ω–∞–ø—ñ—Ä–Ω–∞ (2‚Äì5 –º/—Å)</option><option value="return">–∑–ª–∏–≤–Ω–∞ (1‚Äì3 –º/—Å)</option></select>
          </div>
          <div style="flex:1"><label>–î–æ–≤–∂–∏–Ω–∞, –º (–æ–ø—Ü.)</label><input id="Lhose" type="number" step="0.1" value="5"></div>
        </div>
      </div>
      <div class="box">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
        <p>–®–≤–∏–¥–∫—ñ—Å—Ç—å —É —à–ª–∞–Ω–≥—É w: <b><span id="w">‚Äî</span></b> –º/—Å</p>
        <p>–†–µ–∫–æ–º–µ–Ω–¥. √ò (–æ—Ä—ñ—î–Ω—Ç–∏—Ä): <b><span id="DinRec">‚Äî</span></b> –º–º</p>
        <p>–°—Ç–∞—Ç—É—Å: <b><span id="hoseFlag">‚Äî</span></b></p>
      </div>
      <div class="box">
        <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        <div class="row">
          <button class="btn" onclick="calcHose()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="copyCSV('csvHose')">üìã CSV (hose)</button>
        </div>
        <div id="csvHose" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
  </div>

  <!-- 4. –ö–õ–ê–ü–ê–ù / –ù–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø -->
  <div class="card">
    <h2>üõ°Ô∏è –ó–∞–ø–æ–±—ñ–∂–Ω–∏–π –∫–ª–∞–ø–∞–Ω —ñ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</h2>
    <div class="grid g2">
      <div class="box">
        <h3>–¶—ñ–ª—å –ø–æ —Å–∏–ª—ñ/—Ç–∏—Å–∫—É</h3>
        <div class="row">
          <div style="flex:1"><label>–¶—ñ–ª—å–æ–≤–∞ —Å–∏–ª–∞, –∫–ù</label><input id="Ftarget" type="number" step="0.1" value="80"></div>
          <div style="flex:1"><label>–Ø–∫–∞ –ø–ª–æ—â–∞ A, —Å–º¬≤</label><input id="Atarget" type="number" step="0.1" value="50.3"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="calcRelief()">üîÅ –û–±—á–∏—Å–ª–∏—Ç–∏ p, –±–∞—Ä</button>
          <button class="btn" onclick="copyCSV('csvRelief')">üìã CSV (relief)</button>
        </div>
        <div id="csvRelief" class="out" style="margin-top:8px">‚Äî</div>
      </div>
      <div class="box">
        <h3>–ü–æ—Ä–∞–¥–∏</h3>
        <ul class="small">
          <li>–ù–∞–ª–∞—à—Ç–æ–≤—É–π –∫–ª–∞–ø–∞–Ω –Ω–∞ 5‚Äì10% –≤–∏—â–µ —Ä–æ–±–æ—á–æ–≥–æ —Ç–∏—Å–∫—É, –∞–ª–µ <b>–Ω–∏–∂—á–µ</b> –º–µ–∂—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤.</li>
          <li>–ü—Ä–∏ –∑–º—ñ–Ω—ñ √ò —à–ª–∞–Ω–≥—É –ø–µ—Ä–µ–≤—ñ—Ä <b>—à–≤–∏–¥–∫—ñ—Å—Ç—å</b> —ñ <b>–ø–µ—Ä–µ–ø–∞–¥ —Ç–∏—Å–∫—É</b> –Ω–∞ —Ñ—ñ—Ç–∏–Ω–≥–∞—Ö.</li>
          <li>–¢–µ–ø–ª–æ: –∫–æ–∂–µ–Ω –∑–∞–π–≤–∏–π –±–∞—Ä –ø—Ä–∏ 30‚Äì50 –ª/—Ö–≤ –¥–æ–¥–∞—î ~0.5‚Äì1 –∫–í—Ç –≤—Ç—Ä–∞—Ç.</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- 5. –ñ–£–†–ù–ê–õ -->
  <div class="card">
    <h2>üìí –ñ—É—Ä–Ω–∞–ª –≥—ñ–¥—Ä–æ—Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤</h2>
    <div class="row">
      <button class="btn" onclick="addRow()">‚ûï –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫</button>
      <button class="btn" onclick="presetRows()">üß™ –ü—Ä–∏–∫–ª–∞–¥</button>
      <button class="btn" onclick="copyCSV('csvLog')">üìã CSV (journal)</button>
    </div>
    <div style="overflow:auto;margin-top:8px">
      <table class="table" id="tbl">
        <thead>
          <tr>
            <th>#</th>
            <th>–í—É–∑–æ–ª</th>
            <th class="dark">F, –∫–ù</th>
            <th class="dark">v, –º–º/—Å</th>
            <th class="dark">t, —Å</th>
            <th>–ù–∞—Å–æ—Å Q/P/Heat</th>
            <th>–®–ª–∞–Ω–≥ w, –º/—Å (√ò)</th>
            <th>–ö–ª–∞–ø–∞–Ω, –±–∞—Ä</th>
            <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
          </tr>
        </thead>
        <tbody id="body"></tbody>
      </table>
    </div>
    <div id="csvLog" class="out" style="margin-top:8px">‚Äî</div>
  </div>

  <!-- 6. –ö–í–ò–¢–û–ö + NFC -->
  <div class="card">
    <h2>üßæ –ö–≤–∏—Ç–æ–∫ 58 –º–º —Ç–∞ NFC</h2>
    <div class="grid g2">
      <div class="box">
        <h3>NFC ‚Äî ‚ÄúHYDRO CARD‚Äù</h3>
        <div class="row">
          <div style="flex:1"><label>–ú–∞—à–∏–Ω–∞/–≤—É–∑–æ–ª</label><input id="nfcId" type="text" value="TR-001/HYD-A"></div>
          <div style="flex:1"><label>–ö–æ–Ω—Ç–∞–∫—Ç</label><input id="nfcPhone" type="text" value="+380XXXXXXXXX"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="buildNFC()">üß© –ó—ñ–±—Ä–∞—Ç–∏</button>
          <button class="btn" onclick="copyEl('nfcOut')">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
        </div>
        <div id="nfcOut" class="out">‚Äî</div>
      </div>
      <div class="box">
        <h3>–ö–≤–∏—Ç–æ–∫ ‚ÄúHYDRAULIC CHECK‚Äù</h3>
        <div class="row">
          <button class="btn" onclick="buildTicket()">üßæ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="window.print()">üñ®Ô∏è –î—Ä—É–∫</button>
        </div>
        <div class="ticket" id="ticket" style="margin-top:8px">
          <h4>HYDRAULIC CHECK</h4>
          <p id="tDate"><small>–î–∞—Ç–∞: ‚Äî</small></p>
          <div class="line"></div>
          <p><b>–¶–∏–ª—ñ–Ω–¥—Ä F/v/t:</b> <span id="tCyl">‚Äî</span></p>
          <p><b>–ù–∞—Å–æ—Å Q/P/Heat:</b> <span id="tPump">‚Äî</span></p>
          <p><b>–®–ª–∞–Ω–≥ w (√ò):</b> <span id="tHose">‚Äî</span></p>
          <p><b>Relief:</b> <span id="tRelief">‚Äî</span></p>
          <div class="line"></div>
          <p><small id="tNote">–ü—Ä–∏–º.: ‚Äî</small></p>
        </div>
      </div>
    </div>
  </div>

  <!-- 7. –•–Ü–î –†–û–ë–û–¢–ò + –û–¶–Ü–ù–Æ–í–ê–ù–ù–Ø -->
  <div class="card">
    <h2>ü™ú –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ (45‚Äì70 —Ö–≤)</h2>
    <ol>
      <li>–î–ª—è –∑–∞–¥–∞–Ω–æ–≥–æ —Ü–∏–ª—ñ–Ω–¥—Ä–∞ –ø–æ—Ä–∞—Ö—É–π <b>F, v, t</b> –Ω–∞ –æ–±–æ—Ö —Ö–æ–¥–∞—Ö (cap/rod).</li>
      <li>–û—Ü—ñ–Ω–∏ <b>–Ω–∞—Å–æ—Å</b>: Q, P–∫–í—Ç, <b>—Ç–µ–ø–ª–æ–≤—Ç—Ä–∞—Ç–∏</b> –ø—Ä–∏ —Ä–æ–±–æ—á–æ–º—É —Ç–∏—Å–∫—É.</li>
      <li>–ü–µ—Ä–µ–≤—ñ—Ä <b>—à–≤–∏–¥–∫—ñ—Å—Ç—å —É —à–ª–∞–Ω–≥—É</b> —Ç–∞ –ø—ñ–¥–±–µ—Ä–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π √ò.</li>
      <li>–†–æ–∑—Ä–∞—Ö—É–π <b>–Ω–∞—Å—Ç—Ä–æ–π–∫—É –∑–∞–ø–æ–±—ñ–∂–Ω–æ–≥–æ –∫–ª–∞–ø–∞–Ω–∞</b> –ø—ñ–¥ —Ü—ñ–ª—å–æ–≤—É —Å–∏–ª—É.</li>
      <li>–ó–∞–ø–æ–≤–Ω–∏ <b>–∂—É—Ä–Ω–∞–ª</b> (‚â•3 —Ä—è–¥–∫–∏), —Å—Ç–≤–æ—Ä–∏ <b>NFC</b>, <b>–∫–≤–∏—Ç–æ–∫</b> —Ç–∞ <b>CSV</b> (<span class="mono">Hydraulic</span>).</li>
    </ol>
  </div>

  <div class="card">
    <h2>‚úÖ –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è (10 –±–∞–ª—ñ–≤)</h2>
    <table class="table">
      <thead><tr><th>–ö—Ä–∏—Ç–µ—Ä—ñ–π</th><th>–ë–∞–ª–∏</th></tr></thead>
      <tbody>
        <tr><td>–ö–æ—Ä–µ–∫—Ç–Ω—ñ F/v/t –¥–ª—è –∑–∞–¥–∞–Ω–∏—Ö —É–º–æ–≤</td><td>4</td></tr>
        <tr><td>–ù–∞—Å–æ—Å: Q/P/Heat –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω–æ</td><td>3</td></tr>
        <tr><td>–®–ª–∞–Ω–≥: —à–≤–∏–¥–∫—ñ—Å—Ç—å —É –Ω–æ—Ä–º—ñ, –≤–∏–±—ñ—Ä √ò</td><td>2</td></tr>
        <tr><td>–ö–≤–∏—Ç–æ–∫/NFC + CSV</td><td>1</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (Moodle iFrame)
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  const byId = id => document.getElementById(id);
  const rnd = (n,d=2)=>Number((+n).toFixed(d));
  const bodyEl = document.getElementById('body');

  // ===== 1) –¶–∏–ª—ñ–Ω–¥—Ä =====
  function calcCyl(){
    const Dmm = +byId('D').value||0, dmm = +byId('d').value||0;
    const stroke = +byId('stroke').value||0;
    const pbar = +byId('p').value||0;
    const Qlpm = +byId('Q').value||0;
    const side = byId('side').value;

    const D = Dmm/1000, d = dmm/1000; // –º
    const A_cap = Math.PI*Math.pow(D,2)/4;      // –º¬≤
    const A_rod = Math.PI*(Math.pow(D,2)-Math.pow(d,2))/4; // –º¬≤
    const A = (side==='cap')? A_cap : A_rod;
    const p = pbar*1e5; // –ü–∞
    const F = p*A; // –ù
    const Q = Qlpm/60000; // –º¬≥/—Å
    const v = (A>0)? Q/A : 0; // –º/—Å
    const t = (v>0)? (stroke/1000)/v : 0; // —Å

    byId('A').textContent = rnd(A*1e4,2); // —Å–º¬≤
    byId('F').textContent = rnd(F/1000,1); // –∫–ù
    byId('v').textContent = rnd(v*1000,1); // –º–º/—Å
    byId('t').textContent = rnd(t,1);

    const csv = `CYL|D=${Dmm}mm|d=${dmm}mm|stroke=${stroke}mm|p=${pbar}bar|Q=${Qlpm}lpm|side=${side}|A=${rnd(A*1e4,2)}cm2|F=${rnd(F/1000,1)}kN|v=${rnd(v*1000,1)}mms|t=${rnd(t,1)}s`;
    byId('csvCyl').textContent = csv;

    return {A_cap,A_rod,A,F,v,t,side,stroke,pbar,Qlpm};
  }
  function presetCyl(){
    byId('D').value=90; byId('d').value=50; byId('stroke').value=600; byId('p').value=190; byId('Q').value=42; byId('side').value='cap';
    calcCyl();
  }

  // ===== 2) –ù–∞—Å–æ—Å =====
  function calcPump(){
    const disp = +byId('disp').value||0; // —Å–º3/–æ–±
    const rpm = +byId('rpm').value||0;
    const pbar = +byId('ppump').value||0;
    const eta = (+byId('eta').value||85)/100;

    const Qtheor = disp*rpm/1000; // –ª/—Ö–≤
    const Q = Qtheor*eta; // –∑ —É—Ä–∞—Ö. –æ–±'—î–º–Ω–æ—ó
    const Pshaft = (pbar*Q)/600 / Math.max(eta,0.01); // –∫–í—Ç, –≤—Ä–∞—Ö. –º–µ—Ö. –∫–∫–¥
    const Pideal = (pbar*Q)/600; // –∫–í—Ç
    const Heat = Math.max(0, Pshaft - Pideal); // –≤—Ç—Ä–∞—Ç–∏ ~ —Ç–µ–ø–ª–æ

    byId('Qpump').textContent = rnd(Q,1);
    byId('PkW').textContent = rnd(Pshaft,2);
    byId('Heat').textContent = rnd(Heat,2);

    const csv = `PUMP|disp=${disp}cc/rev|rpm=${rpm}|p=${pbar}bar|eta=${(eta*100).toFixed(0)}%|Q=${rnd(Q,1)}lpm|Pshaft=${rnd(Pshaft,2)}kW|Heat‚âà${rnd(Heat,2)}kW`;
    byId('csvPump').textContent = csv;

    return {Q,Pshaft,Heat,pbar};
  }

  // ===== 3) –®–ª–∞–Ω–≥ =====
  function calcHose(){
    const Qlpm = +byId('Qline').value||0;
    const Dinmm = +byId('Din').value||0;
    const type = byId('lineType').value;

    const Q = Qlpm/60000; // –º¬≥/—Å
    const Dm = Dinmm/1000; // –º
    const A = Math.PI*Math.pow(Dm,2)/4;
    const w = (A>0)? Q/A : 0; // –º/—Å

    const range = (type==='pressure')? [2,5] : [1,3];
    let flag='üü¢ –æ–∫', color='#10b981';
    if(w>range[1]){ flag='üî¥ –∑–∞–Ω–∞–¥—Ç–æ —à–≤–∏–¥–∫–æ (–∑–±—ñ–ª—å—à–∏—Ç–∏ √ò)'; color='#ef4444'; }
    else if(w<range[0]){ flag='üü† –ø–æ–≤—ñ–ª—å–Ω–æ (–º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏ √ò)'; color='#f59e0b'; }

    // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è √ò: —Ä–æ–∑–≤'—è–∑–æ–∫ D = sqrt(4Q/(œÄ¬∑w—Ü—ñ–ª—å)). –í–∏–±–µ—Ä–µ–º–æ —Å–µ—Ä–µ–¥–∏–Ω—É –¥—ñ–∞–ø–∞–∑–æ–Ω—É.
    const wTarget = (range[0]+range[1])/2;
    const DinRec = Math.sqrt(4*Q/(Math.PI*wTarget))*1000; // –º–º

    byId('w').textContent = rnd(w,2);
    byId('DinRec').textContent = rnd(DinRec,1);
    byId('hoseFlag').textContent = flag; byId('hoseFlag').style.color = color;

    const csv = `HOSE|Q=${Qlpm}lpm|Din=${Dinmm}mm|type=${type}|w=${rnd(w,2)}mps|DinRec‚âà${rnd(DinRec,1)}mm|flag=${flag}`;
    byId('csvHose').textContent = csv;

    return {w,DinRec,flag};
  }

  // ===== 4) –ö–ª–∞–ø–∞–Ω =====
  function calcRelief(){
    const FkN = +byId('Ftarget').value||0;
    const Acm2 = +byId('Atarget').value||0;
    // p(–±–∞—Ä) = F(N)/A(m2) / 1e5; –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è: 1 —Å–º¬≤ = 1e-4 –º¬≤; 1 –∫–ù = 1000 –ù
    const pbar = (FkN*1000) / (Acm2*1e-4) / 1e5;
    const tip = `–†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ ~${rnd(pbar*1.05,0)} –±–∞—Ä (‚âà+5%).`;
    const txt = `RELIEF|F=${rnd(FkN,1)}kN|A=${rnd(Acm2,2)}cm2|p‚âà${rnd(pbar,0)}bar|tip=${tip}`;
    byId('csvRelief').textContent = txt;
    return {pbar, tip};
  }

  // ===== 5) –ñ—É—Ä–Ω–∞–ª =====
  function addRow(sample){
    const cyl = calcCyl(); const pump = calcPump(); const hose = calcHose(); const rv = calcRelief();
    const def = {
      node:'–ü—ñ–¥–π–æ–º –ø—Ä–∏—á–µ–ø–∞',
      F:rnd(cyl.F/1000,1), v:rnd(cyl.v*1000,1), t:rnd(cyl.t,1),
      pump:`${rnd(pump.Q,1)}–ª/—Ö–≤ / ${rnd(pump.Pshaft,2)}–∫–í—Ç / ${rnd(pump.Heat,2)}–∫–í—Ç`,
      hose:`${rnd(hose.w,2)} (${rnd(byId('Din').value,1)}–º–º)`,
      relief:`${rnd(rv.pbar,0)}`,
      note:'–æ–∫'
    };
    const s = Object.assign({}, def, sample||{});
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="idx">1</td>
      <td><input type="text" value="${s.node}"></td>
      <td class="dark">${s.F}</td>
      <td class="dark">${s.v}</td>
      <td class="dark">${s.t}</td>
      <td>${s.pump}</td>
      <td>${s.hose}</td>
      <td>${s.relief}</td>
      <td><input type="text" value="${s.note}"></td>
    `;
    bodyEl.appendChild(tr); reindex(); buildCSVlog();
  }
  function reindex(){ [...bodyEl.querySelectorAll('tr')].forEach((tr,i)=>tr.querySelector('.idx').textContent=i+1); }
  function presetRows(){
    bodyEl.innerHTML='';
    const rv = calcRelief(); const hose = calcHose(); const pump = calcPump(); const cyl = calcCyl();
    addRow({node:'–ö–æ–≤—à –Ω–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—á–∞', F:rnd(95.0,1), v:rnd(70.0,1), t:rnd(8.6,1), pump:`${rnd(pump.Q,1)}–ª/—Ö–≤ / ${rnd(pump.Pshaft,2)}–∫–í—Ç / ${rnd(pump.Heat,2)}–∫–í—Ç`, hose:`${rnd(hose.w,2)} (${rnd(byId('Din').value,1)}–º–º)`, relief:`${rnd(rv.pbar,0)}`, note:'–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —à–ª–∞–Ω–≥–∏'});
    addRow({node:'–ö–µ—Ä–º–æ–≤–∞ –≥—ñ–¥—Ä–æ—Å–∏—Å—Ç–µ–º–∞', F:rnd(18.0,1), v:rnd(120.0,1), t:rnd(2.1,1), pump:`${rnd(pump.Q/2,1)}–ª/—Ö–≤ / ${rnd(pump.Pshaft/2,2)}–∫–í—Ç / ${rnd(pump.Heat/2,2)}–∫–í—Ç`, hose:`${rnd(hose.w/2,2)} (${rnd(byId('Din').value,1)}–º–º)`, relief:`${rnd(rv.pbar*0.6,0)}`, note:'–æ–∫'});
    addRow({node:'–ì—ñ–¥—Ä–æ–≤–∏–≤—ñ–¥ (–æ—Ä—É–¥–∞)', F:rnd(60.0,1), v:rnd(55.0,1), t:rnd(10.5,1), pump:`${rnd(pump.Q,1)}–ª/—Ö–≤ / ${rnd(pump.Pshaft,2)}–∫–í—Ç / ${rnd(pump.Heat,2)}–∫–í—Ç`, hose:`${rnd(hose.w,2)} (${rnd(byId('Din').value,1)}–º–º)`, relief:`${rnd(rv.pbar,0)}`, note:'–¥–æ–≤–≥–∏–π —à–ª–∞–Ω–≥'});
    buildCSVlog();
  }
  function buildCSVlog(){
    const lines = [...bodyEl.querySelectorAll('tr')].map(tr=>{
      const idx=tr.querySelector('.idx').textContent.trim();
      const node=tr.children[1].querySelector('input').value.trim();
      const F  =tr.children[2].textContent.trim();
      const v  =tr.children[3].textContent.trim();
      const t  =tr.children[4].textContent.trim();
      const pump=tr.children[5].textContent.trim();
      const hose=tr.children[6].textContent.trim();
      const rel= tr.children[7].textContent.trim();
      const note=tr.children[8].querySelector('input').value.trim();
      return [idx,node,F,v,t,pump,hose,rel,note].join(' | ');
    });
    byId('csvLog').textContent = lines.join('\n') || '‚Äî';
  }

  // ===== 6) –ö–≤–∏—Ç–æ–∫ / NFC =====
  function buildTicket(){
    const cyl = calcCyl(); const pump = calcPump(); const hose = calcHose(); const rv = calcRelief();
    const d = new Date().toISOString().slice(0,10);
    byId('tDate').innerHTML = `<small>–î–∞—Ç–∞: ${d}</small>`;
    byId('tCyl').textContent   = `${rnd(cyl.F/1000,1)}–∫–ù / ${rnd(cyl.v*1000,1)}–º–º/—Å / ${rnd(cyl.t,1)}—Å`;
    byId('tPump').textContent  = `${rnd(pump.Q,1)}–ª/—Ö–≤ / ${rnd(pump.Pshaft,2)}–∫–í—Ç / Heat ${rnd(pump.Heat,2)}–∫–í—Ç`;
    byId('tHose').textContent  = `${rnd(hose.w,2)} –º/—Å (${byId('Din').value}–º–º ‚Üí —Ä–µ–∫. ${rnd(hose.DinRec,1)}–º–º)`;
    byId('tRelief').textContent= `${rnd(rv.pbar,0)} –±–∞—Ä`;
    byId('tNote').textContent  = `p=${byId('p').value} –±–∞—Ä; Q=${byId('Q').value} –ª/—Ö–≤; —Ç–∏–ø –ª—ñ–Ω—ñ—ó: ${byId('lineType').value}`;
  }
  function buildNFC(){
    const cyl = calcCyl(); const pump = calcPump(); const hose = calcHose(); const rv = calcRelief();
    const text = [
      `HYDRO_NFC`,
      `ID:${byId('nfcId').value}`,
      `CYL:F=${rnd(cyl.F/1000,1)}kN; v=${rnd(cyl.v*1000,1)}mm/s; t=${rnd(cyl.t,1)}s`,
      `PUMP:Q=${rnd(pump.Q,1)}lpm; P=${rnd(pump.Pshaft,2)}kW; Heat=${rnd(pump.Heat,2)}kW`,
      `HOSE:w=${rnd(hose.w,2)}m/s; Din=${byId('Din').value}mm; Rec‚âà${rnd(hose.DinRec,1)}mm`,
      `RELIEF:${rnd(rv.pbar,0)}bar`,
      `CONTACT:${byId('nfcPhone').value}`,
      `STAMP:${new Date().toISOString().slice(0,19).replace('T',' ')}`
    ].join('\n');
    byId('nfcOut').textContent = text;
  }

  // ===== –£—Ç–∏–ª—ñ—Ç–∏ =====
  function copyCSV(id){
    const t = document.getElementById(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ CSV —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function copyEl(id){
    const t = byId(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function flash(msg){ const o=document.title; document.title=msg; setTimeout(()=>document.title=o,900); }

  // ===== –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è =====
  (function init(){
    calcCyl(); calcPump(); calcHose(); calcRelief();
    document.addEventListener('change', e=>{
      if(e.target.matches('input,select')) { calcCyl(); calcPump(); calcHose(); calcRelief(); }
    });
  })();
</script>
</body>
</html>
