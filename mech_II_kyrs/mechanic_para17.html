<!DOCTYPE html><html lang="uk"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ü–∞—Ä–∞ 17 (–º–µ—Ö–∞–Ω—ñ–∫–∏) ‚Äî Arduino: —Ç–µ–Ω–∑–æ–¥–∞—Ç—á–∏–∫ –Ω–∞—Ç—è–≥—É —Ä–µ–º–µ–Ω—è (HX711) + SLIP% —Ç—Ä–∏–≥–µ—Ä–∏</title>
<meta name="description" content="–¢–µ–Ω–∑–æ–º—ñ—Å—Ç + HX711: –∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è 2-—Ç–æ—á–∫–∏, –≤–∏–º—ñ—Ä –Ω–∞—Ç—è–≥—É (–ù/–∫–≥—Å), EMA-—Ñ—ñ–ª—å—Ç—Ä, –∂–∏–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫, –∞–ª–µ—Ä—Ç–∏ –∑–∞ –Ω–∞—Ç—è–≥–æ–º —ñ SLIP%, –µ–∫—Å–ø–æ—Ä—Ç CSV/TXT/–∫–≤–∏—Ç–æ–∫ 58 –º–º, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—à–∏–≤–∫–∏ (.ino).">
<meta name="color-scheme" content="light dark">
<style>
:root{--bg:#0b1220;--panel:#0f172a;--muted:#94a3b8;--text:#e6eef9;--line:#223049;--brand:#38bdf8;--ok:#22c55e;--warn:#fbbf24;--bad:#f87171}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,sans-serif}
.wrap{max-width:1120px;margin:0 auto;padding:16px}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.logo{display:flex;align-items:center;gap:10px}
.logo .emoji{font-size:28px}
.logo .badge{font-size:.9rem;color:var(--muted);border:1px solid var(--line);padding:2px 8px;border-radius:999px}
h1{margin:.2em 0 .3em 0}
.muted{color:var(--muted)}
.card{border:1px solid var(--line);border-radius:16px;background:var(--panel);padding:14px;margin-top:14px}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.input,select,textarea{width:100%;padding:8px;border-radius:10px;border:1px solid var(--line);background:#0b1220;color:var(--text)}
.btn{border:1px solid var(--line);background:#0f1f39;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
.btn.secondary{background:transparent}
.btn.good{border-color:#204b2a;background:#12341b}
.badge{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;color:var(--muted);margin-right:6px}
pre.code{background:#0b1220;border:1px solid var(--line);border-radius:12px;padding:12px;overflow:auto;white-space:pre-wrap}
.canvasWrap{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0b1220}
canvas{display:block;width:100%;height:260px}
.tbl{width:100%;border-collapse:collapse;font-size:.95rem}
.tbl th,.tbl td{border:1px solid var(--line);padding:6px;text-align:left;vertical-align:top}
.tbl th{background:#0b1a2f}
.small{font-size:.9rem}
.note{border:1px dashed var(--line);border-radius:12px;padding:10px;background:#0c182a}
.tag{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;color:var(--muted);margin-right:6px;margin-top:6px}
.footer{margin-top:20px;color:var(--muted);font-size:.9rem}
.ok{color:var(--ok)}.warn{color:var(--warn)}.bad{color:var(--bad)}
.receipt{background:#0b1220;border:1px dashed #334155;border-radius:12px;padding:10px;font-family:ui-monospace,monospace}
kbd{background:#111827;border:1px solid #334155;border-radius:6px;padding:2px 6px}
</style>
<link rel="canonical" href="https://edlab.pp.ua/mech_II_kyrs/mechanic_para17.html"><meta property="og:type" content="article"><meta property="og:title" content="–ú–µ—Ö–∞–Ω—ñ–∑–∞—Ü—ñ—è ‚Äî –ü–∞—Ä–∞ 17"><meta property="og:description" content="–ú–µ—Ç–∞: –∑—ñ–±—Ä–∞—Ç–∏ –≤–∏–º—ñ—Ä—é–≤–∞—á –Ω–∞—Ç—è–≥—É —Ä–µ–º–µ–Ω—è –Ω–∞ —Ç–µ–Ω–∑–æ–º–æ—Å—Ç—ñ + HX711, –≤—ñ–¥–∫–∞–ª—ñ–±—Ä—É–≤–∞—Ç–∏ ¬´–Ω—É–ª—å¬ª —Ç–∞ ¬´–µ—Ç–∞–ª–æ–Ω¬ª, –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Ç—è–≥ —É –ù (–∞–±–æ –∫–≥—Å), –≤—ñ–∑—É–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∂–∏–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫, –≤"><meta property="og:url" content="https://edlab.pp.ua/mech_II_kyrs/mechanic_para17.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"LearningResource","name":"–ú–µ—Ö–∞–Ω—ñ–∑–∞—Ü—ñ—è ‚Äî –ü–∞—Ä–∞ 17","description":"–ú–µ—Ç–∞: –∑—ñ–±—Ä–∞—Ç–∏ –≤–∏–º—ñ—Ä—é–≤–∞—á –Ω–∞—Ç—è–≥—É —Ä–µ–º–µ–Ω—è –Ω–∞ —Ç–µ–Ω–∑–æ–º–æ—Å—Ç—ñ + HX711, –≤—ñ–¥–∫–∞–ª—ñ–±—Ä—É–≤–∞—Ç–∏ ¬´–Ω—É–ª—å¬ª —Ç–∞ ¬´–µ—Ç–∞–ª–æ–Ω¬ª, –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Ç—è–≥ —É –ù (–∞–±–æ –∫–≥—Å), –≤—ñ–∑—É–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∂–∏–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫, –≤","inLanguage":"uk","educationalLevel":"college","url":"https://edlab.pp.ua/mech_II_kyrs/mechanic_para17.html","provider":{"@type":"Organization","name":"EDLab"}}</script></head>
<body>
<div class="wrap">
  <header>
    <div class="logo">
      <span class="emoji">üß∞</span>
      <div>
        <b>–ü–∞—Ä–∞ 17 ‚Äî Arduino: —Ç–µ–Ω–∑–æ–Ω–∞—Ç—è–≥ —Ä–µ–º–µ–Ω—è (HX711)</b><br>
        <span class="badge">–∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è ‚Üí –ù/–∫–≥—Å ‚Üí EMA ‚Üí –≥—Ä–∞—Ñ—ñ–∫ ‚Üí —Ç—Ä–∏–≥–µ—Ä–∏ (–Ω–∞—Ç—è–≥/SLIP%) ‚Üí –µ–∫—Å–ø–æ—Ä—Ç</span>
      </div>
    </div>
    <a class="btn" href="../index.html" target="_blank" rel="noopener">üè† –ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
  </header>

  <p class="muted">
    –ú–µ—Ç–∞: –∑—ñ–±—Ä–∞—Ç–∏ –≤–∏–º—ñ—Ä—é–≤–∞—á <b>–Ω–∞—Ç—è–≥—É —Ä–µ–º–µ–Ω—è</b> –Ω–∞ <b>—Ç–µ–Ω–∑–æ–º–æ—Å—Ç—ñ + HX711</b>, –≤—ñ–¥–∫–∞–ª—ñ–±—Ä—É–≤–∞—Ç–∏ ¬´–Ω—É–ª—å¬ª —Ç–∞ ¬´–µ—Ç–∞–ª–æ–Ω¬ª, –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞—Ç—è–≥ —É <b>–ù</b> (–∞–±–æ <b>–∫–≥—Å</b>), 
    –≤—ñ–∑—É–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∂–∏–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫, –≤–∏—è–≤–ª—è—Ç–∏ <b>–ø–µ—Ä–µ–Ω–∞—Ç—è–≥/–Ω–µ–¥–æ—Ç—è–≥</b> —ñ –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ –¥–æ <b>SLIP%</b> –∑ –ü–∞—Ä–∞-16 –¥–ª—è —Ä–æ–±–æ—á–æ–≥–æ —Ç—Ä–∏–≥–µ—Ä–∞.
  </p>

  <div class="card">
    <h2>üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è</h2>
    <div class="row">
      <div style="flex:1">
        <label>–ü—ñ–Ω–∏ HX711</label>
        <div class="row">
          <label>DT <input id="dt" class="input" type="number" min="2" max="13" value="3"></label>
          <label>SCK <input id="sck" class="input" type="number" min="2" max="13" value="2"></label>
          <label>–ö–∞–Ω–∞–ª <select id="chan" class="input"><option value="128" selected="">A (gain128)</option><option value="64">A (gain64)</option><option value="32">B (gain32)</option></select></label>
        </div>
      </div>
      <div style="flex:1">
        <label>–û–¥–∏–Ω–∏—Ü—ñ</label>
        <select id="units" class="input"><option value="N" selected="">–ù (–ù—å—é—Ç–æ–Ω–∏)</option><option value="kgf">–∫–≥—Å</option></select>
      </div>
      <div style="flex:1">
        <label>EMA –∑–≥–ª–∞–¥–∂—É–≤–∞–Ω–Ω—è Œ± (0..1)</label>
        <input id="alpha" class="input" type="number" min="0" max="1" step="0.05" value="0.25">
      </div>
      <div style="flex:1">
        <label>–ü–µ—Ä—ñ–æ–¥ –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è, –º—Å</label>
        <input id="period" class="input" type="number" min="50" step="10" value="100">
      </div>
    </div>

    <div class="row">
      <div style="flex:1">
        <label>–ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è</label>
        <div class="row">
          <button class="btn" id="calZero">‚öñÔ∏è –ó–∞–ø–∏—Å–∞—Ç–∏ ¬´–Ω—É–ª—å¬ª</button>
          <input id="calMass" class="input" type="number" step="0.1" value="10" title="–ú–∞—Å–∞ –µ—Ç–∞–ª–æ–Ω—É –≤ –∫–≥">
          <button class="btn secondary" id="calRef">üèãÔ∏è –ó–∞–ø–∏—Å–∞—Ç–∏ ¬´–µ—Ç–∞–ª–æ–Ω¬ª</button>
        </div>
        <small class="muted">–ê–ª–≥–æ—Ä–∏—Ç–º: <span class="mono">scale = (Fref)/(rawRef - rawZero)</span>, –¥–µ <span class="mono">Fref = m*g</span> (–¥–ª—è –∫–≥—Å ‚Äî <span class="mono">Fref = m</span>).</small>
      </div>
      <div style="flex:1">
        <label>–î—ñ–∞–ø–∞–∑–æ–Ω —Ä–æ–±–æ—á–æ–≥–æ –Ω–∞—Ç—è–≥—É, –ù</label>
        <div class="row">
          <label>Min <input id="tmin" class="input" type="number" step="1" value="120"></label>
          <label>Max <input id="tmax" class="input" type="number" step="1" value="250"></label>
        </div>
      </div>
      <div style="flex:1">
        <label>SLIP% –∑ –ü–∞—Ä–∞-16 (–Ω–µ–æ–±–æ–≤.)</label>
        <div class="row">
          <input id="slip" class="input" type="number" step="0.1" value="0" title="–í—Å—Ç–∞–≤ —Ç—É—Ç –º–∏—Ç—Ç—î–≤–µ SLIP% —ñ–∑ —Ç–∞—Ö–æ–º–µ—Ç—Ä–∞">
          <label>–ü–æ—Ä—ñ–≥ SLIP% <input id="slipThr" class="input" type="number" step="0.5" value="3.0"></label>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>üß™ –ï–º—É–ª—è—Ç–æ—Ä (–±–µ–∑ ¬´–∑–∞–ª—ñ–∑–∞¬ª)</h2>
    <div class="row">
      <label><input id="emu" type="checkbox"> –£–≤—ñ–º–∫–Ω—É—Ç–∏ –µ–º—É–ª—è—Ç–æ—Ä</label>
      <label style="flex:1">–ù–∞—Ç—è–≥ (–ù) <input id="emuF" class="input" type="range" min="50" max="400" step="1" value="180" disabled=""></label>
      <button class="btn" id="tick">‚ûï –î–æ–¥–∞—Ç–∏ —Ç–æ—á–∫—É</button>
      <button class="btn secondary" id="clear">üßπ –û—á–∏—Å—Ç–∏—Ç–∏</button>
      <span id="badge" class="badge">–ö–∞–ª—ñ–±—Ä–æ–≤–∞–Ω–æ: –Ω—ñ</span>
    </div>
  </div>

  <div class="card">
    <h2>üìà –ñ–∏–≤–∏–π –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞—Ç—è–≥—É</h2>
    <div class="canvasWrap"><canvas id="chart" width="1000" height="260"></canvas></div>
    <div class="row small" style="margin-top:8px">
      <span id="last" class="badge">F=‚Äî, F(EMA)=‚Äî, SLIP=‚Äî%</span>
      <span id="status" class="badge">–°—Ç–∞—Ç—É—Å: ‚Äî</span>
    </div>
  </div>

  <div class="card">
    <h2>üß© –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥ (Arduino .ino)</h2>
    <div class="row">
      <button class="btn good" id="gen">‚öôÔ∏è –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ—à–∏–≤–∫—É</button>
      <button class="btn secondary" id="copy">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
      <button class="btn secondary" id="dl">‚¨áÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ .ino</button>
    </div>
    <pre class="code" id="code">// –ù–∞—Ç–∏—Å–Ω–∏ ¬´–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–æ—à–∏–≤–∫—É¬ª ‚Üë</pre>
  </div>

  <div class="card">
    <h2>üíæ –ü—Ä–æ—Ç–æ–∫–æ–ª —ñ –µ–∫—Å–ø–æ—Ä—Ç</h2>
    <div class="row">
      <input id="fio" class="input" placeholder="–ü–Ü–ë –º–µ—Ö–∞–Ω—ñ–∫–∞">
      <input id="job" class="input" placeholder="–†–æ–±–æ—Ç–∞ (—Ä–µ–º—ñ–Ω–Ω–∏–π –ø—Ä–∏–≤—ñ–¥ –∂–∞—Ç–∫–∏, —Å–µ–∫—Ü—ñ—è –•)">
      <button class="btn" id="saveTxt">üíæ TXT</button>
      <button class="btn" id="saveCsv">üìÑ CSV</button>
      <button class="btn" id="receipt">üñ®Ô∏è 58 –º–º —á–µ–∫</button>
    </div>
    <div id="rc" class="receipt" hidden=""></div>
  </div>

  <div class="card">
    <h2>üîå –°—Ö–µ–º–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (SVG)</h2>
    <svg viewBox="0 0 900 360" role="img" aria-label="Arduino + HX711 + —Ç–µ–Ω–∑–æ–º—ñ—Å—Ç">
      <!-- Arduino -->
      <rect x="40" y="40" width="220" height="140" rx="12" fill="#0e2a47" stroke="#3b82f6"></rect>
      <text x="150" y="65" fill="#e5e7eb" font-size="16" text-anchor="middle">Arduino UNO/Nano</text>
      <text x="55" y="95" fill="#93c5fd" font-size="12">5V</text>
      <text x="55" y="115" fill="#93c5fd" font-size="12">GND</text>
      <text x="55" y="135" fill="#93c5fd" font-size="12">D2‚Ä¶D13</text>
      <!-- HX711 -->
      <rect x="320" y="40" width="220" height="140" rx="12" fill="#14532d" stroke="#22c55e"></rect>
      <text x="430" y="65" fill="#dcfce7" font-size="16" text-anchor="middle">HX711</text>
      <text x="430" y="85" fill="#a7f3d0" font-size="12" text-anchor="middle">VCC ‚Äî GND ‚Äî DT ‚Äî SCK</text>
      <text x="430" y="105" fill="#a7f3d0" font-size="12" text-anchor="middle">A+ A- B+ B- (—Ç–µ–Ω–∑–æ–º—ñ—Å—Ç)</text>
      <!-- Load cell -->
      <rect x="600" y="40" width="240" height="140" rx="12" fill="#7c2d12" stroke="#fb923c"></rect>
      <text x="720" y="65" fill="#fed7aa" font-size="16" text-anchor="middle">–¢–µ–Ω–∑–æ–¥–∞—Ç—á–∏–∫ (–º—ñ—Å—Ç)</text>
      <text x="720" y="85" fill="#fed7aa" font-size="12" text-anchor="middle">4 –¥—Ä–æ—Ç–∏: EXC+/EXC- SIG+/SIG-</text>

      <!-- –ü—Ä–æ–≤–æ–¥–∏ -->
      <line x1="260" y1="90" x2="320" y2="80" stroke="#93c5fd" stroke-width="3"></line><text x="280" y="80" fill="#93c5fd" font-size="12">5V ‚Üí VCC</text>
      <line x1="260" y1="110" x2="320" y2="100" stroke="#64748b" stroke-width="3"></line><text x="280" y="110" fill="#94a3b8" font-size="12">GND ‚Üí GND</text>
      <line x1="260" y1="130" x2="320" y2="120" stroke="#22c55e" stroke-width="3"></line><text x="280" y="125" fill="#86efac" font-size="12">D3 ‚Üí DT</text>
      <line x1="260" y1="150" x2="320" y2="140" stroke="#38bdf8" stroke-width="3"></line><text x="280" y="150" fill="#93c5fd" font-size="12">D2 ‚Üí SCK</text>

      <line x1="540" y1="90" x2="600" y2="80" stroke="#fde68a" stroke-width="3"></line><text x="560" y="78" fill="#fde68a" font-size="12">A+ ‚Üî SIG+</text>
      <line x1="540" y1="110" x2="600" y2="100" stroke="#fde68a" stroke-width="3"></line><text x="560" y="98" fill="#fde68a" font-size="12">A- ‚Üî SIG-</text>
      <line x1="540" y1="130" x2="600" y2="120" stroke="#fde68a" stroke-width="3"></line><text x="560" y="118" fill="#fde68a" font-size="12">E+ ‚Üî EXC+</text>
      <line x1="540" y1="150" x2="600" y2="140" stroke="#fde68a" stroke-width="3"></line><text x="560" y="138" fill="#fde68a" font-size="12">E- ‚Üî EXC-</text>

      <text x="150" y="210" fill="#fbbf24" font-size="12">‚ö†Ô∏è –§—ñ–∫—Å—É–π –¥–∞—Ç—á–∏–∫ —ñ –ø—Ä–µ—Å-—Ä–æ–ª–∏–∫! –ù–µ —Ç–æ—Ä–∫–∞–π—Å—è –æ–±–µ—Ä—Ç–æ–≤–∏—Ö –≤—É–∑–ª—ñ–≤.</text>
    </svg>
    <div class="note small" style="margin-top:8px">
      <b>–ü–æ—Ä–∞–¥–∏:</b> –¥–ª—è —Ä–µ–º–µ–Ω—ñ–≤ –ø—Ä–æ—Ñ—ñ–ª—é A/B —Ç–∏–ø–æ–≤–∏–π –Ω–∞—Ç—è–≥ —É —Ä–æ–±–æ—Ç—ñ 120‚Äì250 –ù –Ω–∞ –≥—ñ–ª—Ü—ñ; —Ç–æ—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è ‚Äî –∑ –º–∞–Ω—É–∞–ª—É –≤–∏—Ä–æ–±–Ω–∏–∫–∞. –ü—ñ—Å–ª—è –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –Ω–∞—Ç—è–≥—É –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä <i>SLIP%</i> —ñ–∑ –ü–∞—Ä–∞-16.
    </div>
  </div>

  <div class="card">
    <h2>üìã –ü—ñ–¥—Å—É–º–æ–∫ –¥–ª—è –∑–≤—ñ—Ç—É</h2>
    <ul>
      <li>–°–∫—Ä—ñ–Ω –≥—Ä–∞—Ñ—ñ–∫–∞ –Ω–∞—Ç—è–≥—É –∑ –ø–æ–∑–Ω–∞—á–µ–Ω–∏–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏.</li>
      <li>CSV-–ª–æ–≥ 2‚Äì3 —Ö–≤; TXT-–ø—ñ–¥—Å—É–º–æ–∫ —ñ —á–µ–∫ 58 –º–º.</li>
      <li>–ö–æ—Ä–æ—Ç–∫–æ: —è–∫ –∑–º—ñ–Ω–∏–≤—Å—è SLIP% –ø—ñ—Å–ª—è –∫–æ—Ä–µ–∫—Ü—ñ—ó –Ω–∞—Ç—è–≥—É; —á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è —à–∫—ñ–≤—ñ–≤.</li>
    </ul>
  </div>

  <div class="card">
    <h2>üìú –Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ –Ω–æ—Ç–∞—Ç–∫–∞</h2>
    <p class="muted small">–í—ñ–¥ ¬´–≥—É—Å–∞–∫–æ–≤–∏—Ö –≤–∞–≥¬ª —ñ –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä—ñ–≤ –º–∞–π—Å—Ç–µ—Ä–µ–Ω—å –º–∏ –ø–µ—Ä–µ–π—à–ª–∏ –¥–æ —Ç–µ–Ω–∑–æ–º–æ—Å—Ç—ñ–≤: —Ç–µ–ø–µ—Ä –Ω–∞—Ç—è–≥ –æ—Ü—ñ–Ω—é—î—Ç—å—Å—è —É –Ω—å–æ—Ç–æ–Ω–∞—Ö —ñ–∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é —à—É–º—ñ–≤ —ñ –∂—É—Ä–Ω–∞–ª–æ–º –ø–æ–¥—ñ–π ‚Äî —è–∫ –Ω–∞ —Å—É—á–∞—Å–Ω–∏—Ö –ª—ñ–Ω—ñ—è—Ö.</p>
  </div>

  <div class="footer">
    –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: <time datetime="2025-10-18">18.10.2025</time>. –ê–≤—Ç–æ—Ä: –°–µ—Ä–≥—ñ–π –ü–æ–ª—ñ—â—É–∫.
  </div>
</div>

<script>
// ===== –£—Ç–∏–ª—ñ—Ç–∏ =====
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
function download(name,text,type="text/plain"){const b=new Blob([text],{type:type+";charset=utf-8"});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=name;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(u);}
function stamp(){return new Date().toISOString().replace(/[:T]/g,'-').slice(0,16);}

// ===== –°—Ç–∞–Ω =====
let rawZero=null, rawRef=null, scale=1, ema=null;
const g=$('#chart'), ctx=g.getContext('2d');
const series=[]; // {t, F, Fema, slip, alarm}
let unit='N';

$('#units').addEventListener('change',()=>{ unit=$('#units').value; draw(); });

// –ï–º—É–ª—è—Ç–æ—Ä
const emu=$('#emu'), emuF=$('#emuF');
emu.addEventListener('change',()=>{ emuF.disabled=!emu.checked; });

// –û–±—á–∏—Å–ª–µ–Ω–Ω—è
function toForce(raw){
  if(rawZero==null || rawRef==null) return NaN;
  const units=$('#units').value;
  const mkg=parseFloat($('#calMass').value)||10;
  const g0=9.80665;
  const Fref = (units==='N')? (mkg*g0) : (mkg); // –∫–≥—Å ‚Äî —É–º–æ–≤–Ω–∞ –æ–¥–∏–Ω–∏—Ü—è
  const sc = (rawRef - rawZero)!==0 ? (Fref/(rawRef - rawZero)) : 1;
  scale=sc;
  const val = (raw - rawZero)*sc;
  return val;
}

function addPointFromValue(F){
  const alpha=parseFloat($('#alpha').value)||0.25;
  if(isNaN(F)) return;
  if(ema==null) ema=F;
  ema = alpha*F + (1-alpha)*ema;

  const slip=parseFloat($('#slip').value)||0;
  const tmin=parseFloat($('#tmin').value)||0;
  const tmax=parseFloat($('#tmax').value)||1e9;
  const slipThr=parseFloat($('#slipThr').value)||3;

  // –ª–æ–≥—ñ–∫–∞ —Ç—Ä–∏–≥–µ—Ä—ñ–≤
  let alarm=false, status='ok';
  if(F<tmin){ alarm=true; status='–Ω–µ–¥–æ—Ç—è–≥'; }
  if(F>tmax){ alarm=true; status='–ø–µ—Ä–µ–Ω–∞—Ç—è–≥'; }
  if(slip>=slipThr){ alarm=true; status = (F<tmin)? '–Ω–µ–¥–æ—Ç—è–≥ + SLIP' : 'SLIP'; }

  series.push({t:Date.now(), F, Fema:ema, slip, alarm, status});
  if(series.length>360) series.shift();
  $('#last').textContent = `F=${F.toFixed(1)} ${unit}, F(EMA)=${ema.toFixed(1)} ${unit}, SLIP=${slip.toFixed(1)}%`;
  $('#status').textContent = '–°—Ç–∞—Ç—É—Å: ' + (alarm? '‚ö†Ô∏è '+status : '–æ–∫');
  draw();
}

function addPoint(){
  // —É —Ä–µ–∞–ª—ñ –∫–æ–¥ —á–∏—Ç–∞—î raw –∑ Arduino –ø–æ Serial; —Ç—É—Ç ‚Äî –µ–º—É–ª—è—Ç–æ—Ä/—Ä—É—á–Ω–∏–π –≤–≤—ñ–¥
  if(emu.checked){
    const F=parseFloat(emuF.value)||0;
    addPointFromValue(F);
  }else{
    const r=prompt('–í–≤–µ–¥–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —Å–∏–ª–∏ (–ù –∞–±–æ –∫–≥—Å –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –æ–¥–∏–Ω–∏—Ü—å):', '180');
    if(r==null) return;
    const F=parseFloat(r);
    if(!isNaN(F)) addPointFromValue(F);
  }
}
$('#tick').addEventListener('click', addPoint);
$('#clear').addEventListener('click', ()=>{ series.length=0; ema=null; $('#last').textContent='F=‚Äî, F(EMA)=‚Äî, SLIP=‚Äî%'; draw(); });

// –ì—Ä–∞—Ñ—ñ–∫
function draw(){
  const W=g.width,H=g.height;
  ctx.clearRect(0,0,W,H);
  ctx.strokeStyle='#223049'; ctx.strokeRect(0.5,0.5,W-1,H-1);
  if(series.length<2) return;

  const s=series.slice(-300);
  const maxF = Math.max(50, Math.max(...s.map(o=>Math.max(o.F,o.Fema))) * 1.25);
  const xs=s.map((_,i)=> 60 + i*((W-80)/299));

  // —Å—ñ—Ç–∫–∞
  ctx.fillStyle='#94a3b8'; ctx.font='12px ui-monospace';
  ctx.fillText('F ('+unit+')', 12, 14); ctx.fillText('SLIP %', 12, 28);

  // –õ—ñ–Ω—ñ—ó –ø–æ—Ä–æ–≥—ñ–≤
  const tmin=parseFloat($('#tmin').value)||0, tmax=parseFloat($('#tmax').value)||0;
  const yMin=H-10-(tmin/maxF)*(H-20), yMax=H-10-(tmax/maxF)*(H-20);
  ctx.setLineDash([6,4]); ctx.strokeStyle='#fbbf24';
  ctx.beginPath(); ctx.moveTo(60,yMin); ctx.lineTo(W-10,yMin); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(60,yMax); ctx.lineTo(W-10,yMax); ctx.stroke(); ctx.setLineDash([]);

  // F (—Å–∏—Ä–∏–π)
  ctx.beginPath(); ctx.strokeStyle='#38bdf8'; ctx.lineWidth=1.8;
  xs.forEach((x,i)=>{ const y=H-10-(s[i].F/maxF)*(H-20); i?ctx.lineTo(x,y):ctx.moveTo(x,y); }); ctx.stroke();

  // F EMA
  ctx.beginPath(); ctx.strokeStyle='#22c55e'; ctx.lineWidth=2;
  xs.forEach((x,i)=>{ const y=H-10-(s[i].Fema/maxF)*(H-20); i?ctx.lineTo(x,y):ctx.moveTo(x,y); }); ctx.stroke();

  // SLIP –º–∞—Ä–∫–µ—Ä–∏ (–Ω–∏–∑ –≥—Ä–∞—Ñ—ñ–∫–∞)
  s.forEach((o,i)=>{ if(o.slip>=(parseFloat($('#slipThr').value)||3)){ const x=xs[i]; ctx.fillStyle='#f87171'; ctx.fillRect(x-2,H-12,4,4); } });

  // –ê–≤–∞—Ä—ñ—ó
  s.forEach((o,i)=>{ if(o.alarm){ const x=xs[i], y=H-14; ctx.fillStyle='#f87171'; ctx.fillRect(x-2,y,4,4); } });
}

// –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è (—ñ–º—ñ—Ç–∞—Ü—ñ—è ¬´—Å–∏—Ä–∏—Ö¬ª –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤)
let mockRaw=0;
function mockReadRawFromF(F){
  // –ª—ñ–Ω—ñ–π–Ω–∞ –º–æ–¥–µ–ª—å: raw = rawZero + F/scale; scale –∑–∞–¥–∞—î–º–æ –ø—ñ–¥ —á–∞—Å calRef
  const sc = scale||10; return Math.round((rawZero??100000) + F/sc);
}
$('#calZero').addEventListener('click', ()=>{
  // —É —Ä–µ–∞–ª—ñ ‚Äî —Å–µ—Ä–µ–¥–Ω—î N —á–∏—Ç–∞–Ω—å HX711 –±–µ–∑ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  rawZero = 100000; // –¥–µ–º–æ
  $('#badge').textContent='–ö–∞–ª—ñ–±—Ä–æ–≤–∞–Ω–æ: –Ω—É–ª—å ‚úî';
});
$('#calRef').addEventListener('click', ()=>{
  if(rawZero==null){ alert('–°–ø–æ—á–∞—Ç–∫—É ¬´–Ω—É–ª—å¬ª'); return; }
  const units=$('#units').value;
  const mkg=parseFloat($('#calMass').value)||10;
  const g0=9.80665;
  const Fref=(units==='N')? (mkg*g0) : mkg;
  rawRef = (rawZero||100000) + Math.round(Fref/10); // –¥–µ–º–æ; —Å–ø—Ä–∞–≤–∂–Ω—ñ–π rawRef –∑—á–∏—Ç—É—î—Ç—å—Å—è –∑ HX711
  $('#badge').textContent='–ö–∞–ª—ñ–±—Ä–æ–≤–∞–Ω–æ: –Ω—É–ª—å+–µ—Ç–∞–ª–æ–Ω ‚úî';
});

// ===== –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—à–∏–≤–∫–∏ =====
function makeSketch(){
  const dt = parseInt($('#dt').value,10);
  const sck= parseInt($('#sck').value,10);
  const gainSel=parseInt($('#chan').value,10);
  const alpha=parseFloat($('#alpha').value)||0.25;
  const period=parseInt($('#period').value,10)||100;
  const units=$('#units').value;
  const mkg=parseFloat($('#calMass').value)||10;

  const code = `/*
  –ü–∞—Ä–∞ 17 ‚Äî –¢–µ–Ω–∑–æ–Ω–∞—Ç—è–≥ —Ä–µ–º–µ–Ω—è (HX711) + EMA + —Ç—Ä–∏–≥–µ—Ä–∏
  –ü—ñ–Ω–∏: DT=${dt}, SCK=${sck}, GainSel=${gainSel}.
  –ü–µ—Ä—ñ–æ–¥ –≤–∏–±—ñ—Ä–∫–∏: ${period} –º—Å, EMA Œ±=${alpha.toFixed(2)}.
  –û–¥–∏–Ω–∏—Ü—ñ: ${units}. –ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è: ¬´–Ω—É–ª—å¬ª + ¬´–µ—Ç–∞–ª–æ–Ω¬ª –º–∞—Å–æ—é ${mkg} –∫–≥.
  –í–∏–≤—ñ–¥ CSV: millis,F,Fema,alarm
  ‚ö† –ë–µ–∑–ø–µ–∫–∞: –Ω–µ –∑–∞–≤–æ–¥—å —Ä—É–∫–∏ –º—ñ–∂ —Ä–µ–º–µ–Ω—è–º–∏/—à–∫—ñ–≤–∞–º–∏; —Ñ—ñ–∫—Å—É–π –¥–∞—Ç—á–∏–∫!
*/
#include <HX711.h>
HX711 scale;
const byte PIN_DT=${dt};
const byte PIN_SCK=${sck};
const byte GAIN_SEL=${gainSel}; // 128=A, 64=A, 32=B

// –ö–∞–ª—ñ–±—Ä—É–≤–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–∑–∞–ø–æ–≤–Ω—é—é—Ç—å—Å—è –ø—ñ—Å–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∏ –∫–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è)
long RAW_ZERO = 0;
long RAW_REF  = 100000;
float SCALE = 1.0; // F = (raw - RAW_ZERO)*SCALE

const float ALPHA = ${alpha.toFixed(3)};
const unsigned long PERIOD_MS = ${period};

float ema = NAN;

void setup(){
  Serial.begin(115200);
  scale.begin(PIN_DT, PIN_SCK);
  // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–∞–Ω–∞–ª—É/–∫–æ–µ—Ñ. –ø—ñ–¥—Å–∏–ª–µ–Ω–Ω—è:
  // HX711 –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –≤–∏–∑–Ω–∞—á–∞—î gain —á–µ—Ä–µ–∑ set_gain(128/64/32) –∞–±–æ read_average –∑ –ø–æ—á. –∫–æ–Ω—Ñ—ñ–≥–æ–º,
  // –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –≤–∏–∫–ª–∏–∫–∞—î–º–æ:
  scale.set_gain(GAIN_SEL);
  delay(400);
  Serial.println(F("millis,F,Fema,alarm"));
}

float toForce(long raw){
  // –Ø–∫—â–æ –Ω–µ–º–∞—î –µ—Ç–∞–ª–æ–Ω—ñ–≤ ‚Äî –ø–æ–≤–µ—Ä–Ω–µ–º–æ NaN
  if(RAW_REF==RAW_ZERO) return NAN;
  // Fref: –¥–ª—è –ù = m*g, –¥–ª—è –∫–≥—Å = m
  #if 1
    const float g0 = 9.80665f;
    const float Fref = ${units==='N' ? `${mkg}*g0` : `${mkg}.0`};
  #endif
  SCALE = Fref / float(RAW_REF - RAW_ZERO);
  return (raw - RAW_ZERO) * SCALE;
}

void loop(){
  static unsigned long t0=millis();
  if(millis()-t0 >= PERIOD_MS){
    t0 = millis();
    long raw = scale.read_average(4); // 4 –∑—Ä–∞–∑–∫–∏
    float F = toForce(raw);
    if(isnan(ema)) ema = F;
    ema = ALPHA*F + (1.0-ALPHA)*ema;

    // –¢—Ä–∏–≥–µ—Ä–∏ —Ç—É—Ç –±—É–¥—É—Ç—å —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –±—Ä–∞—É–∑–µ—Ä–∞/PLC; –∑–∞–ª–∏—à–∏–º–æ –±—ñ—Ç alarm=false
    bool alarm=false;

    Serial.print(millis()); Serial.print(',');
    Serial.print(F,2); Serial.print(',');
    Serial.print(ema,2); Serial.print(',');
    Serial.println(alarm?1:0);
  }
}
`;
  return code;
}
$('#gen').addEventListener('click', ()=>{ const txt=makeSketch(); $('#code').textContent=txt; window.scrollTo({top: $('#code').parentElement.getBoundingClientRect().top + window.scrollY - 12, behavior:'smooth'}); });
$('#copy').addEventListener('click', ()=>{ const ta=document.createElement('textarea'); ta.value=$('#code').textContent; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove(); const old=document.title; document.title='‚úÖ –ö–æ–¥ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'; setTimeout(()=>document.title=old,900); });
$('#dl').addEventListener('click', ()=>{ const txt=$('#code').textContent||makeSketch(); download('mechanic_para17_hx711_tension.ino',txt,'text/x-arduino'); });

// ===== –ï–∫—Å–ø–æ—Ä—Ç–∏ =====
$('#saveTxt').addEventListener('click', ()=>{
  const lines=[
    '–ü–∞—Ä–∞ 17 ‚Äî –¢–µ–Ω–∑–æ–Ω–∞—Ç—è–≥ —Ä–µ–º–µ–Ω—è (HX711)',
    '–ú–µ—Ö–∞–Ω—ñ–∫: '+($('#fio').value||''),
    '–†–æ–±–æ—Ç–∞: '+($('#job').value||''),
    `HX711: DT=${$('#dt').value}, SCK=${$('#sck').value}, Gain=${$('#chan').value}`,
    `–û–¥–∏–Ω–∏—Ü—ñ: ${$('#units').value}, EMA Œ±=${$('#alpha').value}, –ü–µ—Ä—ñ–æ–¥=${$('#period').value} –º—Å`,
    `–î—ñ–∞–ø–∞–∑–æ–Ω: ${$('#tmin').value}..${$('#tmax').value} ${$('#units').value}`,
    `SLIP: ${$('#slip').value}% (–ø–æ—Ä—ñ–≥ ${$('#slipThr').value}%)`,
    `–ö–∞–ª—ñ–±—Ä—É–≤–∞–Ω–Ω—è: rawZero=${rawZero??'‚Äî'}, rawRef=${rawRef??'‚Äî'}, scale‚âà${scale.toFixed(6)}`
  ];
  download('mechanic_para17_'+stamp()+'.txt', lines.join('\n'));
});
$('#saveCsv').addEventListener('click', ()=>{
  const head='t_iso,F,Fema,SLIP%,alarm\n';
  const body=series.map(o=> new Date(o.t).toISOString()+','+o.F.toFixed(2)+','+o.Fema.toFixed(2)+','+o.slip.toFixed(1)+','+(o.alarm?1:0)).join('\n');
  download('mechanic_para17_'+stamp()+'.csv', head+body, 'text/csv');
});
$('#receipt').addEventListener('click', ()=>{
  const M=series.slice(-12);
  const lines=['=== –ß–ï–ö –¢–ï–ù–ó–û–ù–ê–¢–Ø–ì–£ (58–º–º) ===','–ú–µ—Ö–∞–Ω—ñ–∫: '+($('#fio').value||'-'),'–†–æ–±–æ—Ç–∞: '+($('#job').value||'-'),'---'];
  M.forEach(o=>lines.push(`${new Date(o.t).toISOString().slice(11,19)} F=${o.F.toFixed(0)}${unit} F(EMA)=${o.Fema.toFixed(0)}${unit} SLIP=${o.slip.toFixed(1)}% ${o.alarm?'!':''}`));
  const el=$('#rc'); el.hidden=false; el.textContent=lines.join('\n');
  download('para17_receipt_'+stamp()+'.txt', lines.join('\n'));
});

// ===== –î–µ–º–æ —Ü–∏–∫–ª (–ª–∏—à–µ –¥–ª—è –µ–º—É–ª—è—Ü—ñ—ó) =====
// (—É –ø–æ–ª—ñ ‚Äî —á–∏—Ç–∞—î–º–æ –∑ Serial; —Ç—É—Ç ‚Äî –≤—Ä—É—á–Ω—É –∞–±–æ —Å–ª–∞–π–¥–µ—Ä)
function demoTick(){
  if(emu.checked){
    const F=parseFloat(emuF.value)||0;
    addPointFromValue(F + (Math.random()*4-2)); // —Ç—Ä–æ—Ö–∏ —à—É–º—É
  }
  requestAnimationFrame(demoTick);
}
demoTick();
</script>


</body></html>