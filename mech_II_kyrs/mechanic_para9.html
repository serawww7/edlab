<!-- mechanic_para9.html
     –ü–ê–†–ê 9 (–∞—É–¥–∏—Ç–æ—Ä–Ω–æ) –¥–ª—è –º–µ—Ö–∞–Ω—ñ–∫—ñ–≤
     –¢–µ–º–∞: –ü–õ–ê–ù–£–í–ê–ù–ù–Ø –¢–û ‚Äî –¢–û-0/–¢–û-1/–¢–û-2, —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏ (–º/–≥ —ñ –∫–∞–ª–µ–Ω–¥–∞—Ä), –ø—Ä–æ–≥–Ω–æ–∑ ‚Äú–¥–æ/–ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ‚Äù, —á–µ–∫-–ª–∏—Å—Ç–∏,
           58 –º–º –∫–≤–∏—Ç–æ–∫ ‚Äú–ü–õ–ê–ù –¢–û‚Äù, NFC-–º–∞—Ä–∫–µ—Ä –¥–ª—è –º–∞—à–∏–Ω–∏, CSV-–∂—É—Ä–Ω–∞–ª.
     –§–æ–∫—É—Å: —Ç–µ–ª–µ—Ñ–æ–Ω–∏/–ü–ö; –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫; –≥–æ—Ç–æ–≤–æ –¥–ª—è GitHub Pages / Moodle (iframe).
     –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è: —Ç–µ–ª–µ—Ñ–æ–Ω–∏, 58 –º–º —Ç–µ—Ä–º–æ–ø—Ä–∏–Ω—Ç–µ—Ä (–æ–ø—Ü.), NFC-–º—ñ—Ç–∫–∏ (–æ–ø—Ü.).

     –©–æ –≤–º—ñ—î:
     ‚Ä¢ –í–µ—Å—Ç–∏ –∫–∞—Ä—Ç–∫—É –º–∞—à–∏–Ω–∏: –º–æ–¥–µ–ª—å, —Ä—ñ–∫, —ñ–Ω–≤. ‚Ññ, –≥–æ–¥–∏–Ω–Ω–∏–∫, –ø—Ä–æ–±—ñ–≥ (–æ–ø—Ü.), —Ç–∏–ø –º–∞—Å—Ç–∏–ª–∞/—Ñ—ñ–ª—å—Ç—Ä—ñ–≤.
     ‚Ä¢ –Ü–Ω—Ç–µ—Ä–≤–∞–ª–∏ –¢–û –≤ –º/–≥–æ–¥ —ñ/–∞–±–æ –¥–Ω—è—Ö; –∑–±–µ—Ä—ñ–≥–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è; –ø—Ä–æ–≥–Ω–æ–∑—É—î ‚Äú–ó–∞–ª–∏—à–æ–∫, –º/–≥ / –¥–Ω—ñ–≤‚Äù.
     ‚Ä¢ –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á –¢–û (–º–∞—Å–ª–æ, —Ñ—ñ–ª—å—Ç—Ä–∏, —Ä–µ–º–µ–Ω—ñ, –æ—Ö–æ–ª–æ–¥–∂., –≥—ñ–¥—Ä–∞–≤–ª—ñ–∫–∞, –≥–∞–ª—å–º–∞, —Å–≤—ñ—Ç–ª–æ, –µ–ª–µ–∫—Ç—Ä–∏–∫–∞, –ü–ó/–∫–æ–¥–∏).
     ‚Ä¢ –ì–µ–Ω–µ—Ä—É—î 58 –º–º –∫–≤–∏—Ç–æ–∫ —Ç–∞ NFC-—Ç–µ–∫—Å—Ç; –µ–∫—Å–ø–æ—Ä—Ç CSV; –∫–æ–ª—å–æ—Ä–æ–≤—ñ —Å—Ç–∞–Ω–∏: üü¢ –æ–∫ / üü† —Å–∫–æ—Ä–æ / üî¥ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ.
     –ü—Ä–∏–º—ñ—Ç–∫–∞ —â–æ–¥–æ –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É: —Ç–µ–º–Ω—ñ –∫–ª—ñ—Ç–∏–Ω–∫–∏ –º–∞—é—Ç—å —Å–≤—ñ—Ç–ª–∏–π —Ç–µ–∫—Å—Ç (.dark).
-->
<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ü–∞—Ä–∞ 9 (–º–µ—Ö–∞–Ω—ñ–∫–∏) ‚Äî –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –¢–û: —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏, –ø—Ä–æ–≥–Ω–æ–∑, —á–µ–∫-–ª–∏—Å—Ç–∏, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC, CSV</title>
<meta name="color-scheme" content="light dark">
<style>
  :root{
    --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --text:#e2e8f0;
    --accent:#22c55e; --accent-2:#60a5fa; --warn:#f59e0b; --bad:#ef4444; --good:#10b981; --line:#1f2937;
    --darkcell:#0b1324; --darkink:#e6eef9; --darkink2:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b1220,#111827 30%,#0b1220);color:var(--text);
       font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;line-height:1.55}
  .wrap{max-width:1100px;margin:0 auto;padding:24px 16px 64px}
  .badge{display:inline-block;padding:6px 10px;border:1px solid var(--line);background:#0b1220;border-radius:999px;
         font-size:12px;color:var(--muted);letter-spacing:.3px}
  h1{font-size:34px;margin:6px 0 12px;line-height:1.15;
     background:linear-gradient(90deg,#60a5fa,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  h2{font-size:22px;margin:28px 0 12px} h3{font-size:18px;margin:20px 0 8px;color:#cbd5e1}
  p{margin:10px 0}.small{font-size:12px;color:#9fb0c8}.muted{color:#93a3b5}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#dbeafe;text-decoration:none;cursor:pointer}
  .btn:hover{background:#0f1f39}
  .grid{display:grid;gap:12px}.g2{grid-template-columns:repeat(2,minmax(0,1fr))}.g3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:1000px){.g2,.g3{grid-template-columns:1fr}}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg,#0f172a,#0b1220);border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .box{border:1px solid #223049;border-radius:12px;padding:12px;background:var(--darkcell);color:var(--darkink)}
  .ok{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  .table{width:100%;border-collapse:separate;border-spacing:0;overflow:auto;border-radius:12px;border:1px solid #223049}
  .table th,.table td{padding:8px 10px;border-bottom:1px solid #1f2937;font-size:14px;vertical-align:top}
  .table thead th{background:#0c1629;color:#a5b4fc;text-align:left;position:sticky;top:0}
  .table tbody tr:nth-child(even){background:var(--darkcell);color:var(--darkink2)}
  .table td.dark,.table th.dark{background:var(--darkcell)!important;color:var(--darkink2)!important}
  .out{background:var(--darkcell);color:var(--darkink2);border:1px dashed #263042;padding:10px 12px;border-radius:10px;word-break:break-all}
  input[type="text"],input[type="number"],input[type="date"],select,textarea{width:100%;padding:8px 10px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#e6eef9}
  /* –ß–µ–∫ 58 –º–º */
  .ticket{width:58mm;background:#fff;color:#000;padding:6mm 4mm;border-radius:6px;box-shadow:0 0 0 1px #e5e7eb inset;font-family:"Courier New",ui-monospace,monospace}
  .ticket h4{margin:0 0 6px;font-size:13px;text-align:center}.ticket p{margin:2px 0;font-size:12px}.ticket .line{border-top:1px dashed #111;margin:6px 0}
  .ticket small{font-size:10px}
  /* –í–±—É–¥–æ–≤–∞–Ω–æ (iframe) ‚Üí —Å–≤—ñ—Ç–ª–∏–π –≤–∏–≥–ª—è–¥ */
  html.embedded body{background:#fff;color:#111}
  html.embedded .card{background:#fff;border:1px solid #e5e7eb;box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial;background:none;color:#111}
  html.embedded .box{background:#f8fafc;color:#111}
  html.embedded .table tbody tr:nth-child(even){background:#f3f4f6;color:#111}
  @media print{@page{margin:4mm}.no-print{display:none!important}}
</style>
</head>
<body>
<div class="wrap">
  <span class="badge">–ü–∞—Ä–∞ 9 ¬∑ –∞—É–¥–∏—Ç–æ—Ä–Ω–æ ¬∑ –º–µ—Ö–∞–Ω—ñ–∫–∏</span>
  <h1>üõ†Ô∏è –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –¢–û: —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏, –ø—Ä–æ–≥–Ω–æ–∑, —á–µ–∫-–ª–∏—Å—Ç–∏, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC, CSV</h1>

  <div class="card">
    <h2>üéØ –ú–µ—Ç–∞</h2>
    <p>
      –ó–∞ –ø–∞—Ä—É —Å—Ç—É–¥–µ–Ω—Ç–∏ —Å—Ç–≤–æ—Ä—è—Ç—å <b>—Ü–∏—Ñ—Ä–æ–≤—É –∫–∞—Ä—Ç–∫—É –º–∞—à–∏–Ω–∏</b>, –∑–∞–¥–∞–¥—É—Ç—å <b>—ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏ –¢–û</b> (–º/–≥–æ–¥ —ñ –∫–∞–ª–µ–Ω–¥–∞—Ä),
      –æ—Ç—Ä–∏–º–∞—é—Ç—å <b>–ø—Ä–æ–≥–Ω–æ–∑</b> –ø–æ –∫–æ–∂–Ω–æ–º—É –ø—É–Ω–∫—Ç—É (üü¢/üü†/üî¥), —Å—Ñ–æ—Ä–º—É—é—Ç—å <b>—á–µ–∫-–ª–∏—Å—Ç —Ä–æ–±—ñ—Ç</b>,
      –∑–≥–µ–Ω–µ—Ä—É—é—Ç—å <b>–∫–≤–∏—Ç–æ–∫ 58 –º–º</b>, <b>NFC</b>-–º–∞—Ä–∫–µ—Ä —ñ <b>CSV</b>-–∂—É—Ä–Ω–∞–ª.
    </p>
    <p class="small">–ë–∞–∑–æ–≤—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏ (–Ω–∞–≤—á–∞–ª—å–Ω–æ): –º–∞—Å–ª–æ –¥–≤–∏–≥—É–Ω–∞ 250 –º/–≥ –∞–±–æ 6 –º—ñ—Å; —Ñ—ñ–ª—å—Ç—Ä –º–∞—Å–ª–∞ 250 –º/–≥; –ø–∞–ª–∏–≤–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä 500 –º/–≥; –ø–æ–≤—ñ—Ç—Ä—è–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä 250 –º/–≥;
      –æ—Ö–æ–ª–æ–¥–∂—É—é—á–∞ —Ä—ñ–¥–∏–Ω–∞ 24 –º—ñ—Å; –≥—ñ–¥—Ä–∞–≤–ª—ñ—á–Ω–µ –º–∞—Å–ª–æ 1000 –º/–≥; —Ä–µ–º–µ–Ω—ñ ‚Äî –æ–≥–ª—è–¥ –∫–æ–∂–Ω—ñ 250 –º/–≥; –≥–∞–ª—å–º–∞/—Å–≤—ñ—Ç–ª–æ ‚Äî —â–æ–º—ñ—Å—è—Ü—è.</p>
  </div>

  <!-- –ö–ê–†–¢–ö–ê –ú–ê–®–ò–ù–ò -->
  <div class="card">
    <h2>üöú –ö–∞—Ä—Ç–∫–∞ –º–∞—à–∏–Ω–∏</h2>
    <div class="grid g3">
      <div class="box">
        <h3>–ó–∞–≥–∞–ª—å–Ω—ñ</h3>
        <div class="row">
          <div style="flex:1"><label>–ú–æ–¥–µ–ª—å</label><input id="model" type="text" value="–¢—Ä–∞–∫—Ç–æ—Ä MFWD 120hp"></div>
          <div style="flex:1"><label>–†—ñ–∫</label><input id="year" type="number" value="2019"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–Ü–Ω–≤. ‚Ññ</label><input id="inv" type="text" value="TR-001"></div>
          <div style="flex:1"><label>–í–ª–∞—Å–Ω–∏–∫/–±—Ä–∏–≥–∞–¥–∞</label><input id="owner" type="text" value="–ë—Ä–∏–≥–∞–¥–∞ ‚Ññ2"></div>
        </div>
      </div>
      <div class="box">
        <h3>–õ—ñ—á–∏–ª—å–Ω–∏–∫–∏</h3>
        <div class="row">
          <div style="flex:1"><label>–ü–æ—Ç–æ—á–Ω—ñ –º/–≥</label><input id="hours" type="number" step="1" value="3240"></div>
          <div style="flex:1"><label>–°–µ—Ä. –º/–≥ –∑–∞ –¥–æ–±—É</label><input id="hoursPerDay" type="number" step="0.1" value="6.0"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–°—å–æ–≥–æ–¥–Ω—ñ (–¥–∞—Ç–∞)</label><input id="today" type="date"></div>
          <div style="flex:1"><label>–ö–æ–Ω—Ç–∞–∫—Ç (—Ç–µ–ª.)</label><input id="phone" type="text" value="+380XXXXXXXXX"></div>
        </div>
      </div>
      <div class="box">
        <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
        <div class="row">
          <button class="btn" onclick="preset()">üß™ –ü—Ä–∏–∫–ª–∞–¥</button>
          <button class="btn" onclick="recalc()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="copyCSV('csvCard')">üìã CSV (–∫–∞—Ä—Ç–∫–∞)</button>
        </div>
        <div id="csvCard" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
  </div>

  <!-- –Ü–ù–¢–ï–†–í–ê–õ–ò –¢–ê –û–°–¢–ê–ù–ù–Ñ –í–ò–ö–û–ù–ê–ù–ù–Ø -->
  <div class="card">
    <h2>‚è±Ô∏è –Ü–Ω—Ç–µ—Ä–≤–∞–ª–∏ –¢–û —Ç–∞ –æ—Å—Ç–∞–Ω–Ω—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h2>
    <div class="row">
      <button class="btn" onclick="addRow()">‚ûï –î–æ–¥–∞—Ç–∏ –ø—É–Ω–∫—Ç</button>
      <button class="btn" onclick="presetRows()">üìö –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –±–∞–∑–æ–≤—ñ</button>
      <button class="btn" onclick="recalc()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
      <button class="btn" onclick="copyCSV('csvPlan')">üìã CSV (–ø–ª–∞–Ω)</button>
    </div>
    <div style="overflow:auto;margin-top:8px">
      <table class="table" id="tbl">
        <thead>
          <tr>
            <th>#</th>
            <th>–ü—É–Ω–∫—Ç –¢–û</th>
            <th>–Ü–Ω—Ç–µ—Ä–≤–∞–ª, –º/–≥</th>
            <th>–Ü–Ω—Ç–µ—Ä–≤–∞–ª, –¥–Ω—ñ–≤</th>
            <th>–û—Å—Ç–∞–Ω–Ω—ñ –º/–≥</th>
            <th>–û—Å—Ç–∞–Ω–Ω—è –¥–∞—Ç–∞</th>
            <th class="dark">–î–æ –º/–≥</th>
            <th class="dark">–î–æ –¥–Ω—ñ–≤</th>
            <th class="dark">–°—Ç–∞—Ç—É—Å</th>
            <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
          </tr>
        </thead>
        <tbody id="body"></tbody>
      </table>
    </div>
    <div id="csvPlan" class="out" style="margin-top:8px">‚Äî</div>
    <p class="small muted">–°—Ç–∞—Ç—É—Å: üü¢ ‚â•15% –∑–∞–ø–∞—Å—É; üü† <15% –∑–∞–ø–∞—Å—É; üî¥ ‚â§0 (–ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ). –Ø–∫—â–æ –∑–∞–¥–∞–Ω–æ —ñ –º/–≥, —ñ –¥–Ω—ñ ‚Äî –±–µ—Ä–µ—Ç—å—Å—è –≥—ñ—Ä—à–∏–π (–∫—Ä–∏—Ç–∏—á–Ω—ñ—à–∏–π) —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
  </div>

  <!-- –ß–ï–ö-–õ–ò–°–¢ –†–û–ë–Ü–¢ -->
  <div class="card">
    <h2>‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ä–æ–±—ñ—Ç –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –¢–û</h2>
    <div class="grid g2">
      <div class="box">
        <h3>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–µ—Ä–µ–ª—ñ–∫</h3>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk" checked> –ó–∞–º—ñ–Ω–∞ –º–∞—Å–ª–∞ –¥–≤–∏–≥—É–Ω–∞ (–≤–∫–∞–∑–∞—Ç–∏ –º–∞—Ä–∫—É)</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk" checked> –§—ñ–ª—å—Ç—Ä –º–∞—Å–ª—è–Ω–∏–π</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk" checked> –§—ñ–ª—å—Ç—Ä –ø–∞–ª–∏–≤–Ω–∏–π / –≤—ñ–¥—Å—Ç—ñ–π–Ω–∏–∫</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk" checked> –ü–æ–≤—ñ—Ç—Ä—è–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä (+ –æ—á–∏—â–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω–∏–∫–∞)</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–º–µ–Ω—ñ–≤/–Ω–∞—Ç—è–≥—É/—à–∫—ñ–≤—ñ–≤</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –†—ñ–¥–∏–Ω–∞ –æ—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è (—â—ñ–ª—å–Ω—ñ—Å—Ç—å, —Ä—ñ–≤–µ–Ω—å, —à–ª–∞–Ω–≥–∏)</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –ì—ñ–¥—Ä–∞–≤–ª—ñ—á–Ω–µ –º–∞—Å–ª–æ/—Ñ—ñ–ª—å—Ç—Ä/–≤–∏—Ç–æ–∫–∏</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –ì–∞–ª—å–º–∞, —Å—Ç–æ—è–Ω–∫–æ–≤–µ, —Ä–µ–≥—É–ª—é–≤–∞–Ω–Ω—è</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –°–≤—ñ—Ç–ª–æ, —Å–∏–≥–Ω–∞–ª, –µ–ª–µ–∫—Ç—Ä–∏–∫–∞, –∫–ª–µ–º–∏ –ê–ö–ë</label>
        </div>
        <div class="row">
          <label style="flex:1"><input type="checkbox" class="chk"> –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—ñ–≤/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ü–ó (—è–∫—â–æ —î)</label>
        </div>
      </div>
      <div class="box">
        <h3>–î–æ–¥–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∑–∞–¥–∞—á—ñ</h3>
        <div class="row">
          <input id="customTask" type="text" placeholder="–ù–∞–ø—Ä.: –ó–º–∞—â–µ–Ω–Ω—è —à–∞—Ä–Ω—ñ—Ä—ñ–≤ –Ω–∞–≤—ñ—Å–∫–∏">
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="addTask()">‚ûï –î–æ–¥–∞—Ç–∏</button>
          <button class="btn" onclick="buildChecklist()">üßæ –ó—ñ–±—Ä–∞—Ç–∏ –Ω–æ—Ç–∞—Ç–∫–∏</button>
        </div>
        <div id="checkOut" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
  </div>

  <!-- –ö–í–ò–¢–û–ö + NFC -->
  <div class="card">
    <h2>üßæ –ö–≤–∏—Ç–æ–∫ 58 –º–º —Ç–∞ NFC</h2>
    <div class="grid g2">
      <div class="box">
        <h3>NFC ‚Äî ‚ÄúSERVICE CARD‚Äù</h3>
        <div class="row">
          <div style="flex:1"><label>–ú–∞—à–∏–Ω–∞ ID</label><input id="nfcId" type="text" value="TR-001"></div>
          <div style="flex:1"><label>–ö–æ–Ω—Ç–∞–∫—Ç</label><input id="nfcPhone" type="text" value="+380XXXXXXXXX"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="buildNFC()">üß© –ó—ñ–±—Ä–∞—Ç–∏</button>
          <button class="btn" onclick="copyEl('nfcOut')">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
        </div>
        <div id="nfcOut" class="out">‚Äî</div>
      </div>

      <div class="box">
        <h3>–ö–≤–∏—Ç–æ–∫ ‚Äú–ü–õ–ê–ù –¢–û‚Äù</h3>
        <div class="row">
          <button class="btn" onclick="buildTicket()">üßæ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="window.print()">üñ®Ô∏è –î—Ä—É–∫</button>
        </div>
        <div class="ticket" id="ticket" style="margin-top:8px">
          <h4>–ü–õ–ê–ù –¢–û</h4>
          <p id="tDate"><small>–î–∞—Ç–∞: ‚Äî</small></p>
          <div class="line"></div>
          <p><b>–ú–æ–¥–µ–ª—å:</b> <span id="tModel">‚Äî</span></p>
          <p><b>–Ü–Ω–≤. ‚Ññ / –†—ñ–∫:</b> <span id="tInv">‚Äî</span> / <span id="tYear">‚Äî</span></p>
          <p><b>–õ—ñ—á–∏–ª—å–Ω–∏–∫:</b> <span id="tHours">‚Äî</span> –º/–≥</p>
          <div class="line"></div>
          <p><b>–¢–û –Ω–∞–π–±–ª–∏–∂—á–µ:</b></p>
          <p id="tNext1">‚Äî</p>
          <p id="tNext2">‚Äî</p>
          <div class="line"></div>
          <p><small id="tNote">–ü—Ä–∏–º.: ‚Äî</small></p>
        </div>
      </div>
    </div>
  </div>

  <!-- –•–Ü–î –†–û–ë–û–¢–ò + –û–¶–Ü–ù–Æ–í–ê–ù–ù–Ø -->
  <div class="card">
    <h2>ü™ú –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ (45‚Äì70 —Ö–≤)</h2>
    <ol>
      <li>–ó–∞–ø–æ–≤–Ω–∏ <b>–∫–∞—Ä—Ç–∫—É –º–∞—à–∏–Ω–∏</b> (–º–æ–¥–µ–ª—å, —ñ–Ω–≤.‚Ññ, –º/–≥, –¥–∞—Ç–∞, –±—Ä–∏–≥–∞–¥–∞, –∫–æ–Ω—Ç–∞–∫—Ç).</li>
      <li>–î–æ–¥–∞–π/—Å–∫–æ—Ä–∏–≥—É–π <b>–ø—É–Ω–∫—Ç–∏ –¢–û</b>, –∑–∞–ø–æ–≤–Ω–∏ <b>—ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏</b> —Ç–∞ <b>–æ—Å—Ç–∞–Ω–Ω—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</b> ‚Üí –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏‚Äù.</li>
      <li>–ü–æ–¥–∏–≤–∏—Å—å <b>—Å—Ç–∞—Ç—É—Å–∏</b> (üü¢/üü†/üî¥), —Å—Ñ–æ—Ä–º—É–π <b>—á–µ–∫-–ª–∏—Å—Ç</b> —ñ <b>–ø–ª–∞–Ω</b> –Ω–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 50 –º/–≥ –∞–±–æ 30 –¥–Ω—ñ–≤.</li>
      <li>–ó–≥–µ–Ω–µ—Ä—É–π <b>NFC</b>, <b>–∫–≤–∏—Ç–æ–∫ 58 –º–º</b> —Ç–∞ <b>CSV</b> —É Sheets (<span class="mono">ServicePlan</span>).</li>
    </ol>
  </div>

  <div class="card">
    <h2>‚úÖ –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è (10 –±–∞–ª—ñ–≤)</h2>
    <table class="table">
      <thead><tr><th>–ö—Ä–∏—Ç–µ—Ä—ñ–π</th><th>–ë–∞–ª–∏</th></tr></thead>
      <tbody>
        <tr><td>–ö–∞—Ä—Ç–∫–∞ –º–∞—à–∏–Ω–∏ (–¥–∞–Ω—ñ –ø–æ–≤–Ω—ñ, —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ)</td><td>2</td></tr>
        <tr><td>–Ü–Ω—Ç–µ—Ä–≤–∞–ª–∏/–æ—Å—Ç–∞–Ω–Ω—è –¥–∞—Ç–∞/–º/–≥ –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤–Ω–µ—Å–µ–Ω—ñ</td><td>3</td></tr>
        <tr><td>–°—Ç–∞—Ç—É—Å–∏ —Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—ñ, —Ä—ñ—à–µ–Ω–Ω—è –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω—ñ</td><td>3</td></tr>
        <tr><td>–ö–≤–∏—Ç–æ–∫/NFC + CSV</td><td>2</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (Moodle iFrame)
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  const byId = id => document.getElementById(id);
  const rnd = (n,d=2)=>Number((+n).toFixed(d));
  const bodyEl = document.getElementById('body');

  // –°—å–æ–≥–æ–¥–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
  (function setToday(){
    const t = new Date();
    byId('today').value = new Date(t.getTime()-t.getTimezoneOffset()*60000).toISOString().slice(0,10);
  })();

  // --- –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö —Ä—è–¥–∫–∞ –¢–û ---
  function addRow(sample){
    const def = {name:'–ú–∞—Å–ª–æ –¥–≤–∏–≥—É–Ω–∞', intH:250, intD:180, lastH:3000, lastD:(byId('today').value), note:''};
    const s = Object.assign({}, def, sample||{});
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="idx">1</td>
      <td><input type="text" value="${s.name}"></td>
      <td><input type="number" step="1" value="${s.intH}"></td>
      <td><input type="number" step="1" value="${s.intD}"></td>
      <td><input type="number" step="1" value="${s.lastH}"></td>
      <td><input type="date" value="${s.lastD}"></td>
      <td class="dark toH">‚Äî</td>
      <td class="dark toD">‚Äî</td>
      <td class="dark flag">‚Äî</td>
      <td><input type="text" value="${s.note}"></td>
    `;
    bodyEl.appendChild(tr);
    reindex();
  }
  function reindex(){ [...bodyEl.querySelectorAll('tr')].forEach((tr,i)=>tr.querySelector('.idx').textContent=i+1); }

  // --- –ü—Ä–µ—Å–µ—Ç–∏ ---
  function preset(){
    byId('model').value = 'John Deere 6155M';
    byId('year').value  = 2020;
    byId('inv').value   = 'JD-6155-02';
    byId('owner').value = '–ë—Ä–∏–≥–∞–¥–∞ ‚Ññ1';
    byId('hours').value = 4120;
    byId('hoursPerDay').value = 7.5;
    byId('phone').value = '+380671234567';
  }

  function presetRows(){
    bodyEl.innerHTML='';
    const today = byId('today').value;
    const dateShift = d => {
      const dt = new Date(today); dt.setDate(dt.getDate()-d);
      return new Date(dt.getTime()-dt.getTimezoneOffset()*60000).toISOString().slice(0,10);
    };
    addRow({name:'–ú–∞—Å–ª–æ –¥–≤–∏–≥—É–Ω–∞',     intH:250, intD:180, lastH:+byId('hours').value-220, lastD:dateShift(150)});
    addRow({name:'–§—ñ–ª—å—Ç—Ä –º–∞—Å–ª—è–Ω–∏–π',   intH:250, intD:180, lastH:+byId('hours').value-220, lastD:dateShift(150)});
    addRow({name:'–§—ñ–ª—å—Ç—Ä –ø–∞–ª–∏–≤–Ω–∏–π',   intH:500, intD:360, lastH:+byId('hours').value-520, lastD:dateShift(380)});
    addRow({name:'–§—ñ–ª—å—Ç—Ä –ø–æ–≤—ñ—Ç—Ä—è–Ω–∏–π', intH:250, intD:180, lastH:+byId('hours').value-100, lastD:dateShift(90)});
    addRow({name:'–û—Ö–æ–ª. —Ä—ñ–¥–∏–Ω–∞',      intH:999999, intD:730, lastH:+byId('hours').value-800, lastD:dateShift(600)});
    addRow({name:'–ì—ñ–¥—Ä–∞–≤–ª. –º–∞—Å–ª–æ',    intH:1000, intD:720, lastH:+byId('hours').value-1100,lastD:dateShift(800)});
    addRow({name:'–†–µ–º–µ–Ω—ñ/—à–∫—ñ–≤–∏',      intH:250, intD:90,  lastH:+byId('hours').value-180, lastD:dateShift(70)});
    addRow({name:'–ì–∞–ª—å–º–∞/—Å—Ç–æ—è–Ω–æ—á–Ω–µ',  intH:200, intD:30,  lastH:+byId('hours').value-60,  lastD:dateShift(20)});
    addRow({name:'–°–≤—ñ—Ç–ª–æ/–µ–ª–µ–∫—Ç—Ä–∏–∫–∞',  intH:200, intD:30,  lastH:+byId('hours').value-60,  lastD:dateShift(20)});
    addRow({name:'–ö–æ–¥–∏/–ü–ó',           intH:500, intD:180, lastH:+byId('hours').value-300, lastD:dateShift(100)});
    recalc();
  }

  // --- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–ª–∏—à–∫—É —Ç–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤ ---
  function daysBetween(d1, d2){
    const a = new Date(d1+'T00:00:00'); const b = new Date(d2+'T00:00:00');
    const ms = (b - a); return Math.round(ms / 86400000);
  }

  function statusByRemain(remH, remD){
    // –ù–µ–≥–∞—Ç–∏–≤ –∞–±–æ –Ω—É–ª—å ‚Üí —á–µ—Ä–≤–æ–Ω–µ
    const worst = Math.min(remH, remD);
    if (worst <= 0) return {txt:'üî¥ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ', cls:'bad'};
    // –ó–∞–ø–∞—Å —É % –ø–æ –≥—ñ—Ä—à–æ–º—É –∫—Ä–∏—Ç–µ—Ä—ñ—é: –≤—ñ–∑—å–º–µ–º–æ –≤—ñ–¥ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É
    return {txt:'üü¢ –æ–∫', cls:'ok'};
  }

  function recalc(){
    const hours = +byId('hours').value||0;
    const hpd = +byId('hoursPerDay').value||0;
    const today = byId('today').value;

    let planLines = [];
    [...bodyEl.querySelectorAll('tr')].forEach(tr=>{
      const name = tr.children[1].querySelector('input').value.trim();
      const intH = +tr.children[2].querySelector('input').value||0;
      const intD = +tr.children[3].querySelector('input').value||0;
      const lastH = +tr.children[4].querySelector('input').value||0;
      const lastD = tr.children[5].querySelector('input').value;

      // –ó–∞–ª–∏—à–∫–∏
      const remH = (intH>999000 ? Infinity : (intH - (hours - lastH)));
      const daysSince = daysBetween(lastD, today);
      const remD = (intD>999000 ? Infinity : (intD - daysSince));

      // –û—Ü—ñ–Ω–∏–º–æ –¥–∞—Ç—É —Å–ø—Ä–∞—Ü—é–≤–∞–Ω–Ω—è –ø–æ –º/–≥: —è–∫—â–æ hpd>0
      let etaHDate = '‚Äî';
      if (isFinite(remH) && remH!==Infinity && hpd>0){
        const daysTo = Math.max(0, Math.ceil(remH / hpd));
        const dt = new Date(today+'T00:00:00'); dt.setDate(dt.getDate()+daysTo);
        etaHDate = new Date(dt.getTime()-dt.getTimezoneOffset()*60000).toISOString().slice(0,10);
      }

      // –°—Ç–∞—Ç—É—Å (–±–µ—Ä–µ–º–æ –≥—ñ—Ä—à–∏–π –∫—Ä–∏—Ç–µ—Ä—ñ–π): –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏–º–æ Infinity —É –≤–µ–ª–∏–∫–∏–π –∑–∞–ø–∞—Å
      const remHf = isFinite(remH)? remH : 1e9;
      const remDf = isFinite(remD)? remD : 1e9;
      let worst = remHf; let worstTag='–º/–≥';
      if(remDf < worst){ worst = remDf; worstTag='–¥–Ω—ñ'; }

      let flagTxt='üü¢ –æ–∫', color='#10b981';
      if (worst <= 0){ flagTxt='üî¥ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–æ'; color='#ef4444'; }
      else {
        // % –∑–∞–ø–∞—Å—É: –≤—ñ–¥–Ω–æ—Å–Ω–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É –ø–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–º—É –∫—Ä–∏—Ç–µ—Ä—ñ—é
        const base = (worstTag==='–º/–≥' ? intH : intD);
        const pct = base>0? worst/base*100 : 100;
        if (pct < 15){ flagTxt='üü† —Å–∫–æ—Ä–æ'; color='#f59e0b'; }
      }

      tr.querySelector('.toH').textContent = isFinite(remH)? (Math.round(remH)+' –º/–≥') : '‚Äî';
      tr.querySelector('.toD').textContent = isFinite(remD)? (Math.round(remD)+' –¥–Ω') : '‚Äî';
      tr.querySelector('.flag').textContent = flagTxt+' ('+worstTag+')';
      tr.querySelector('.flag').style.color = color;

      planLines.push([name, intH||'-', intD||'-', lastH, lastD, isFinite(remH)?Math.round(remH):'-', isFinite(remD)?Math.round(remD):'-', flagTxt].join(' | '));
    });

    // CSV –∫–∞—Ä—Ç–∫–∏
    const card = [
      `CARD|Model=${byId('model').value}|Year=${byId('year').value}|Inv=${byId('inv').value}|Owner=${byId('owner').value}`,
      `METER|Hours=${hours}|HPD=${hpd}|Date=${today}|Phone=${byId('phone').value}`
    ].join('\n');
    byId('csvCard').textContent = card;

    // CSV –ø–ª–∞–Ω—É
    byId('csvPlan').textContent = planLines.join('\n') || '‚Äî';
  }

  // --- –ß–µ–∫-–ª–∏—Å—Ç –≤ —Ç–µ–∫—Å—Ç ---
  function addTask(){
    const s = byId('customTask').value.trim();
    if(!s){ alert('–í–≤–µ–¥–∏ –Ω–∞–∑–≤—É –∑–∞–¥–∞—á—ñ'); return; }
    const div = document.createElement('div');
    div.className='row';
    div.innerHTML = `<label style="flex:1"><input type="checkbox" class="chk" checked> ${s}</label>`;
    byId('customTask').value='';
    // –¥–æ–¥–∞–º–æ –ø–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–∞–º–∏ ‚Äî —É –ø–µ—Ä—à—ñ–π –∫–æ–ª–æ–Ω—Ü—ñ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–µ—Ä–µ–ª—ñ–∫)
    // –∑–Ω–∞–π–¥–µ–º–æ –ø–µ—Ä—à—É –∫–æ–ª–æ–Ω–∫—É —ñ –¥–æ–¥–∞–º–æ –≤ —ó—ó –∫—ñ–Ω–µ—Ü—å
    const firstBox = document.querySelectorAll('.grid.g2 .box')[0];
    firstBox.appendChild(div);
  }

  function buildChecklist(){
    const items = [...document.querySelectorAll('.chk')].map(ch=>{
      const txt = ch.parentElement.textContent.trim();
      return (ch.checked?'[x] ':'[ ] ') + txt;
    });
    byId('checkOut').textContent = items.join('\n');
  }

  // --- –ö–≤–∏—Ç–æ–∫ 58 –º–º ---
  function buildTicket(){
    const d = new Date().toISOString().slice(0,10);
    byId('tDate').innerHTML = `<small>–î–∞—Ç–∞: ${d}</small>`;
    byId('tModel').textContent = byId('model').value;
    byId('tInv').textContent   = byId('inv').value;
    byId('tYear').textContent  = byId('year').value;
    byId('tHours').textContent = byId('hours').value;

    // –í–∏—Ç—è–≥–Ω–µ–º–æ –¥–≤–∞ –Ω–∞–π–±–ª–∏–∂—á–∏—Ö (–Ω–∞–π–º–µ–Ω—à–∏–π –∑–∞–ª–∏—à–æ–∫ –∑ > -‚àû)
    const rows = [...bodyEl.querySelectorAll('tr')].map(tr=>{
      const name = tr.children[1].querySelector('input').value.trim();
      const remH = tr.querySelector('.toH').textContent;
      const remD = tr.querySelector('.toD').textContent;
      const flag = tr.querySelector('.flag').textContent.trim();
      // —á–∏—Å–ª–æ–≤—ñ
      const nH = remH==='‚Äî'? 1e9 : parseInt(remH);
      const nD = remD==='‚Äî'? 1e9 : parseInt(remD);
      const score = Math.min(nH, nD); // –º–µ–Ω—à–∏–π ‚Üí –±–ª–∏–∂—á–µ
      return {name, remH, remD, flag, score};
    }).sort((a,b)=>a.score-b.score);

    const line = r => `${r.name}: ${r.remH}, ${r.remD} ‚Äî ${r.flag}`;
    byId('tNext1').textContent = rows[0]? line(rows[0]) : '‚Äî';
    byId('tNext2').textContent = rows[1]? line(rows[1]) : '‚Äî';

    byId('tNote').textContent = `–ë—Ä–∏–≥–∞–¥–∞: ${byId('owner').value}; –ö–æ–Ω—Ç–∞–∫—Ç: ${byId('phone').value}`;
  }

  // --- NFC-—Ç–µ–∫—Å—Ç ---
  function buildNFC(){
    const text = [
      `SERVICE_NFC`,
      `MODEL:${byId('model').value}`,
      `INV:${byId('inv').value}`,
      `HOURS:${byId('hours').value}; HPD:${byId('hoursPerDay').value}`,
      `DATE:${byId('today').value}`,
      `NEXT:${document.getElementById('tNext1').textContent.replace(/\s+/g,' ')}`,
      `PHONE:${byId('phone').value}`
    ].join('\n');
    byId('nfcOut').textContent = text;
  }

  // --- –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è CSV/—Ç–µ–∫—Å—Ç—ñ–≤ ---
  function copyCSV(id){
    const t = document.getElementById(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ CSV —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function copyEl(id){
    const t = byId(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function flash(msg){ const o=document.title; document.title=msg; setTimeout(()=>document.title=o,900); }

  // --- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ —Å–ª—É—Ö–∞—á—ñ ---
  (function init(){
    addRow();
    recalc();
    document.addEventListener('change', e=>{
      if(e.target.matches('input,select')) recalc();
    });
  })();
</script>
</body>
</html>
