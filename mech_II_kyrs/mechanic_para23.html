<!DOCTYPE html><html lang="uk"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ü–∞—Ä–∞ 23 (–º–µ—Ö–∞–Ω—ñ–∫–∏) ‚Äî –®–Ü#3: NLP-–≤–∏—Ç—è–≥ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –∑ –∞–∫—Ç—ñ–≤ –¢–û + —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è + QR 58 –º–º</title>
<meta name="description" content="–í—Å—Ç–∞–≤ —Ç–µ–∫—Å—Ç –∞–∫—Ç–∞ –¢–û –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂ —Ñ–∞–π–ª ‚Üí NLP –≤–∏—Ç—è–≥–∞—î –¥–µ—Ç–∞–ª—ñ/–∫—ñ–ª—å–∫—ñ—Å—Ç—å/–º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è/—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Üí —Ñ–æ—Ä–º—É—î —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é ‚Üí –≥–µ–Ω–µ—Ä—É—î —á–µ–∫ 58 –º–º –∑ QR ‚Üí –µ–∫—Å–ø–æ—Ä—Ç CSV/TXT.">
<meta name="color-scheme" content="light dark">
<style>
:root{--bg:#0b1220;--panel:#0f172a;--muted:#94a3b8;--text:#e6eef9;--line:#223049;--brand:#38bdf8;--ok:#22c55e;--warn:#fbbf24;--bad:#f87171}
*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,sans-serif}
.wrap{max-width:1180px;margin:0 auto;padding:16px}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.logo{display:flex;align-items:center;gap:10px}
.logo .emoji{font-size:28px}
.logo .badge{font-size:.9rem;color:var(--muted);border:1px solid var(--line);padding:2px 8px;border-radius:999px}
h1{margin:.2em 0 .3em 0}
.muted{color:var(--muted)}
.card{border:1px solid var(--line);border-radius:16px;background:var(--panel);padding:14px;margin-top:14px}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.input,select,textarea{width:100%;padding:8px;border-radius:10px;border:1px solid var(--line);background:#0b1220;color:var(--text)}
textarea{min-height:150px}
.btn{border:1px solid var(--line);background:#0f1f39;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
.btn.secondary{background:transparent}
.btn.good{border-color:#204b2a;background:#12341b}
.badge{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:2px 8px;color:var(--muted);margin-right:6px}
.small{font-size:.9rem}
pre.code{background:#0b1220;border:1px solid var(--line);border-radius:12px;padding:12px;overflow:auto;white-space:pre-wrap}
.tbl{width:100%;border-collapse:collapse;font-size:.95rem}
.tbl th,.tbl td{border:1px solid var(--line);padding:6px;text-align:left;vertical-align:top}
.tbl th{background:#0b1a2f}
.note{border:1px dashed var(--line);border-radius:12px;padding:10px;background:#0c182a}
.grid{display:grid;gap:14px;grid-template-columns:1.2fr 1fr}
@media(max-width:1080px){.grid{grid-template-columns:1fr}}
.receipt{background:#0b1220;border:1px dashed #334155;border-radius:12px;padding:10px;font-family:ui-monospace,monospace}
.canvasWrap{border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0b1220}
svg{max-width:100%;height:auto;display:block}
kbd{background:#111827;border:1px solid #334155;border-radius:6px;padding:2px 6px}
.footer{margin-top:20px;color:var(--muted);font-size:.9rem}
</style>
<link rel="canonical" href="https://edlab.pp.ua/mech_II_kyrs/mechanic_para23.html"><meta property="og:type" content="article"><meta property="og:title" content="–ú–µ—Ö–∞–Ω—ñ–∑–∞—Ü—ñ—è ‚Äî –ü–∞—Ä–∞ 23"><meta property="og:description" content="–ú–µ—Ç–∞: –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç—É –∞–∫—Ç–∞ –¢–û/—Ä–µ–º–æ–Ω—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥—ñ–ª–∏—Ç–∏ –¥–µ—Ç–∞–ª—ñ, –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è, —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/–º–∞—Ç–µ—Ä—ñ–∞–ª–∏; —Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ä–æ–±—ñ—Ç"><meta property="og:url" content="https://edlab.pp.ua/mech_II_kyrs/mechanic_para23.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"LearningResource","name":"–ú–µ—Ö–∞–Ω—ñ–∑–∞—Ü—ñ—è ‚Äî –ü–∞—Ä–∞ 23","description":"–ú–µ—Ç–∞: –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç—É –∞–∫—Ç–∞ –¢–û/—Ä–µ–º–æ–Ω—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥—ñ–ª–∏—Ç–∏ –¥–µ—Ç–∞–ª—ñ, –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è, —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/–º–∞—Ç–µ—Ä—ñ–∞–ª–∏; —Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ä–æ–±—ñ—Ç","inLanguage":"uk","educationalLevel":"college","url":"https://edlab.pp.ua/mech_II_kyrs/mechanic_para23.html","provider":{"@type":"Organization","name":"EDLab"}}</script></head>
<body>
<div class="wrap">
  <header>
    <div class="logo">
      <span class="emoji">üßæ</span>
      <div>
        <b>–ü–∞—Ä–∞ 23 ‚Äî NLP-–≤–∏—Ç—è–≥ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –∑ –∞–∫—Ç—ñ–≤ –¢–û</b><br>
        <span class="badge">—Ç–µ–∫—Å—Ç/—Ñ–∞–π–ª ‚Üí –¥–µ—Ç–∞–ª—ñ/–∫-—Å—Ç—å/–º–æ–º–µ–Ω—Ç/—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Üí —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è ‚Üí QR-–∫–≤–∏—Ç–æ–∫ 58 –º–º ‚Üí CSV/TXT</span>
      </div>
    </div>
    <a class="btn" href="../index.html" target="_blank" rel="noopener">üè† –ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
  </header>

  <p class="muted">–ú–µ—Ç–∞: –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç—É <b>–∞–∫—Ç–∞ –¢–û/—Ä–µ–º–æ–Ω—Ç—É</b> –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥—ñ–ª–∏—Ç–∏ <b>–¥–µ—Ç–∞–ª—ñ</b>, <b>–∫—ñ–ª—å–∫—ñ—Å—Ç—å</b>, <b>–º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è</b>, <b>—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç/–º–∞—Ç–µ—Ä—ñ–∞–ª–∏</b>; —Å—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ <b>—Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ä–æ–±—ñ—Ç</b> —ñ <b>–∫–≤–∏—Ç–æ–∫ 58 –º–º</b> –∑ QR-–∫–æ–¥–æ–º (—Ç–µ–∫—Å—Ç/–ø–æ—Å–∏–ª–∞–Ω–Ω—è/–Ω–æ–º–µ—Ä –∑–∞—è–≤–∫–∏).</p>

  <div class="grid">
    <!-- –õ—ñ–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: –≤–≤—ñ–¥, –ø—Ä–∞–≤–∏–ª–∞, –ø–∞—Ä—Å–∏–Ω–≥ -->
    <div class="card">
      <h2>üìù –í–≤—ñ–¥ —Ç–µ–∫—Å—Ç—É –∞–∫—Ç–∞ –¢–û</h2>
      <div class="row">
        <input id="title" class="input" placeholder="–ù–∞–∑–≤–∞ —Ä–æ–±–æ—Ç–∏: –¢–û —Ä–µ–¥—É–∫—Ç–æ—Ä–∞ –∂–∞—Ç–∫–∏, –∑–º–∞—â–µ–Ω–Ω—è, –∑–∞–º—ñ–Ω–∞ —Ä–µ–º–µ–Ω—è" style="flex:2">
        <input id="ord" class="input" placeholder="‚Ññ –∑–∞—è–≤–∫–∏ / –Ω–∞—Ä—è–¥" style="max-width:180px">
        <input id="date" class="input" type="date">
      </div>
      <textarea id="src" class="input" placeholder="–í—Å—Ç–∞–≤ –ø—Ä–∏–∫–ª–∞–¥ –∞–∫—Ç–∞ –¢–û. –ù–∞–ø—Ä.:
–ó–∞–º—ñ–Ω–∏–ª–∏ –ø—ñ–¥—à–∏–ø–Ω–∏–∫ 6204 (2 —à—Ç), –∑–∞—Ç—è–≥–Ω—É–ª–∏ M10 –±–æ–ª—Ç–∏ –≥–æ–ª–æ–≤–∫–∏ 45 –ù¬∑–º, –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Ä–µ–º—ñ–Ω—å A42 (1 —à—Ç), –ø—ñ–¥—Ç—è–≥–Ω—É–ª–∏ —Ö–æ–º—É—Ç —à–ª–∞–Ω–≥–∞ √ò25, –¥–æ–ª–∏–ª–∏ –º–∞—Å–ª–æ HLP-46 ‚Äî 0,7 –ª. –í–∏–∫–æ–Ω–∞–Ω–æ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è —à–∫—ñ–≤—ñ–≤."></textarea>
      <div class="row" style="margin-top:6px">
        <input id="file" class="input" type="file" accept=".txt" style="max-width:320px">
        <button class="btn" id="loadFile">üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ TXT</button>
        <button class="btn good" id="extract">üîç –í–∏—Ç—è–≥–Ω—É—Ç–∏ —Å—É—Ç–Ω–æ—Å—Ç—ñ</button>
        <button class="btn secondary" id="clear">üßπ –û—á–∏—Å—Ç–∏—Ç–∏</button>
        <span id="stat" class="badge">–°—Ç–∞—Ç—É—Å: –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è</span>
      </div>

      <h3 style="margin-top:10px">üß† –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª</h3>
      <div class="row">
        <textarea id="dict" class="input" style="min-height:90px" placeholder="–°–ª–æ–≤–Ω–∏—á–æ–∫ –¥–µ—Ç–∞–ª–µ–π (—á–µ—Ä–µ–∑ –∫–æ–º—É): –ø—ñ–¥—à–∏–ø–Ω–∏–∫, —Ä–µ–º—ñ–Ω—å, —à–ª–∞–Ω–≥, —Ö–æ–º—É—Ç, –±–æ–ª—Ç, –≥–∞–π–∫–∞, —Ä–∞–¥—ñ–∞—Ç–æ—Ä, —Ñ—ñ–ª—å—Ç—Ä, –º–∞—Å–ª–æ, —Å–∞–ª—å–Ω–∏–∫"></textarea>
        <textarea id="tools" class="input" style="min-height:90px" placeholder="–°–ª–æ–≤–Ω–∏—á–æ–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤/–º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤: –∫–ª—é—á, –Ω–∞—Å–∞–¥–∫–∞, –≤–æ—Ä–æ—Ç–æ–∫, —Ñ—ñ–∫—Å–∞—Ç–æ—Ä —Ä—ñ–∑—å–±–∏, –º–∞—Å—Ç–∏–ª–æ, –º–∞—Å–ª–æ, –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–ª—å–º.–æ—á–∏—â—É–≤–∞—á"></textarea>
      </div>
      <small class="muted">–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è –æ–¥–∏–Ω–∏—Ü—ñ: —à—Ç, –ª, –º–ª, –∫–≥, –≥, –º, –º–º, –ù¬∑–º (Nm), lb¬∑ft (–∫–æ–Ω–≤–µ—Ä—Ç—É—î—Ç—å—Å—è —É –ù¬∑–º).</small>
    </div>

    <!-- –ü—Ä–∞–≤–∞ –∫–æ–ª–æ–Ω–∫–∞: —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è, —á–µ–∫ -->
    <div class="card">
      <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏—Ç—è–≥—É</h2>
      <table class="tbl" id="resTbl">
        <thead><tr><th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th><th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</th><th>–ö-—Å—Ç—å/–∑–Ω–∞—á–µ–Ω–Ω—è</th><th>–û–¥–∏–Ω–∏—Ü—ñ</th><th>–î–µ—Ç–∞–ª—ñ</th></tr></thead>
        <tbody id="resBody"><tr><td colspan="5" class="muted">–ù–∞—Ç–∏—Å–Ω–∏ ¬´–í–∏—Ç—è–≥–Ω—É—Ç–∏ —Å—É—Ç–Ω–æ—Å—Ç—ñ¬ª</td></tr></tbody>
      </table>

      <h2 style="margin-top:10px">üì¶ –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ä–æ–±—ñ—Ç</h2>
      <table class="tbl" id="specTbl">
        <thead><tr><th>–ü–æ–∑.</th><th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</th><th>–ö-—Å—Ç—å</th><th>–û–¥–∏–Ω–∏—Ü—ñ</th><th>Mom. –ù¬∑–º</th><th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th></tr></thead>
        <tbody id="specBody"><tr><td colspan="6" class="muted">–ë—É–¥–µ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –∑ –≤–∏—Ç—è–≥—É</td></tr></tbody>
      </table>

      <div class="row" style="margin-top:8px">
        <button class="btn" id="expCsv">üìÑ CSV (—Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è)</button>
        <button class="btn" id="expTxt">üíæ TXT (–∑–≤—ñ—Ç)</button>
        <button class="btn" id="print58">üñ®Ô∏è 58 –º–º –∫–≤–∏—Ç–æ–∫</button>
        <button class="btn secondary" id="qrGen">üîó QR (–ø–æ—Å–∏–ª–∞–Ω–Ω—è/–Ω–æ–º–µ—Ä)</button>
      </div>
      <div class="receipt" id="rc" hidden=""></div>
      <div class="canvasWrap" style="margin-top:8px"><canvas id="qr" width="220" height="220"></canvas></div>
      <small class="muted">QR –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —Å–µ—Ä–≤—ñ—Å <span class="mono">api.qrserver.com</span> (–º–æ–∂–µ –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç). –Ø–∫—â–æ –º–µ—Ä–µ–∂—ñ –Ω–µ–º–∞—î ‚Äî –Ω–∞ —á–µ–∫—É –±—É–¥–µ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –∫–æ–¥.</small>
    </div>
  </div>

  <div class="card">
    <h2>üß™ –ü—Ä–∏–∫–ª–∞–¥–∏/—à–≤–∏–¥–∫—ñ –≤—Å—Ç–∞–≤–∫–∏</h2>
    <div class="row">
      <button class="btn" data-snip="a">üìå –ü—Ä–∏–∫–ª–∞–¥ A</button>
      <button class="btn" data-snip="b">üìå –ü—Ä–∏–∫–ª–∞–¥ B</button>
      <button class="btn" data-snip="c">üìå –ü—Ä–∏–∫–ª–∞–¥ C</button>
      <span class="badge">–ü–æ—Ä–∞–¥–∞: –≤–∏–¥—ñ–ª—è—î–º–æ –º–æ–¥–µ–ª—ñ —Ç–∏–ø—É ¬´6204¬ª, ¬´A42¬ª, ¬´M10¬ª, –º–æ–º–µ–Ω—Ç–∏ ¬´45 –ù¬∑–º¬ª, –æ–±‚Äô—î–º–∏ ¬´0,7 –ª¬ª.</span>
    </div>
  </div>

  <div class="card">
    <h2>üéØ –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ –∫–æ–¥)</h2>
    <ol>
      <li><b>–ü–∞—Ä—Å–∏–Ω–≥:</b> –í—Å—Ç–∞–≤ 2 —Ä—ñ–∑–Ω—ñ –∞–∫—Ç–∏. –ó–±–µ—Ä–µ–∂–∏ <b>CSV</b> —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ. –ü–æ—Ä—ñ–≤–Ω—è–π –∫—Ä—É—Ç–Ω—ñ –º–æ–º–µ–Ω—Ç–∏ —É <span class="mono">–ù¬∑–º</span> (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ <span class="mono">lb¬∑ft</span> –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ).</li>
      <li><b>–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è:</b> –ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –ø—ñ–¥—Å—É–º–æ–≤–∞–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—ñ–≤–ø–∞–¥–∞—î –∑ –∞–∫—Ç–æ–º (–±–æ–ª—Ç–∏/–≥–∞–π–∫–∏/–ø—ñ–¥—à–∏–ø–Ω–∏–∫–∏). –ó–∞—Ñ—ñ–∫—Å—É–π –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ —É <b>TXT</b>.</li>
      <li><b>QR-–∫–≤–∏—Ç–æ–∫:</b> –ó–≥–µ–Ω–µ—Ä—É–π —á–µ–∫ 58 –º–º —ñ–∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ —Ñ–æ—Ç–æ —Ä–æ–±—ñ—Ç –∞–±–æ Google-–¥–∏—Å–∫. –î–æ–¥–∞–π <b>QR</b> —ñ –≤—ñ–¥–¥–∞—Ç–∏ –º–∞–π—Å—Ç—Ä—É –∑–º—ñ–Ω–∏.</li>
    </ol>
  </div>

  <div class="card">
    <h2>üîå –°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫—É (SVG)</h2>
    <svg viewBox="0 0 980 260" role="img" aria-label="–ê–∫—Ç –¢–û ‚Üí NLP ‚Üí —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è ‚Üí —á–µ–∫ 58 –º–º">
      <rect x="40" y="60" width="210" height="90" rx="12" fill="#0e2a47" stroke="#3b82f6"></rect>
      <text x="145" y="100" fill="#e5e7eb" font-size="14" text-anchor="middle">–ê–∫—Ç –¢–û (UA)</text>
      <text x="145" y="118" fill="#93c5fd" font-size="12" text-anchor="middle">—Ç–µ–∫—Å—Ç/—Ñ–∞–π–ª</text>

      <rect x="280" y="50" width="220" height="110" rx="12" fill="#14532d" stroke="#22c55e"></rect>
      <text x="390" y="92" fill="#dcfce7" font-size="14" text-anchor="middle">NLP-–≤–∏—Ç—è–≥</text>
      <text x="390" y="108" fill="#a7f3d0" font-size="12" text-anchor="middle">–ø—Ä–∞–≤–∏–ª–∞ + —Å–ª–æ–≤–Ω–∏—á–æ–∫</text>

      <rect x="530" y="50" width="220" height="110" rx="12" fill="#1f2937" stroke="#9ca3af"></rect>
      <text x="640" y="92" fill="#e5e7eb" font-size="14" text-anchor="middle">–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è</text>
      <text x="640" y="108" fill="#93c5fd" font-size="12" text-anchor="middle">–∞–≥—Ä–µ–≥–∞—Ü—ñ—è, –æ–¥–∏–Ω–∏—Ü—ñ</text>

      <rect x="780" y="50" width="160" height="110" rx="12" fill="#0b1a2f" stroke="#64748b"></rect>
      <text x="860" y="92" fill="#e5e7eb" font-size="14" text-anchor="middle">–ß–µ–∫ 58 –º–º</text>
      <text x="860" y="108" fill="#93c5fd" font-size="12" text-anchor="middle">QR / TXT</text>

      <line x1="250" y1="105" x2="280" y2="105" stroke="#93c5fd" stroke-width="3"></line>
      <line x1="500" y1="105" x2="530" y2="105" stroke="#22c55e" stroke-width="3"></line>
      <line x1="750" y1="105" x2="780" y2="105" stroke="#64748b" stroke-width="3"></line>

      <text x="490" y="200" fill="#fbbf24" font-size="12" text-anchor="middle">–ï–∫—Å–ø–æ—Ä—Ç: CSV, TXT; –¥—Ä—É–∫: 58 –º–º</text>
    </svg>
  </div>

  <div class="card">
    <h2>üìã –ü—ñ–¥—Å—É–º–æ–∫ –¥–ª—è –∑–≤—ñ—Ç—É</h2>
    <ul>
      <li>CSV ¬´–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è¬ª –∑ –ø–æ–ª—è–º–∏: <span class="mono">item,qty,unit,torque_Nm,note</span>.</li>
      <li>TXT –∑ —à–∞–ø–∫–æ—é –∞–∫—Ç–∞, –≤–∏—Ç—è–≥–Ω—É—Ç–∏–º–∏ —Å—É—Ç–Ω–æ—Å—Ç—è–º–∏, –ø—ñ–¥—Å—É–º–∫–∞–º–∏ —ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º/QR.</li>
      <li>58-–º–º —á–µ–∫ —ñ–∑ –æ—Å–Ω–æ–≤–Ω–∏–º–∏ –ø–æ–∑–∏—Ü—ñ—è–º–∏ —Ç–∞ QR (–æ–ø—Ü—ñ–π–Ω–æ).</li>
    </ul>
  </div>

  <div class="card">
    <h2>üìú –Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ –Ω–æ—Ç–∞—Ç–∫–∞</h2>
    <p class="muted small">–ü–µ—Ä—à—ñ —ñ–Ω–∂–µ–Ω–µ—Ä–Ω—ñ ¬´NLP¬ª —É 1980-—Ö —à—É–∫–∞–ª–∏ –∫–æ–¥–∏ –¥–µ—Ç–∞–ª–µ–π —É —Ç–µ–ª–µ—Ç–∞–π–ø-–∑–∞–ø–∏—Å–∞—Ö —Å–∫–ª–∞–¥—É. –°—å–æ–≥–æ–¥–Ω—ñ –±—Ä–∞—É–∑–µ—Ä –≤–∏—Ç—è–≥–∞—î —Å—É—Ç–Ω–æ—Å—Ç—ñ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é —ñ –∑–∞ —Ö–≤–∏–ª–∏–Ω—É –±—É–¥—É—î —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é —Ç–∞ —á–µ–∫ ‚Äî –ø—Ä—è–º–æ –≤ –∫–æ–º–ø‚Äô—é—Ç–µ—Ä–Ω–æ–º—É –∫–ª–∞—Å—ñ.</p>
  </div>

  <div class="footer">
    –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: <time datetime="2025-10-18">18.10.2025</time>. –ê–≤—Ç–æ—Ä: –°–µ—Ä–≥—ñ–π –ü–æ–ª—ñ—â—É–∫.
  </div>
</div>

<script>
// ===== –£—Ç–∏–ª—ñ—Ç–∏ =====
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
function stamp(){return new Date().toISOString().replace(/[:T]/g,'-').slice(0,16);}
function download(name,text,type="text/plain"){const b=new Blob([text],{type:type+";charset=utf-8"});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download=name;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(u);}

// ===== –°–ª–æ–≤–Ω–∏—á–∫–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º =====
const DEF_PARTS = '–ø—ñ–¥—à–∏–ø–Ω–∏–∫, —Ä–µ–º—ñ–Ω—å, —à–ª–∞–Ω–≥, —Ö–æ–º—É—Ç, –±–æ–ª—Ç, –≥–∞–π–∫–∞, —à–∞–π–±–∞, —Ñ—ñ–ª—å—Ç—Ä, —Ä–∞–¥—ñ–∞—Ç–æ—Ä, —Å–∞–ª—å–Ω–∏–∫, –º—É—Ñ—Ç–∞, —Ä–æ–ª–∏–∫, –∑—ñ—Ä–æ—á–∫–∞, —à–∫—ñ–≤, –ø–∞—Ç—Ä—É–±–æ–∫, –≤—Ç—É–ª–∫–∞, –ø—Ä–æ–∫–ª–∞–¥–∫–∞, –º–∞—Å–ª–æ, –º–∞—Å—Ç–∏–ª–æ, –≥–µ—Ä–º–µ—Ç–∏–∫';
const DEF_TOOLS = '–∫–ª—é—á, –Ω–∞—Å–∞–¥–∫–∞, –≤–æ—Ä–æ—Ç–æ–∫, –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–∏—á–Ω–∏–π, —Ñ—ñ–∫—Å–∞—Ç–æ—Ä —Ä—ñ–∑—å–±–∏, –º–∞—Å—Ç–∏–ª–æ, –º–∞—Å–ª–æ, –≥–µ—Ä–º–µ—Ç–∏–∫, –≥–∞–ª—å–º—ñ–≤–Ω–∏–π –æ—á–∏—â—É–≤–∞—á, —â—ñ—Ç–∫–∞, –≥–∞–Ω—á—ñ—Ä–∫–∞';

$('#dict').value = DEF_PARTS;
$('#tools').value = DEF_TOOLS;
$('#date').valueAsNumber = Date.now() - (new Date()).getTimezoneOffset()*60000;

// ===== –ü—Ä–∏–∫–ª–∞–¥–∏ =====
const SNIPS = {
  a:`–¢–û –∂–∞—Ç–∫–∏: –∑–∞–º—ñ–Ω–∞ –ø—ñ–¥—à–∏–ø–Ω–∏–∫–∞ 6204 (2 —à—Ç), —Ä–µ–º—ñ–Ω—å A42 (1 —à—Ç), –ø—ñ–¥—Ç—è–≥–Ω—É—Ç–∏ –±–æ–ª—Ç–∏ M10 ‚Äî 45 –ù¬∑–º, –¥–æ–ª–∏—Ç–∏ –º–∞—Å–ª–æ HLP-46 0,7 –ª.`,
  b:`–ú–µ—Ö–∞–Ω—ñ–∑–º –≤–∏—Å—ñ–≤—É: –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—ñ–¥—à–∏–ø–Ω–∏–∫ 6305 (1 —à—Ç); –∑–∞—Ç—è–≥–Ω–µ–Ω—ñ –≥–∞–π–∫–∏ –ú12 ‚Äî 65 –ù¬∑–º; —à–ª–∞–Ω–≥ √ò25 ‚Äî 2 –º; —Ö–æ–º—É—Ç —á–µ—Ä–≤'—è—á–Ω–∏–π 25-40 (2 —à—Ç).`,
  c:`–†–µ–¥—É–∫—Ç–æ—Ä: –∑–Ω—è—Ç–æ —à–∫—ñ–≤, –∑–∞–º—ñ–Ω–∞ —Å–∞–ª—å–Ω–∏–∫–∞ (1 —à—Ç), —Ä–µ–º—ñ–Ω—å B55 (1 —à—Ç). –ë–æ–ª—Ç–∏ –∫—Ä–∏—à–∫–∏ –ú8 ‚Äî 25 –ù¬∑–º. –î–æ–ª–∏—Ç–æ –º–∞—Å—Ç–∏–ª–æ –õ—ñ—Ç–æ–ª-24 ‚Äî 50 –≥.`
};
$$('button[data-snip]').forEach(b=>b.addEventListener('click',()=>{ const k=b.getAttribute('data-snip'); $('#src').value = SNIPS[k]; }));

// ===== –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è TXT =====
$('#loadFile').addEventListener('click', async ()=>{
  const f=$('#file').files[0]; if(!f) return alert('–û–±–µ—Ä—ñ—Ç—å TXT —Ñ–∞–π–ª');
  const t=await f.text(); $('#src').value=t; $('#stat').textContent='–°—Ç–∞—Ç—É—Å: —Ñ–∞–π–ª –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ';
});

// ===== –Ø–¥—Ä–æ NLP (–ø—Ä–∞–≤–∏–ª–∞ + –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è) =====
function tokenize(s){ return s.toLowerCase().replace(/[\,;]+/g,' , ').replace(/[()]/g,' ').split(/\s+/).filter(Boolean); }

function extractEntities(text, dictParts, dictTools){
  const out = {parts:[], torque:[], measure:[], tools:[], misc:[]};

  const t = text.replace(/[,;]+/g, ', ').replace(/\s+/g,' ').trim();

  // –ö—ñ–ª—å–∫—ñ—Å—Ç—å (—à—Ç/–ª/–º/–º–º/–≥/–∫–≥/–º–ª)
  // –Ω–∞–ø—Ä.: "2 —à—Ç", "0,7 –ª", "2 –º", "50 –≥", "25-40", "√ò25", "M10"
  const qtyRE = /(\d+(?:[.,]\d+)?)\s*(—à—Ç|–ª|–º–ª|–∫–≥|–≥|–º|–º–º)\b/gi;
  for(const m of t.matchAll(qtyRE)){
    out.measure.push({raw:m[0], val:parseFloat(m[1].replace(',','.')), unit:m[2]});
  }

  // –î–æ–≤–∂–∏–Ω–∏ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ —Ç–∏–ø—É "25-40" –¥–ª—è —Ö–æ–º—É—Ç—ñ–≤ (—à–∏—Ä–∏–Ω–∞/–¥—ñ–∞–º–µ—Ç—Ä)
  const rangeRE = /(\d{1,3})\s*-\s*(\d{1,3})\b/g;
  for(const m of t.matchAll(rangeRE)){
    out.measure.push({raw:m[0], val:`${m[1]}-${m[2]}`, unit:'–¥—ñ–∞–ø–∞–∑–æ–Ω'});
  }

  // –î—ñ–∞–º–µ—Ç—Ä–∏ √ò
  const diaRE = /[√ò√∏–§—Ñ]\s?(\d{1,3})\b/g;
  for(const m of t.matchAll(diaRE)){ out.measure.push({raw:m[0], val:parseFloat(m[1]), unit:'√ò–º–º'}); }

  // –ú–µ—Ç—Ä–∏—á–Ω–∞ —Ä—ñ–∑—å–±–∞ Mxx
  const threadRE = /\b[–úM]\s?(\d{1,2})(?:x\d+(?:\.\d+)?)?\b/gi;
  for(const m of t.matchAll(threadRE)){ out.misc.push({raw:m[0], type:'thread', size:'M'+m[1]}); }

  // –ü—ñ–¥—à–∏–ø–Ω–∏–∫–∏ —Ç–∏–ø—É 6204, 6305, —Ä–µ–º–µ–Ω—ñ A/B + –Ω–æ–º–µ—Ä
  const bearingRE = /\b(6\d{3}|2\d{3}|1\d{3})\b/g;
  for(const m of t.matchAll(bearingRE)){ out.parts.push({raw:m[0], kind:'–ø—ñ–¥—à–∏–ø–Ω–∏–∫', model:m[1]}); }

  const beltRE = /\b([abAB][0-9]{2,3})\b/g;
  for(const m of t.matchAll(beltRE)){ out.parts.push({raw:m[0], kind:'—Ä–µ–º—ñ–Ω—å', model:m[1].toUpperCase()}); }

  // –ú–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è: 45 –ù¬∑–º, 65 –ù–º, 30 Nm, 20 lb¬∑ft
  const tqNmRE = /(\d+(?:[.,]\d+)?)\s*(?:–Ω\s*[¬∑.]?\s*–º|–Ω–º|nm)\b/gi;
  for(const m of t.matchAll(tqNmRE)){
    const v=parseFloat(m[1].replace(',','.'));
    out.torque.push({raw:m[0], Nm:v});
  }
  const tqLbRE = /(\d+(?:[.,]\d+)?)\s*(?:lb\s*[¬∑.]?\s*ft|lbf[¬∑.]?ft)\b/gi;
  for(const m of t.matchAll(tqLbRE)){
    const v=parseFloat(m[1].replace(',','.')); const Nm=v*1.3558179483;
    out.torque.push({raw:m[0], Nm:Nm});
  }

  // –°–ª–æ–≤–Ω–∏—á–∫–æ–≤—ñ –¥–µ—Ç–∞–ª—ñ/—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
  const partsList = dictParts.split(',').map(s=>s.trim()).filter(Boolean);
  const toolsList = dictTools.split(',').map(s=>s.trim()).filter(Boolean);

  partsList.forEach(p=>{
    const re=new RegExp(`\\b${escapeReg(p)}\\b`,'gi');
    for(const m of t.matchAll(re)){ out.parts.push({raw:m[0], kind:p}); }
  });
  toolsList.forEach(u=>{
    const re=new RegExp(`\\b${escapeReg(u)}\\b`,'gi');
    for(const m of t.matchAll(re)){ out.tools.push({raw:m[0], tool:u}); }
  });

  // –ö—ñ–ª—å–∫—ñ—Å—Ç—å —É –¥—É–∂–∫–∞—Ö: "(2 —à—Ç)" –ø–æ—Ä—É—á –∑ –ø–æ–∑–∏—Ü—ñ—î—é
  const qtyCtxRE = /([^\.,;]+?)\s*\(\s*(\d+(?:[.,]\d+)?)\s*(—à—Ç)\s*\)/gi;
  for(const m of t.matchAll(qtyCtxRE)){
    out.parts.push({raw:m[0], kind:'–ø–æ–∑–∏—Ü—ñ—è', name:m[1].trim(), qty:parseFloat(m[2].replace(',','.')), unit:m[3]});
  }

  // –ú–∞—Å–ª–∞/—Ä—ñ–¥–∏–Ω–∏ –∑ —Ç–∏–ø–æ–º: HLP-46, –õ—ñ—Ç–æ–ª-24, 10W-40
  const oilRE = /\b(HLP-?46|–õ—ñ—Ç–æ–ª-?24|[0-9]{2}W-?[0-9]{2})\b/gi;
  for(const m of t.matchAll(oilRE)){ out.parts.push({raw:m[0], kind:'—Ä—ñ–¥–∏–Ω–∞/–º–∞—Å—Ç–∏–ª–æ', model:m[1]}); }

  return out;
}
function escapeReg(s){ return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }

// –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–¥–∏–Ω–∏—Ü—å ‚Üí SI
function normalizeUnits(measure){
  // –ü—Ä–∏–≤–µ–¥–µ–º–æ: –º–ª‚Üí–ª, –≥‚Üí–∫–≥, –º–º‚Üí–º (–∞–ª–µ –ø–æ–∫–∞–∑—É—î–º–æ "–º–º" —É –ø—Ä–∏–º—ñ—Ç—Ü—ñ)
  const out=[];
  for(const m of measure){
    if(m.unit==='–º–ª'){ out.push({qty:m.val/1000, unit:'–ª', note:m.raw}); }
    else if(m.unit==='–≥'){ out.push({qty:m.val/1000, unit:'–∫–≥', note:m.raw}); }
    else if(m.unit==='–º–º'){ out.push({qty:m.val/1000, unit:'–º', note:m.raw}); }
    else if(m.unit==='√ò–º–º'){ out.push({qty:m.val, unit:'√ò–º–º', note:m.raw}); }
    else if(m.unit==='–¥—ñ–∞–ø–∞–∑–æ–Ω'){ out.push({qty:m.val, unit:'–¥—ñ–∞–ø–∞–∑–æ–Ω', note:m.raw}); }
    else { out.push({qty:m.val, unit:m.unit, note:m.raw}); }
  }
  return out;
}

// –ü–æ–±—É–¥–æ–≤–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó: –∞–≥—Ä–µ–≥—É—î–º–æ –Ω–∞–∑–≤–∏/–º–æ–¥–µ–ª—ñ, –ø—ñ–¥–±–∏—Ä–∞—î–º–æ –∫-—Å—Ç—å, –¥–æ–¥–∞—î–º–æ Nm —è–∫—â–æ —î
function buildSpec(ents){
  // –ü–æ—à—É–∫ —è–≤–Ω–∏—Ö –ø–æ–∑–∏—Ü—ñ–π –∑ qty —É –∫—Ä—É–≥–ª–∏—Ö –¥—É–∂–∫–∞—Ö ‚Üí –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç
  const specMap = new Map(); // key -> item
  function addItem(name, qty=1, unit='—à—Ç', note=''){
    const key=(name+'|'+unit).toLowerCase();
    const cur=specMap.get(key)||{name, qty:0, unit, torqueNm:null, note:''};
    cur.qty += (typeof qty==='number'?qty:1);
    cur.note = (cur.note?cur.note+'; ':'') + (note||'');
    specMap.set(key,cur);
  }

  // 1) –ü—Ä—è–º—ñ –ø–æ–∑–∏—Ü—ñ—ó "(N —à—Ç)"
  (ents.parts||[]).filter(p=>p.kind==='–ø–æ–∑–∏—Ü—ñ—è' && p.qty).forEach(p=>{
    addItem(p.name, p.qty, p.unit||'—à—Ç', p.raw);
  });

  // 2) –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–æ–¥–µ–ª—ñ
  (ents.parts||[]).forEach(p=>{
    if(p.kind==='–ø—ñ–¥—à–∏–ø–Ω–∏–∫' && p.model) addItem('–ü—ñ–¥—à–∏–ø–Ω–∏–∫ '+p.model, 1, '—à—Ç', p.raw);
    if(p.kind==='—Ä–µ–º—ñ–Ω—å' && p.model) addItem('–†–µ–º—ñ–Ω—å '+p.model, 1, '—à—Ç', p.raw);
    if(p.kind==='—Ä—ñ–¥–∏–Ω–∞/–º–∞—Å—Ç–∏–ª–æ' && p.model) addItem('–ú–∞—Å—Ç–∏–ª–æ/—Ä—ñ–¥–∏–Ω–∞ '+p.model, 1, '—É–º–æ–≤.', p.raw);
  });

  // 3) –ó–∞–≥–∞–ª—å–Ω—ñ –∑–≥–∞–¥–∫–∏ —Å–ª–æ–≤–Ω–∏—á–∫–∞ ‚Üí —è–∫ –æ–¥–∏–Ω–∏—á–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó
  (ents.parts||[]).forEach(p=>{
    if(['–ø—ñ–¥—à–∏–ø–Ω–∏–∫','—Ä–µ–º—ñ–Ω—å','—à–ª–∞–Ω–≥','—Ö–æ–º—É—Ç','–±–æ–ª—Ç','–≥–∞–π–∫–∞','—à–∞–π–±–∞','—Ñ—ñ–ª—å—Ç—Ä','—Ä–∞–¥—ñ–∞—Ç–æ—Ä','—Å–∞–ª—å–Ω–∏–∫','–º—É—Ñ—Ç–∞','—Ä–æ–ª–∏–∫','–∑—ñ—Ä–æ—á–∫–∞','—à–∫—ñ–≤','–ø–∞—Ç—Ä—É–±–æ–∫','–≤—Ç—É–ª–∫–∞','–ø—Ä–æ–∫–ª–∞–¥–∫–∞','–º–∞—Å–ª–æ','–º–∞—Å—Ç–∏–ª–æ','–≥–µ—Ä–º–µ—Ç–∏–∫'].includes(p.kind) && !p.model && !p.name){
      addItem(cap(p.kind),1,'—à—Ç',p.raw);
    }
  });

  // 4) –ö—ñ–ª—å–∫—ñ—Å–Ω—ñ –º—ñ—Ä–Ω—ñ –æ–¥–∏–Ω–∏—Ü—ñ
  const meas = normalizeUnits(ents.measure||[]);
  meas.forEach(m=>{
    // —è–∫—â–æ —Ü–µ –º/–ª/–∫–≥ ‚Äî –¥–æ–¥–∞–º–æ —è–∫ –º–∞—Ç–µ—Ä—ñ–∞–ª/–≤–∏—Ç—Ä–∞—Ç—É
    if(['–ª','–∫–≥','–º'].includes(m.unit)){
      addItem('–ú–∞—Ç–µ—Ä—ñ–∞–ª/–≤–∏—Ç—Ä–∞—Ç–∞', m.qty, m.unit, m.note);
    }else if(m.unit==='—à—Ç'){
      addItem('–ü–æ–∑–∏—Ü—ñ—è (—à—Ç)', m.qty, '—à—Ç', m.note);
    }else if(m.unit==='√ò–º–º' || m.unit==='–¥—ñ–∞–ø–∞–∑–æ–Ω'){
      addItem('–ü–∞—Ä–∞–º–µ—Ç—Ä', 1, m.unit, m.note);
    }
  });

  // 5) –ú–æ–º–µ–Ω—Ç–∏ –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è ‚Üí –≥–ª–æ–±–∞–ª—å–Ω–æ/—Ä—è–¥–∫–æ–º ¬´–±–æ–ª—Ç–∏/–≥–∞–π–∫–∏¬ª
  let tqAvg=null;
  if(ents.torque?.length){
    const arr=ents.torque.map(t=>t.Nm);
    const sum=arr.reduce((s,x)=>s+x,0);
    tqAvg = sum/arr.length;
  }

  // 6) –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —É –º–∞—Å–∏–≤
  const rows=[...specMap.values()];
  // –í–±—É–¥—É—î–º–æ Nm —É —Ä—è–¥–∫–∏, —è–∫—â–æ –ø—Ä–µ–¥–º–µ—Ç –±–æ–ª—Ç–∏/–≥–∞–π–∫–∏
  rows.forEach(r=>{
    if(/–±–æ–ª—Ç|–≥–∞–π–∫/i.test(r.name) && tqAvg){ r.torqueNm = Math.round(tqAvg*10)/10; }
  });

  // –Ø–∫—â–æ –Ω–µ–º–∞ –∂–æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ ‚Äî –ø–æ–∫–∞–∂–µ–º–æ –∑–∞–≥–ª—É—à–∫—É –∑ Nm (–Ω–µ –ø–ª—É—Ç–∞—Ç–∏ –∑ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–∏–º–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏, –±–æ —Ü–µ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ)
  if(rows.length===0 && tqAvg!=null){
    rows.push({name:'–ú–æ–º–µ–Ω—Ç–∏ –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è (—Å–µ—Ä–µ–¥–Ω—î)', qty:Math.round(tqAvg*10)/10, unit:'–ù¬∑–º', torqueNm:null, note:'–æ–±—á–∏—Å–ª–µ–Ω–æ —ñ–∑ —Ç–µ–∫—Å—Ç—É'});
  }
  return rows;
}
function cap(s){ return s.charAt(0).toUpperCase()+s.slice(1); }

// ===== –í—ñ–¥–º–∞–ª—å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—å =====
function renderEntities(ents){
  const body=$('#resBody'); body.innerHTML='';
  const addRow=(cat,name,val,unit,det)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${cat}</td><td>${name||'‚Äî'}</td><td>${val??'‚Äî'}</td><td>${unit||'‚Äî'}</td><td class="small muted">${det||''}</td>`;
    body.appendChild(tr);
  };

  (ents.parts||[]).forEach(p=>{
    if(p.kind==='–ø–æ–∑–∏—Ü—ñ—è') addRow('–ø–æ–∑–∏—Ü—ñ—è', p.name, p.qty, p.unit||'—à—Ç', p.raw);
    else if(p.model) addRow(p.kind, p.kind+' '+p.model, 1, '—à—Ç', p.raw);
    else addRow(p.kind, cap(p.kind), 1, '—à—Ç', p.raw);
  });
  (ents.measure||[]).forEach(m=> addRow('–º—ñ—Ä–∞', m.raw, m.val, m.unit, ''));
  (ents.torque||[]).forEach(t=> addRow('–º–æ–º–µ–Ω—Ç', '–∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è', Math.round(t.Nm*10)/10, '–ù¬∑–º', t.raw));
  (ents.tools||[]).forEach(u=> addRow('—ñ–Ω—Å—Ç—Ä—É–º./–º–∞—Ç–µ—Ä—ñ–∞–ª', u.tool, 1, '—É–º–æ–≤.', u.raw));
  (ents.misc||[]).forEach(x=> addRow(x.type, x.size||x.raw, '', '', x.raw));

  if(!body.children.length){
    const tr=document.createElement('tr'); tr.innerHTML='<td colspan="5" class="muted">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –î–æ–¥–∞–π —Å–ª–æ–≤–∞ —É —Å–ª–æ–≤–Ω–∏—á–æ–∫ —ñ –ø–æ–≤—Ç–æ—Ä–∏.</td>'; body.appendChild(tr);
  }
}
function renderSpec(rows){
  const body=$('#specBody'); body.innerHTML='';
  if(!rows.length){ const tr=document.createElement('tr'); tr.innerHTML='<td colspan="6" class="muted">–ù–µ–º–∞—î –ø–æ–∑–∏—Ü—ñ–π</td>'; body.appendChild(tr); return; }
  rows.forEach((r,i)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${i+1}</td><td>${r.name}</td><td>${fmtq(r.qty)}</td><td>${r.unit}</td><td>${r.torqueNm??''}</td><td class="small muted">${r.note||''}</td>`;
    body.appendChild(tr);
  });
}
function fmtq(x){ return (typeof x==='number' && isFinite(x))? ((Math.round(x*100)/100).toString().replace('.',',')) : x; }

// ===== –ü–æ–¥—ñ—ó =====
$('#extract').addEventListener('click', ()=>{
  const text=$('#src').value||'';
  if(!text.trim()) return alert('–í—Å—Ç–∞–≤ —Ç–µ–∫—Å—Ç –∞–∫—Ç–∞ –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂ —Ñ–∞–π–ª');
  $('#stat').textContent='–°—Ç–∞—Ç—É—Å: –æ–±—Ä–æ–±–∫–∞...';

  const ents=extractEntities(text, $('#dict').value||DEF_PARTS, $('#tools').value||DEF_TOOLS);
  renderEntities(ents);

  const spec=buildSpec(ents);
  renderSpec(spec);

  last = {ents, spec};
  $('#stat').textContent='–°—Ç–∞—Ç—É—Å: –≥–æ—Ç–æ–≤–æ';
});
$('#clear').addEventListener('click', ()=>{
  $('#src').value=''; $('#resBody').innerHTML='<tr><td colspan="5" class="muted">‚Äî</td></tr>';
  $('#specBody').innerHTML='<tr><td colspan="6" class="muted">‚Äî</td></tr>';
  $('#rc').hidden=true; const ctx=$('#qr').getContext('2d'); ctx.clearRect(0,0,220,220);
});

let last=null;

// ===== –ï–∫—Å–ø–æ—Ä—Ç CSV/TXT =====
$('#expCsv').addEventListener('click', ()=>{
  if(!last?.spec?.length) return alert('–ù–µ–º–∞—î —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó');
  const head='pos,item,qty,unit,torque_Nm,note\n';
  const rows=last.spec.map((r,i)=>[i+1, csvq(r.name), r.qty, r.unit, r.torqueNm??'', csvq(r.note||'')].join(',')).join('\n');
  download('mechanic_para23_spec_'+stamp()+'.csv', head+rows+'\n','text/csv');
});
$('#expTxt').addEventListener('click', ()=>{
  if(!last) return alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö');
  const title=$('#title').value||'‚Äî', ord=$('#ord').value||'‚Äî', date=$('#date').value||'‚Äî';
  const lines=[
    '–ü–∞—Ä–∞ 23 ‚Äî NLP-–≤–∏—Ç—è–≥ –∑ –∞–∫—Ç–∞ –¢–û',
    `–†–æ–±–æ—Ç–∞: ${title}`,
    `–ù–∞—Ä—è–¥/‚Ññ: ${ord} | –î–∞—Ç–∞: ${date}`,
    '--- –í–∏—Ç—è–≥–Ω—É—Ç—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ ---',
    ...(last.ents.parts||[]).map(p=>`‚Ä¢ ${p.kind}: ${p.model||p.name||p.raw}`),
    ...(last.ents.torque||[]).map(t=>`‚Ä¢ –º–æ–º–µ–Ω—Ç: ${Math.round(t.Nm*10)/10} –ù¬∑–º (${t.raw})`),
    ...(last.ents.measure||[]).map(m=>`‚Ä¢ –º—ñ—Ä–∞: ${m.val} ${m.unit}`),
    ...(last.ents.tools||[]).map(u=>`‚Ä¢ —ñ–Ω—Å—Ç—Ä—É–º./–º–∞—Ç–µ—Ä—ñ–∞–ª: ${u.tool}`),
    '--- –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è ---',
    ...last.spec.map((r,i)=>`${i+1}. ${r.name} ‚Äî ${fmtq(r.qty)} ${r.unit}` + (r.torqueNm?` (–º–æ–º–µ–Ω—Ç ${r.torqueNm} –ù¬∑–º)`:'') + (r.note?` | ${r.note}`:'')),
    '--- –ü—Ä–∏–º—ñ—Ç–∫–∏ ---',
    '‚Ä¢ –ü–µ—Ä–µ–≤—ñ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –∫—Ä—É—Ç–Ω–∏—Ö –º–æ–º–µ–Ω—Ç—ñ–≤ —É –ù¬∑–º (–∞–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ lb¬∑ft).',
    '‚Ä¢ –ó–∞—Ñ—ñ–∫—Å—É–π –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ –º—ñ–∂ –∞–∫—Ç–æ–º —ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é.'
  ];
  download('mechanic_para23_report_'+stamp()+'.txt', lines.join('\n'));
});
function csvq(s){ return `"${(s??'').toString().replace(/"/g,'""')}"`; }

// ===== 58 –º–º —á–µ–∫ + QR =====
$('#print58').addEventListener('click', ()=>{
  const title=$('#title').value||'‚Äî', ord=$('#ord').value||'‚Äî', date=$('#date').value||'‚Äî';
  const top=[
    '=== –ß–ï–ö –¢–û (58–º–º) ===',
    '–†–æ–±–æ—Ç–∞: '+title,
    '–ù–∞—Ä—è–¥: '+ord,
    '–î–∞—Ç–∞: '+date,
    '--- –ü–æ–∑–∏—Ü—ñ—ó ---'
  ];
  const rows=(last?.spec||[]).slice(0,6).map(r=>`‚Ä¢ ${r.name} √ó ${fmtq(r.qty)} ${r.unit}${r.torqueNm?` | ${r.torqueNm} –ù¬∑–º`:''}`);
  const tail=['---','–ü—ñ–¥–ø–∏—Å –º–∞–π—Å—Ç—Ä–∞: __________',''];
  const txt=[...top, ...rows, ...tail].join('\n');
  const rc=$('#rc'); rc.hidden=false; rc.textContent=txt;
  download('para23_receipt_'+stamp()+'.txt', txt);
});

// –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR —á–µ—Ä–µ–∑ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π API (—è–∫—â–æ —î –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç)
$('#qrGen').addEventListener('click', ()=>{
  const ord=($('#ord').value||'').trim();
  const title=$('#title').value||'–¢–û';
  let data=prompt('–í—Å—Ç–∞–≤ —Ç–µ–∫—Å—Ç/URL –¥–ª—è QR (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî ‚Ññ –∑–∞—è–≤–∫–∏):', ord||title);
  if(data===null) return;
  data=data.trim()||title;
  // –°–ø—Ä–æ–±—É—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PNG —ñ –≤—ñ–¥–º–∞–ª—é–≤–∞—Ç–∏ –Ω–∞ canvas
  const url='https://api.qrserver.com/v1/create-qr-code/?size=220x220&margin=2&data='+encodeURIComponent(data);
  const img=new Image(); img.crossOrigin='anonymous';
  img.onload=()=>{ const ctx=$('#qr').getContext('2d'); ctx.clearRect(0,0,220,220); ctx.drawImage(img,0,0,220,220); };
  img.onerror=()=>{ // —è–∫—â–æ –æ—Ñ–ª–∞–π–Ω ‚Äî —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–æ–ª–±–µ–∫
    const ctx=$('#qr').getContext('2d'); ctx.clearRect(0,0,220,220);
    ctx.fillStyle='#e5e7eb'; ctx.font='14px ui-monospace'; ctx.fillText('QR offline', 62, 110);
    ctx.fillText((data.length>14?data.slice(0,14)+'‚Ä¶':data), 20, 130);
  };
  img.src=url;
});

// ===== –ö—ñ–Ω–µ—Ü—å =====
</script>


</body></html>