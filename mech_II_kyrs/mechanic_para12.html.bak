<!-- mechanic_para12.html
     –ü–ê–†–ê 12 (–∞—É–¥–∏—Ç–æ—Ä–Ω–æ) –¥–ª—è –º–µ—Ö–∞–Ω—ñ–∫—ñ–≤
     –¢–µ–º–∞: –†–Ü–ó–¨–ë–û–í–Ü –ó‚Äô–Ñ–î–ù–ê–ù–ù–Ø –¢–ê –ú–û–ú–ï–ù–¢ –ó–ê–¢–Ø–ì–£–í–ê–ù–ù–Ø ‚Äî
           —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –Ω–∞—Ç—è–≥—É, –º–æ–º–µ–Ω—Ç—É –∑–∞ K-—Ñ–∞–∫—Ç–æ—Ä–æ–º, –ø–æ–ø—Ä–∞–≤–∫–∞ –∫–ª—é—á–∞ –∑ –ø–æ–¥–æ–≤–∂—É–≤–∞—á–µ–º,
           –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è (—à–∞–±–ª–æ–Ω–∏ 4/5/6/8 –±–æ–ª—Ç—ñ–≤), —á–µ–∫-–ª–∏—Å—Ç, –∫–≤–∏—Ç–æ–∫ 58 –º–º, NFC, CSV.
     –§–æ–∫—É—Å: —Ç–µ–ª–µ—Ñ–æ–Ω–∏/–ü–ö; –±–µ–∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫; –≥–æ—Ç–æ–≤–æ –¥–ª—è GitHub Pages —Ç–∞ Moodle (iframe).
     –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è: —Ç–æ—Ä—Ü–µ–≤–∏–π/–¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–∏—á–Ω–∏–π –∫–ª—é—á (–¥–µ–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤–≤–æ–¥—è—Ç—å—Å—è –≤—Ä—É—á–Ω—É), –ø—Ä–∏–Ω—Ç–µ—Ä 58 –º–º (–æ–ø—Ü.), NFC-–º—ñ—Ç–∫–∏ (–æ–ø—Ü.).

     –©–æ –≤–º—ñ—î:
     ‚Ä¢ –û–±—á–∏—Å–ª—é—î –ø–ª–æ—â—É —Ä—ñ–∑—å–±–∏ As (–∫–æ–µ—Ñ. —Ñ–æ—Ä–º—É–ª–∏ –¥–ª—è –º–µ—Ç—Ä–∏—á–Ω–æ—ó —Ä—ñ–∑—å–±–∏), –¥–æ–≤—ñ–ª—å–Ω—ñ d/p, –∫–ª–∞—Å –º—ñ—Ü–Ω–æ—Å—Ç—ñ 8.8/10.9/12.9.
     ‚Ä¢ –í–∏–∑–Ω–∞—á–∞—î —Ü—ñ–ª—å–æ–≤–∏–π –Ω–∞—Ç—è–≥ F (—á–∞—Å—Ç–∫–∞ –≤—ñ–¥ –≥—Ä–∞–Ω–∏—Ü—ñ —Ç–µ–∫—É—á–æ—Å—Ç—ñ), –º–æ–º–µ–Ω—Ç T=K¬∑F¬∑d —ñ –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –¥–ª—è –ø–æ–¥–æ–≤–∂—É–≤–∞—á–∞ Tset=T¬∑L/(L+E).
     ‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó: –ù¬∑–º ‚Üî –∫–≥—Å¬∑–º; —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –ø–æ –º–∞—Å—Ç–∏–ª—É –π –∫—Ä–æ–∫–∞–º –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è (30% ‚Üí 60% ‚Üí 100%).
     ‚Ä¢ –ì–µ–Ω–µ—Ä—É—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è –¥–ª—è 4/5/6/8 –±–æ–ª—Ç—ñ–≤ (SVG), –∂—É—Ä–Ω–∞–ª, 58 –º–º –∫–≤–∏—Ç–æ–∫, NFC, CSV.
     –ü—Ä–∏–º—ñ—Ç–∫–∞: —Ç–µ–º–Ω—ñ –∫–ª—ñ—Ç–∏–Ω–∫–∏ –º–∞—é—Ç—å —Å–≤—ñ—Ç–ª–∏–π —Ç–µ–∫—Å—Ç (.dark) ‚Äî –¥–æ–±—Ä–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç —É Moodle.
-->
<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ü–∞—Ä–∞ 12 (–º–µ—Ö–∞–Ω—ñ–∫–∏) ‚Äî –ë–æ–ª—Ç–∏ —Ç–∞ –º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è: K-—Ñ–∞–∫—Ç–æ—Ä, –ø–æ–¥–æ–≤–∂—É–≤–∞—á, —à–∞–±–ª–æ–Ω–∏, —á–µ–∫, NFC, CSV</title>
<meta name="color-scheme" content="light dark">
<style>
  :root{
    --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --text:#e2e8f0;
    --accent:#22c55e; --accent-2:#60a5fa; --warn:#f59e0b; --bad:#ef4444; --good:#10b981; --line:#1f2937;
    --darkcell:#0b1324; --darkink:#e6eef9; --darkink2:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b1220,#111827 30%,#0b1220);color:var(--text);
       font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;line-height:1.55}
  .wrap{max-width:1100px;margin:0 auto;padding:24px 16px 64px}
  .badge{display:inline-block;padding:6px 10px;border:1px solid var(--line);background:#0b1220;border-radius:999px;
         font-size:12px;color:var(--muted);letter-spacing:.3px}
  h1{font-size:34px;margin:6px 0 12px;line-height:1.15;
     background:linear-gradient(90deg,#60a5fa,#22c55e);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  h2{font-size:22px;margin:28px 0 12px} h3{font-size:18px;margin:20px 0 8px;color:#cbd5e1}
  p{margin:10px 0}.small{font-size:12px;color:#9fb0c8}.muted{color:#93a3b5}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#dbeafe;text-decoration:none;cursor:pointer}
  .btn:hover{background:#0f1f39}
  .grid{display:grid;gap:12px}.g2{grid-template-columns:repeat(2,minmax(0,1fr))}.g3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:1000px){.g2,.g3{grid-template-columns:1fr}}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .card{background:linear-gradient(180deg,#0f172a,#0b1220);border:1px solid var(--line);border-radius:16px;padding:16px;margin:12px 0;box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .box{border:1px solid #223049;border-radius:12px;padding:12px;background:var(--darkcell);color:var(--darkink)}
  .ok{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
  .table{width:100%;border-collapse:separate;border-spacing:0;overflow:auto;border-radius:12px;border:1px solid #223049}
  .table th,.table td{padding:8px 10px;border-bottom:1px solid #1f2937;font-size:14px;vertical-align:top}
  .table thead th{background:#0c1629;color:#a5b4fc;text-align:left;position:sticky;top:0}
  .table tbody tr:nth-child(even){background:var(--darkcell);color:var(--darkink2)}
  .table td.dark,.table th.dark{background:var(--darkcell)!important;color:var(--darkink2)!important}
  .out{background:var(--darkcell);color:var(--darkink2);border:1px dashed #263042;padding:10px 12px;border-radius:10px;word-break:break-all}
  input[type="text"],input[type="number"],input[type="date"],select,textarea{width:100%;padding:8px 10px;border-radius:10px;border:1px solid #223049;background:#0d1a2e;color:#e6eef9}
  .ticket{width:58mm;background:#fff;color:#000;padding:6mm 4mm;border-radius:6px;box-shadow:0 0 0 1px #e5e7eb inset;font-family:"Courier New",ui-monospace,monospace}
  .ticket h4{margin:0 0 6px;font-size:13px;text-align:center}.ticket p{margin:2px 0;font-size:12px}.ticket .line{border-top:1px dashed #111;margin:6px 0}
  .ticket small{font-size:10px}
  html.embedded body{background:#fff;color:#111}
  html.embedded .card{background:#fff;border:1px solid #e5e7eb;box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial;background:none;color:#111}
  html.embedded .box{background:#f8fafc;color:#111}
  html.embedded .table tbody tr:nth-child(even){background:#f3f4f6;color:#111}
  @media print{@page{margin:4mm}.no-print{display:none!important}}
  .svgwrap{background:#0b1324;border:1px solid #223049;border-radius:12px;padding:8px}
</style>
</head>
<body>
<div class="wrap">
  <span class="badge">–ü–∞—Ä–∞ 12 ¬∑ –∞—É–¥–∏—Ç–æ—Ä–Ω–æ ¬∑ –º–µ—Ö–∞–Ω—ñ–∫–∏</span>
  <h1>üî© –ë–æ–ª—Ç–∏ —Ç–∞ –º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è: K-—Ñ–∞–∫—Ç–æ—Ä, –ø–æ–¥–æ–≤–∂—É–≤–∞—á, —à–∞–±–ª–æ–Ω–∏, —á–µ–∫, NFC, CSV</h1>

  <div class="card">
    <h2>üéØ –ú–µ—Ç–∞</h2>
    <p>
      –ó–∞ –ø–∞—Ä—É —Å—Ç—É–¥–µ–Ω—Ç–∏ –Ω–∞–≤—á–∞—Ç—å—Å—è <b>–ø—ñ–¥–±–∏—Ä–∞—Ç–∏ –º–æ–º–µ–Ω—Ç –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è</b> –ø—ñ–¥ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π <b>–Ω–∞—Ç—è–≥</b> –±–æ–ª—Ç–∞,
      –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ <b>–º–∞—Å—Ç–∏–ª–æ</b> (K-—Ñ–∞–∫—Ç–æ—Ä), —Ä–æ–±–∏—Ç–∏ <b>–ø–æ–ø—Ä–∞–≤–∫—É –¥–∏–Ω–∞–º–æ–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∑ –ø–æ–¥–æ–≤–∂—É–≤–∞—á–µ–º</b>,
      –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ <b>–ø—Ä–∞–≤–∏–ª—å–Ω—É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —Å—Ç—è–≥—É–≤–∞–Ω–Ω—è</b> —Ñ–ª–∞–Ω—Ü—ñ–≤/–¥–∏—Å–∫—ñ–≤, —Ñ–æ—Ä–º—É–≤–∞—Ç–∏ <b>–∂—É—Ä–Ω–∞–ª</b>,
      <b>–∫–≤–∏—Ç–æ–∫ 58 –º–º</b>, <b>NFC</b> —Ç–∞ <b>CSV</b>.
    </p>
    <p class="small">–§–æ—Ä–º—É–ª–∏ (–Ω–∞–≤—á–∞–ª—å–Ω–æ): As‚âà0.7854¬∑(d‚àí0.9382¬∑p)¬≤; F‚âàœÜ¬∑Sp¬∑As, –¥–µ œÜ=0.7‚Ä¶0.8; T=K¬∑F¬∑d (d ‚Äî –ù–û–ú–Ü–ù–ê–õ –¥—ñ–∞–º–µ—Ç—Ä–∞ —É –º–µ—Ç—Ä–∞—Ö);
      K: —Å—É—Ö–æ‚âà0.20, –æ–ª–∏–≤–∞‚âà0.16, –º–æ–ª—ñ–±–¥–µ–Ω‚âà0.12. –ü–æ–¥–æ–≤–∂—É–≤–∞—á (–≤ –ª—ñ–Ω—ñ—é): <span class="mono">Tset=T¬∑L/(L+E)</span>, –ø—Ä–∏ 90¬∞ ‚Äî –±–µ–∑ –∑–º—ñ–Ω.</p>
  </div>

  <!-- –í–•–Ü–î–ù–Ü –î–ê–ù–Ü –ë–û–õ–¢–ê -->
  <div class="card">
    <h2>üßÆ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –º–æ–º–µ–Ω—Ç—É —Ç–∞ –Ω–∞—Ç—è–≥—É</h2>
    <div class="grid g3">
      <div class="box">
        <h3>–ë–æ–ª—Ç / —É–º–æ–≤–∏</h3>
        <div class="row">
          <div style="flex:1"><label>–ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è (–¥–æ–≤—ñ–ª—å–Ω–æ)</label><input id="boltName" type="text" value="M12√ó1.75, —Ñ–ª–∞–Ω–µ—Ü—å –Ω–∞—Å–æ—Å–∞"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>d, –º–º (–Ω–æ–º—ñ–Ω–∞–ª)</label><input id="d" type="number" step="0.1" value="12"></div>
          <div style="flex:1"><label>–ö—Ä–æ–∫ p, –º–º</label><input id="p" type="number" step="0.01" value="1.75"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–ö–ª–∞—Å –º—ñ—Ü–Ω–æ—Å—Ç—ñ</label>
            <select id="grade">
              <option value="8.8">8.8 (Sp‚âà640 –ú–ü–∞)</option>
              <option value="10.9" selected>10.9 (Sp‚âà830 –ú–ü–∞)</option>
              <option value="12.9">12.9 (Sp‚âà970 –ú–ü–∞)</option>
            </select>
          </div>
          <div style="flex:1"><label>–ß–∞—Å—Ç–∫–∞ œÜ –≤—ñ–¥ Sp</label><input id="phi" type="number" step="0.05" value="0.75"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–ú–∞—Å—Ç–∏–ª–æ (K-—Ñ–∞–∫—Ç–æ—Ä)</label>
            <select id="kfact">
              <option value="0.20">—Å—É—Ö–æ (K‚âà0.20)</option>
              <option value="0.16" selected>–æ–ª–∏–≤–∞ (K‚âà0.16)</option>
              <option value="0.12">–º–æ–ª—ñ–±–¥–µ–Ω (K‚âà0.12)</option>
            </select>
          </div>
          <div style="flex:1"><label>–ö—Ä–æ–∫–∏ –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è</label>
            <select id="steps">
              <option value="30,60,100" selected>30% ‚Üí 60% ‚Üí 100%</option>
              <option value="40,80,100">40% ‚Üí 80% ‚Üí 100%</option>
              <option value="50,100">50% ‚Üí 100%</option>
            </select>
          </div>
        </div>
      </div>

      <div class="box">
        <h3>–ö–ª—é—á / –ø–æ–¥–æ–≤–∂—É–≤–∞—á</h3>
        <div class="row">
          <div style="flex:1"><label>–î–æ–≤–∂–∏–Ω–∞ –∫–ª—é—á–∞ L, –º–º</label><input id="L" type="number" step="1" value="300"></div>
          <div style="flex:1"><label>–ü–æ–¥–æ–≤–∂—É–≤–∞—á E, –º–º (–≤ –ª—ñ–Ω—ñ—é)</label><input id="E" type="number" step="1" value="0"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <div style="flex:1"><label>–û—Ä—ñ—î–Ω—Ç–∞—Ü—ñ—è</label>
            <select id="angle">
              <option value="inline" selected>–≤ –ª—ñ–Ω—ñ—é (–∑–º—ñ–Ω–∞ Tset)</option>
              <option value="90">–ø—Ä–∏–±–ª. 90¬∞ (–±–µ–∑ –∑–º—ñ–Ω–∏)</option>
            </select>
          </div>
          <div style="flex:1"><label>–ö-—Ç—å –±–æ–ª—Ç—ñ–≤, —à—Ç</label>
            <select id="nBolts">
              <option>4</option><option selected>6</option><option>5</option><option>8</option>
            </select>
          </div>
        </div>
      </div>

      <div class="box">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏</h3>
        <p>–ü–ª–æ—â–∞ —Ä—ñ–∑—å–±–∏ As: <b><span id="As">‚Äî</span></b> –º–º¬≤</p>
        <p>–ù–∞—Ç—è–≥ F: <b><span id="F">‚Äî</span></b> –∫–ù</p>
        <p>–ú–æ–º–µ–Ω—Ç T: <b><span id="T">‚Äî</span></b> –ù¬∑–º (<span id="Tkg">‚Äî</span> –∫–≥—Å¬∑–º)</p>
        <p>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª—é—á–∞ Tset: <b><span id="Tset">‚Äî</span></b> –ù¬∑–º</p>
        <p>–ö—Ä–æ–∫–∏: <b><span id="Tsteps">‚Äî</span></b> –ù¬∑–º</p>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="calc()">üîÅ –ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="preset()">üß™ –ü—Ä–∏–∫–ª–∞–¥</button>
          <button class="btn" onclick="copyCSV('csvBolt')">üìã CSV</button>
        </div>
        <div id="csvBolt" class="out" style="margin-top:8px">‚Äî</div>
      </div>
    </div>
  </div>

  <!-- –®–ê–ë–õ–û–ù –ü–û–°–õ–Ü–î–û–í–ù–û–°–¢–Ü -->
  <div class="card">
    <h2>üåÄ –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è (—Ñ–ª–∞–Ω–µ—Ü—å/–¥–∏—Å–∫)</h2>
    <div class="grid g2">
      <div class="box">
        <h3>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —à–∞–±–ª–æ–Ω—É</h3>
        <div class="row">
          <div style="flex:1"><label>–ö-—Ç—å –±–æ–ª—Ç—ñ–≤</label>
            <select id="nBolts2">
              <option>4</option><option>5</option><option selected>6</option><option>8</option>
            </select>
          </div>
          <div style="flex:1"><label>–î—ñ–∞–º–µ—Ç—Ä –∫–æ–ª–∞, –º–º</label><input id="pcd" type="number" step="1" value="180"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="drawPattern()">üéØ –ü–æ–±—É–¥—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="copyEl('seqText')">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Ä—è–¥–æ–∫</button>
        </div>
        <div id="seqText" class="out" style="margin-top:8px">‚Äî</div>
      </div>
      <div class="box svgwrap">
        <svg id="seqSVG" viewBox="0 0 300 300" width="100%" height="300" role="img" aria-label="–ü–æ—Ä—è–¥–æ–∫ –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è"></svg>
      </div>
    </div>
    <p class="small muted">–ü—Ä–∞–≤–∏–ª–æ: —Å—Ç—è–≥—É–≤–∞—Ç–∏ ‚Äú–∑—ñ—Ä–∫–æ—é/—Ö—Ä–µ—Å—Ç–æ–º‚Äù, —Ä—É—Ö–∞—é—á–∏—Å—å –≤—ñ–¥ —Ü–µ–Ω—Ç—Ä–∞ –¥–æ –ø–µ—Ä–∏—Ñ–µ—Ä—ñ—ó; –ø—ñ—Å–ª—è 100% ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∏–π –¥–æ—Ç—è–≥ —É —Ç–æ–º—É –∂ –ø–æ—Ä—è–¥–∫—É.</p>
  </div>

  <!-- –ñ–£–†–ù–ê–õ -->
  <div class="card">
    <h2>üìí –ñ—É—Ä–Ω–∞–ª –∑–∞—Ç—è–≥—É–≤–∞–Ω—å</h2>
    <div class="row">
      <button class="btn" onclick="addRow()">‚ûï –î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫</button>
      <button class="btn" onclick="presetRows()">üß™ –ü—Ä–∏–∫–ª–∞–¥</button>
      <button class="btn" onclick="copyCSV('csvLog')">üìã CSV (–∂—É—Ä–Ω–∞–ª)</button>
    </div>
    <div style="overflow:auto;margin-top:8px">
      <table class="table" id="tbl">
        <thead>
          <tr>
            <th>#</th>
            <th>–í—É–∑–æ–ª</th>
            <th>d√óp, –º–º</th>
            <th>–ö–ª–∞—Å</th>
            <th class="dark">K</th>
            <th class="dark">F, –∫–ù</th>
            <th class="dark">T, –ù¬∑–º</th>
            <th class="dark">Tset, –ù¬∑–º</th>
            <th>–ö—Ä–æ–∫–∏</th>
            <th>–ü—Ä–∏–º—ñ—Ç–∫–∞</th>
          </tr>
        </thead>
        <tbody id="body"></tbody>
      </table>
    </div>
    <div id="csvLog" class="out" style="margin-top:8px">‚Äî</div>
  </div>

  <!-- –ö–í–ò–¢–û–ö + NFC -->
  <div class="card">
    <h2>üßæ –ö–≤–∏—Ç–æ–∫ 58 –º–º —Ç–∞ NFC</h2>
    <div class="grid g2">
      <div class="box">
        <h3>NFC ‚Äî ‚ÄúBOLT CARD‚Äù</h3>
        <div class="row">
          <div style="flex:1"><label>–ú–∞—à–∏–Ω–∞/–≤—É–∑–æ–ª ID</label><input id="nfcId" type="text" value="TR-001/FLANGE-A"></div>
          <div style="flex:1"><label>–ö–æ–Ω—Ç–∞–∫—Ç</label><input id="nfcPhone" type="text" value="+380XXXXXXXXX"></div>
        </div>
        <div class="row" style="margin-top:6px">
          <button class="btn" onclick="buildNFC()">üß© –ó—ñ–±—Ä–∞—Ç–∏</button>
          <button class="btn" onclick="copyEl('nfcOut')">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
        </div>
        <div id="nfcOut" class="out">‚Äî</div>
      </div>

      <div class="box">
        <h3>–ö–≤–∏—Ç–æ–∫ ‚ÄúTORQUE CARD‚Äù</h3>
        <div class="row">
          <button class="btn" onclick="buildTicket()">üßæ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏</button>
          <button class="btn" onclick="window.print()">üñ®Ô∏è –î—Ä—É–∫</button>
        </div>
        <div class="ticket" id="ticket" style="margin-top:8px">
          <h4>TORQUE CARD</h4>
          <p id="tDate"><small>–î–∞—Ç–∞: ‚Äî</small></p>
          <div class="line"></div>
          <p><b>–í—É–∑–æ–ª:</b> <span id="tNode">‚Äî</span></p>
          <p><b>d√óp/–∫–ª–∞—Å:</b> <span id="tDP">‚Äî</span></p>
          <p><b>K/œÜ:</b> <span id="tK">‚Äî</span> / <span id="tPhi">‚Äî</span></p>
          <p><b>T / Tset:</b> <span id="tT">‚Äî</span> / <span id="tTset">‚Äî</span> –ù¬∑–º</p>
          <p><b>–ö—Ä–æ–∫–∏:</b> <span id="tSteps">‚Äî</span></p>
          <p><b>–ü–æ—Ä—è–¥–æ–∫:</b> <span id="tSeq">‚Äî</span></p>
          <div class="line"></div>
          <p><small id="tNote">–ü—Ä–∏–º.: ‚Äî</small></p>
        </div>
      </div>
    </div>
  </div>

  <!-- –•–Ü–î –†–û–ë–û–¢–ò + –û–¶–Ü–ù–Æ–í–ê–ù–ù–Ø -->
  <div class="card">
    <h2>ü™ú –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ (45‚Äì70 —Ö–≤)</h2>
    <ol>
      <li>–í–≤–µ–¥–∏ <b>d, p, –∫–ª–∞—Å</b>, –æ–±–µ—Ä–∏ <b>–º–∞—Å—Ç–∏–ª–æ (K)</b> —ñ <b>œÜ</b> ‚Äî –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–ü–µ—Ä–µ—Ä–∞—Ö—É–≤–∞—Ç–∏‚Äù.</li>
      <li>–ó–∞–¥–∞–π <b>L/E</b> –∫–ª—é—á–∞ ‚Äî –æ—Ç—Ä–∏–º–∞–π <b>Tset</b>; –æ–ø—Ä–µ–¥–µ–ª–∏ <b>–∫—Ä–æ–∫–∏ –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è</b>.</li>
      <li>–ó–≥–µ–Ω–µ—Ä—É–π <b>–ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å</b> –¥–ª—è 4/5/6/8 –±–æ–ª—Ç—ñ–≤ ‚Äî –¥–æ—Ç—Ä–∏–º—É–π—Å—è ‚Äú–∑—ñ—Ä–∫–∏‚Äù.</li>
      <li>–ó–∞–ø–æ–≤–Ω–∏ <b>–∂—É—Ä–Ω–∞–ª</b> (–º—ñ–Ω. 3 —Ä—è–¥–∫–∏), —Å—Ç–≤–æ—Ä–∏ <b>–∫–≤–∏—Ç–æ–∫</b>, <b>NFC</b> —Ç–∞ <b>CSV</b> (<span class="mono">Torque</span>).</li>
    </ol>
  </div>

  <div class="card">
    <h2>‚úÖ –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è (10 –±–∞–ª—ñ–≤)</h2>
    <table class="table">
      <thead><tr><th>–ö—Ä–∏—Ç–µ—Ä—ñ–π</th><th>–ë–∞–ª–∏</th></tr></thead>
      <tbody>
        <tr><td>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ As, F, T, Tset –∫–æ—Ä–µ–∫—Ç–Ω–∏–π</td><td>4</td></tr>
        <tr><td>–ü—Ä–∞–≤–∏–ª—å–Ω—ñ –∫—Ä–æ–∫–∏ —Ç–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —Å—Ç—è–≥—É–≤–∞–Ω–Ω—è</td><td>3</td></tr>
        <tr><td>–ñ—É—Ä–Ω–∞–ª (‚â•3 —Ä—è–¥–∫–∏) —ñ –∫–≤–∏—Ç–æ–∫/NFC/CSV</td><td>3</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
  // –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (Moodle iFrame)
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  const byId = id => document.getElementById(id);
  const rnd = (n,d=2)=>Number((+n).toFixed(d));
  const bodyEl = document.getElementById('body');

  // ====== –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –±–æ–ª—Ç–∞ ======
  function proofMPa(grade){
    if(grade==='8.8') return 640;
    if(grade==='10.9') return 830;
    if(grade==='12.9') return 970;
    return 700;
  }
  function areaStress(d, p){
    // As ‚âà 0.7854 ¬∑ (d ‚àí 0.9382¬∑p)^2  [–º–º¬≤], –¥–ª—è –º–µ—Ç—Ä–∏—á–Ω–æ—ó ISO coarse/metric (–Ω–∞–±–ª–∏–∂–µ–Ω–æ)
    return 0.7854 * Math.pow(d - 0.9382*p, 2);
  }
  function calc(){
    const name = byId('boltName').value.trim();
    const d = +byId('d').value||0;           // –º–º
    const p = +byId('p').value||0;           // –º–º
    const grade = byId('grade').value;
    const phi = +byId('phi').value||0.75;
    const K = +byId('kfact').value||0.16;
    const Lmm = +byId('L').value||300;
    const Emm = +byId('E').value||0;
    const angle = byId('angle').value;

    const As = areaStress(d,p);              // –º–º¬≤
    const Sp = proofMPa(grade);              // –ú–ü–∞ = –ù/–º–º¬≤
    const F = phi * Sp * As;                 // –ù
    const T = K * F * (d/1000);              // –ù¬∑–º (d —É –º–µ—Ç—Ä–∞—Ö)
    const Tkgm = T / 9.80665;                // –∫–≥—Å¬∑–º

    let Tset = T;
    if(angle==='inline' && (Lmm+Emm)>0) Tset = T * (Lmm/(Lmm+Emm)); // Tset=T¬∑L/(L+E)

    // –ö—Ä–æ–∫–∏
    const steps = byId('steps').value.split(',').map(x=>+x);
    const tSteps = steps.map(x=>rnd(Tset*x/100,1)).join(' / ');

    // –í–∏–≤—ñ–¥
    byId('As').textContent = rnd(As,1);
    byId('F').textContent  = rnd(F/1000,1);   // –∫–ù
    byId('T').textContent  = rnd(T,1);
    byId('Tkg').textContent= rnd(Tkgm,2);
    byId('Tset').textContent = rnd(Tset,1);
    byId('Tsteps').textContent = tSteps;

    // CSV
    const csv = [
      `BOLT|${name}|d=${d}mm|p=${p}mm|grade=${grade}|K=${K}|phi=${phi}`,
      `As=${rnd(As,1)}mm2|F=${rnd(F/1000,1)}kN|T=${rnd(T,1)}Nm|Tset=${rnd(Tset,1)}Nm|steps=${tSteps}`,
      `TOOL|L=${Lmm}mm|E=${Emm}mm|angle=${angle}`
    ].join('\n');
    byId('csvBolt').textContent = csv;

    return {name,d,p,grade,phi,K,As,F,T,Tkgm,Tset,tSteps,Lmm,Emm,angle};
  }
  function preset(){
    byId('boltName').value = 'M16√ó2.0, –∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —à–∫—ñ–≤–∞';
    byId('d').value = 16; byId('p').value = 2.0; byId('grade').value='10.9';
    byId('phi').value = 0.75; byId('kfact').value = 0.16;
    byId('L').value = 350; byId('E').value = 50; byId('angle').value='inline';
    byId('steps').value = '30,60,100';
    calc();
  }

  // ====== –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞—Ç—è–≥—É–≤–∞–Ω–Ω—è (SVG) ======
  function generateSequence(n){
    // –î–ª—è –ø–∞—Ä–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ ‚Äî –∫–ª–∞—Å–∏—á–Ω–∞ –∑—ñ—Ä–∫–∞; –¥–ª—è 5 ‚Äî ‚Äú–∑—ñ—Ä–∫–∞ –ø–µ–Ω—Ç‚Äù.
    const seq = [];
    if(n===4){ return [1,3,2,4]; }
    if(n===6){ return [1,4,2,5,3,6]; }
    if(n===8){ return [1,5,3,7,2,6,4,8]; }
    if(n===5){ return [1,3,5,2,4]; }
    // fallback: –ø—Ä–æ—Å—Ç–æ 1..n
    for(let i=1;i<=n;i++) seq.push(i);
    return seq;
  }
  function drawPattern(){
    const svg = byId('seqSVG'); svg.innerHTML='';
    const n = +byId('nBolts2').value||6;
    const D = +byId('pcd').value||180;
    const r = (Math.min(svg.clientWidth||300, 300) / 2) - 20;
    const cx=150, cy=150;
    // –∫–æ–ª–æ
    const circle = document.createElementNS('http://www.w3.org/2000/svg','circle');
    circle.setAttribute('cx',cx); circle.setAttribute('cy',cy); circle.setAttribute('r',r);
    circle.setAttribute('fill','none'); circle.setAttribute('stroke','#4b5563'); circle.setAttribute('stroke-width','2');
    svg.appendChild(circle);
    const seq = generateSequence(n);
    const positions=[];
    for(let i=0;i<n;i++){
      const a = -Math.PI/2 + i*(2*Math.PI/n);
      const x = cx + r*Math.cos(a), y = cy + r*Math.sin(a);
      positions.push({x,y});
    }
    // –ª—ñ–Ω—ñ—ó –ø–æ—Ä—è–¥–∫—É
    for(let i=0;i<seq.length-1;i++){
      const from = positions[seq[i]-1], to = positions[seq[i+1]-1];
      const ln = document.createElementNS('http://www.w3.org/2000/svg','line');
      ln.setAttribute('x1',from.x); ln.setAttribute('y1',from.y);
      ln.setAttribute('x2',to.x); ln.setAttribute('y2',to.y);
      ln.setAttribute('stroke','#60a5fa'); ln.setAttribute('stroke-width','2');
      svg.appendChild(ln);
    }
    // —Ç–æ—á–∫–∏ —Ç–∞ –Ω–æ–º–µ—Ä–∏
    positions.forEach((p,idx)=>{
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',p.x); c.setAttribute('cy',p.y); c.setAttribute('r',10);
      c.setAttribute('fill','#22c55e'); svg.appendChild(c);
      const t = document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('x',p.x); t.setAttribute('y',p.y+4);
      t.setAttribute('fill','#0b1220'); t.setAttribute('font-size','12');
      t.setAttribute('text-anchor','middle'); t.setAttribute('font-weight','700');
      t.textContent = (idx+1);
      svg.appendChild(t);
    });
    const seqText = '–ü–æ—Ä—è–¥–æ–∫: ' + seq.join(' ‚Üí ');
    byId('seqText').textContent = seqText;
    return {seqText};
  }

  // ====== –ñ—É—Ä–Ω–∞–ª ======
  function addRow(sample){
    const r = calc();
    const s = Object.assign({
      name: r.name, dp: `${r.d}√ó${r.p}`, grade: r.grade, K: r.K,
      F: rnd(r.F/1000,1), T: rnd(r.T,1), Tset: rnd(r.Tset,1), steps: r.tSteps, note:''
    }, sample||{});
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="idx">1</td>
      <td><input type="text" value="${s.name}"></td>
      <td>${s.dp}</td>
      <td>${s.grade}</td>
      <td class="dark">${s.K}</td>
      <td class="dark">${s.F}</td>
      <td class="dark">${s.T}</td>
      <td class="dark">${s.Tset}</td>
      <td>${s.steps}</td>
      <td><input type="text" value="${s.note}"></td>
    `;
    bodyEl.appendChild(tr);
    reindex(); buildCSVlog();
  }
  function reindex(){ [...bodyEl.querySelectorAll('tr')].forEach((tr,i)=>tr.querySelector('.idx').textContent=i+1); }
  function presetRows(){
    bodyEl.innerHTML='';
    calc();
    addRow({name:'–§–ª–∞–Ω–µ—Ü—å –Ω–∞—Å–æ—Å–∞', dp:'M12√ó1.75', grade:'10.9', K:0.16, F:'28.5', T:'54', Tset:'49', steps:'15.0 / 30.0 / 49.0', note:'–æ–ª–∏–≤–∞'});
    addRow({name:'–®–∫—ñ–≤ –∫–æ–ª—ñ–Ω–≤–∞–ª–∞', dp:'M16√ó2.0', grade:'10.9', K:0.16, F:'53.0', T:'136', Tset:'121', steps:'36.3 / 72.6 / 121.0', note:'–ø–æ–¥–æ–≤–∂—É–≤–∞—á 50 –º–º'});
    addRow({name:'–°—Ç—É–ø–∏—Ü—è –∫–æ–ª–µ—Å–∞', dp:'M14√ó2.0', grade:'10.9', K:0.16, F:'43.0', T:'120', Tset:'120', steps:'48.0 / 96.0 / 120.0', note:'–±–µ–∑ –ø–æ–¥–æ–≤–∂.'});
    buildCSVlog();
  }
  function buildCSVlog(){
    const lines = [...bodyEl.querySelectorAll('tr')].map(tr=>{
      const idx=tr.querySelector('.idx').textContent.trim();
      const node=tr.children[1].querySelector('input').value.trim();
      const dp = tr.children[2].textContent.trim();
      const grade = tr.children[3].textContent.trim();
      const K = tr.children[4].textContent.trim();
      const F = tr.children[5].textContent.trim();
      const T = tr.children[6].textContent.trim();
      const Tset = tr.children[7].textContent.trim();
      const steps = tr.children[8].textContent.trim();
      const note = tr.children[9].querySelector('input').value.trim();
      return [idx,node,dp,grade,K,F,T,Tset,steps,note].join(' | ');
    });
    byId('csvLog').textContent = lines.join('\n') || '‚Äî';
  }

  // ====== –ö–≤–∏—Ç–æ–∫ / NFC ======
  function buildTicket(){
    const r = calc();
    const seq = drawPattern();
    const d = new Date().toISOString().slice(0,10);
    byId('tDate').innerHTML = `<small>–î–∞—Ç–∞: ${d}</small>`;
    byId('tNode').textContent = r.name || '‚Äî';
    byId('tDP').textContent   = `${r.d}√ó${r.p}, ${r.grade}`;
    byId('tK').textContent    = r.K;
    byId('tPhi').textContent  = r.phi;
    byId('tT').textContent    = rnd(r.T,1);
    byId('tTset').textContent = rnd(r.Tset,1);
    byId('tSteps').textContent= r.tSteps;
    byId('tSeq').textContent  = byId('seqText').textContent || '‚Äî';
    byId('tNote').textContent = `L=${r.Lmm||byId('L').value}–º–º; E=${r.Emm||byId('E').value}–º–º; angle=${r.angle}`;
  }
  function buildNFC(){
    const r = calc();
    const seq = byId('seqText').textContent || '‚Äî';
    const text = [
      `BOLT_NFC`,
      `NODE:${r.name}`,
      `THREAD:M${r.d}x${r.p} grade ${r.grade}`,
      `K=${r.K}; phi=${r.phi}`,
      `T=${rnd(r.T,1)}Nm; Tset=${rnd(r.Tset,1)}Nm; steps=${r.tSteps}`,
      `SEQ:${seq}`,
      `CONTACT:${byId('nfcPhone').value}`,
      `STAMP:${new Date().toISOString().slice(0,19).replace('T',' ')}`
    ].join('\n');
    byId('nfcOut').textContent = text;
  }

  // ====== –£—Ç–∏–ª—ñ—Ç–∏ ======
  function copyCSV(id){
    const t = document.getElementById(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ CSV —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function copyEl(id){
    const t = byId(id).textContent.trim();
    if(!t||t==='‚Äî'){ alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö'); return; }
    navigator.clipboard.writeText(t).then(()=>flash('‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>flash('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function flash(msg){ const o=document.title; document.title=msg; setTimeout(()=>document.title=o,900); }

  // ====== –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è ======
  (function init(){
    calc();
    drawPattern();
    document.addEventListener('change', e=>{
      if(e.target.matches('input,select')) { calc(); }
      if(e.target.id==='nBolts2' || e.target.id==='pcd') drawPattern();
    });
  })();
</script>
</body>
</html>
