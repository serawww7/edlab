<!-- –ü–ê–†–ê 2 (–∞—É–¥–∏—Ç–æ—Ä–Ω–æ) –¥–ª—è –∞–≥—Ä–æ–Ω–æ–º—ñ–≤
     –¢–µ–º–∞: –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è: QR/NFC ‚Üí –º–æ–±—ñ–ª—å–Ω–∞ —Ñ–æ—Ä–º–∞ ‚Üí –¥–∞—à–±–æ—Ä–¥
     –§–æ–∫—É—Å: –º–∞–∫—Å–∏–º—É–º —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚Äî —Å–∫–∞–Ω–∏ QR/NFC, —Ñ–æ—Ç–æ –∑ –≥–µ–æ–º—ñ—Ç–∫–æ—é, –∫–æ—Ä–æ—Ç–∫—ñ –Ω–æ—Ç–∞—Ç–∫–∏, –º–∏—Ç—Ç—î–≤–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞.
     –ì–æ—Ç–æ–≤–æ –¥–ª—è —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –Ω–∞ GitHub Pages –∞–±–æ –≤—Å—Ç–∞–≤–∫–∏ –≤ Moodle —á–µ—Ä–µ–∑ iFrame. –ë–µ–∑ –¥—Ä—É–∫—É.
--><!DOCTYPE html><html lang="uk"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ü–∞—Ä–∞ 2 ‚Äî –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è: QR/NFC ‚Üí –º–æ–±—ñ–ª—å–Ω–∞ —Ñ–æ—Ä–º–∞ ‚Üí –¥–∞—à–±–æ—Ä–¥</title>
<meta name="color-scheme" content="light dark">
<style>
  :root{
    --bg:#0b1220; --card:#0f172a; --muted:#94a3b8; --text:#e2e8f0;
    --accent:#22c55e; --accent-2:#60a5fa; --warn:#f59e0b; --good:#10b981; --line:#1f2937;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:linear-gradient(180deg,#0b1220,#111827 30%,#0b1220);
    color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif; line-height:1.55
  }
  .wrap{max-width:980px; margin:0 auto; padding:24px 16px 64px}
  .badge{display:inline-block; padding:6px 10px; border:1px solid var(--line); background:#0b1220; border-radius:999px; font-size:12px; color:var(--muted); letter-spacing:.3px}
  h1{font-size:34px; margin:6px 0 12px; line-height:1.15;
     background:linear-gradient(90deg,#60a5fa,#22c55e); -webkit-background-clip:text; -webkit-text-fill-color:transparent}
  h2{font-size:22px; margin:28px 0 12px}
  h3{font-size:18px; margin:20px 0 8px; color:#cbd5e1}
  p{margin:10px 0}
  ul,ol{margin:8px 0 12px 22px}

  .card{background:linear-gradient(180deg,#0f172a,#0b1220); border:1px solid var(--line); border-radius:16px; padding:16px; margin:12px 0; box-shadow:0 6px 24px rgba(0,0,0,.25)}
  .grid{display:grid; gap:12px}
  .g2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .g3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:820px){.g2,.g3{grid-template-columns:1fr}}

  .kpi{display:flex; align-items:center; gap:10px; padding:10px 12px; border:1px dashed #263042; border-radius:12px}
  .kpi b{font-size:14px}
  .mono,code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace}
  .table{width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:12px; border:1px solid #223049}
  .table th,.table td{padding:10px 12px; border-bottom:1px solid #1f2937; font-size:14px; vertical-align:top}
  .table thead th{background:#0c1629; color:#a5b4fc; text-align:left}
  .table tbody tr:nth-child(even){background:#0b1324}
  .step{display:flex; gap:12px; align-items:flex-start; padding:10px 12px; border:1px solid #1f2937; border-radius:12px; background:#0b1324; margin:8px 0}
  .step .n{min-width:30px; height:30px; border-radius:8px; background:#0e1a2e; display:grid; place-items:center; color:#a5b4fc; font-weight:700}
  .pill{display:inline-block; padding:4px 10px; border:1px solid #223049; border-radius:999px; font-size:12px; color:#a5b4fc; background:#0d1a2e; margin-right:6px}
  .btn{display:inline-block; padding:10px 14px; border-radius:10px; border:1px solid #223049; background:#0d1a2e; color:#dbeafe; text-decoration:none; cursor:pointer}
  .btn:hover{background:#0f1f39}
  .muted{color:#93a3b5}
  .crit{color:#f87171}
  .ok{color:#10b981}
  .bar{height:18px;border-radius:6px;background:#0b1324;border:1px solid #223049;overflow:hidden}
  .bar > div{height:100%;background:#60a5fa}
  .soft{color:#cbd5e1}
  .hint{font-size:12px;color:#9fb0c8;margin-top:4px}
  .no-print{display:block}

  .progress{height:10px;border-radius:999px;background:#0b1324;overflow:hidden;border:1px solid #223049}
  .progress > div{height:100%;background:linear-gradient(90deg,#60a5fa,#22c55e)}
  .badgeNum{display:inline-grid;place-items:center;min-width:34px;height:28px;border-radius:8px;background:#0e1a2e;color:#a5b4fc;font-weight:700}

  /* –í–±—É–¥–æ–≤–∞–Ω–æ (iframe) ‚Üí —Å—Ç—Ä–∏–º–∞–Ω–∏–π –≤–∏–≥–ª—è–¥ */
  html.embedded body{background:#fff; color:#111}
  html.embedded .card{background:#fff; border:1px solid #e5e7eb; box-shadow:none}
  html.embedded h1{-webkit-text-fill-color:initial; background:none; color:#111}
  html.embedded .btn{background:#111827; color:#fff; border-color:#111827}

  /* –ú–∞–ª–µ–Ω—å–∫—ñ —É—Ç–∏–ª—ñ—Ç–∏ */
  .flex{display:flex; gap:10px; flex-wrap:wrap}
  .field{display:flex; gap:8px; margin:6px 0}
  .field label{min-width:150px; color:#cbd5e1}
  .field input, .field select{flex:1; padding:8px 10px; border-radius:10px; border:1px solid #223049; background:#0d1a2e; color:#e5e7eb}

  /* –ú—ñ–Ω—ñ-–º–∞–ø–∞ 5√ó5 */
  .mini-map{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
  .cell{height:42px;border:1px solid #223049;border-radius:8px;display:grid;place-items:center;cursor:pointer;background:#0b1324;color:#e2e8f0;font-size:12px}
  .cell.norma{background:#0f2a1f;color:#a7f3d0}
  .cell.weed{background:#2a201f;color:#fecaca}
  .cell.pest{background:#2a1f29;color:#fbcfe8}
  .cell.wet{background:#1f242a;color:#bfdbfe}
  .cell.dry{background:#2a2620;color:#fde68a}
  .cell.other{background:#1f1f2a;color:#ddd6fe}

  @media print{
    @page{ margin:12mm }
    .no-print{ display:none !important }
  }
</style>
<meta name="description" content="–ù–∞–≤—á–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —à–≤–∏–¥–∫–æ –∑–±–∏—Ä–∞—Ç–∏ –ø–æ–ª—å–æ–≤—ñ –¥–∞–Ω—ñ –∑—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ QR/NFC —Ç–∞ –º–æ–±—ñ–ª—å–Ω—É —Ñ–æ—Ä–º—É –∑ —Ñ–æ—Ç–æ+–≥–µ–æ–º—ñ—Ç–∫–æ—é, –∞ —Ç–∞–∫–æ–∂ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–∞–±–ª–∏"><link rel="canonical" href="https://edlab.pp.ua/agro_II_kyrs/agro_para2.html"><meta property="og:type" content="article"><meta property="og:title" content="üå± –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è: QR/NFC ‚Üí –º–æ–±—ñ–ª—å–Ω–∞ —Ñ–æ—Ä–º–∞ ‚Üí —Ç–∞–±–ª–∏—Ü—è/–¥–∞—à–±–æ—Ä–¥"><meta property="og:description" content="–ù–∞–≤—á–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —à–≤–∏–¥–∫–æ –∑–±–∏—Ä–∞—Ç–∏ –ø–æ–ª—å–æ–≤—ñ –¥–∞–Ω—ñ –∑—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ QR/NFC —Ç–∞ –º–æ–±—ñ–ª—å–Ω—É —Ñ–æ—Ä–º—É –∑ —Ñ–æ—Ç–æ+–≥–µ–æ–º—ñ—Ç–∫–æ—é, –∞ —Ç–∞–∫–æ–∂ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–∞–±–ª–∏"><meta property="og:url" content="https://edlab.pp.ua/agro_II_kyrs/agro_para2.html"><script type="application/ld+json">{"@context":"https://schema.org","@type":"LearningResource","name":"üå± –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è: QR/NFC ‚Üí –º–æ–±—ñ–ª—å–Ω–∞ —Ñ–æ—Ä–º–∞ ‚Üí —Ç–∞–±–ª–∏—Ü—è/–¥–∞—à–±–æ—Ä–¥","description":"–ù–∞–≤—á–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —à–≤–∏–¥–∫–æ –∑–±–∏—Ä–∞—Ç–∏ –ø–æ–ª—å–æ–≤—ñ –¥–∞–Ω—ñ –∑—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ QR/NFC —Ç–∞ –º–æ–±—ñ–ª—å–Ω—É —Ñ–æ—Ä–º—É –∑ —Ñ–æ—Ç–æ+–≥–µ–æ–º—ñ—Ç–∫–æ—é, –∞ —Ç–∞–∫–æ–∂ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–∞–±–ª–∏","inLanguage":"uk","educationalLevel":"college","url":"https://edlab.pp.ua/agro_II_kyrs/agro_para2.html","provider":{"@type":"Organization","name":"EDLab"}}</script></head>
<body>
  <div class="wrap">
    <span class="badge">–ü–∞—Ä–∞ 2 ¬∑ –õ–ü–ó ¬∑ –∞–≥—Ä–æ–Ω–æ–º–∏</span>
    <h1>üå± –ü–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è: QR/NFC ‚Üí –º–æ–±—ñ–ª—å–Ω–∞ —Ñ–æ—Ä–º–∞ ‚Üí —Ç–∞–±–ª–∏—Ü—è/–¥–∞—à–±–æ—Ä–¥</h1>

    <div class="card">
      <h2>üéØ –ú–µ—Ç–∞</h2>
      <p>
        –ù–∞–≤—á–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —à–≤–∏–¥–∫–æ –∑–±–∏—Ä–∞—Ç–∏ –ø–æ–ª—å–æ–≤—ñ –¥–∞–Ω—ñ <b>–∑—ñ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞</b> —á–µ—Ä–µ–∑ <b>QR/NFC</b> —Ç–∞
        <b>–º–æ–±—ñ–ª—å–Ω—É —Ñ–æ—Ä–º—É</b> –∑ —Ñ–æ—Ç–æ+–≥–µ–æ–º—ñ—Ç–∫–æ—é, –∞ —Ç–∞–∫–æ–∂ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —Ç–∞–±–ª–∏—Ü—é –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É.
      </p>
      <div class="grid g2">
        <div class="kpi"><span>üìç</span><div><b>–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–æ–ª—è</b><br>QR –∞–±–æ NFC-—Å—Ç—ñ–∫–µ—Ä –Ω–∞ —Ç–∞–±–ª–∏—á—Ü—ñ/–ø–∞–ø—Ü—ñ</div></div>
        <div class="kpi"><span>üì∑</span><div><b>–§–æ—Ç–æ –∑ EXIF</b><br>–≥–µ–æ–º—ñ—Ç–∫–∞ + —á–∞—Å + –∫–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å —Å—Ç–∞–Ω—É</div></div>
      </div>
      <div class="grid g3" style="margin-top:8px">
        <div class="kpi"><span>‚ö°</span><div><b>–®–≤–∏–¥–∫—ñ—Å—Ç—å —Ä—ñ—à–µ–Ω—å</b><br>–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∏–π –¥–∞—à–±–æ—Ä–¥ –ø—ñ–¥–∫–∞–∑—É—î –¥–µ –¥—ñ—è—Ç–∏ –ø–µ—Ä—à–æ—á–µ—Ä–≥–æ–≤–æ</div></div>
        <div class="kpi"><span>üéØ</span><div><b>–¢–æ—á–Ω—ñ—Å—Ç—å —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω—å</b><br>—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ –º—ñ–Ω—ñ–º—ñ–∑—É—î ¬´–≤—ñ–ª—å–Ω—ñ —Ç—Ä–∞–∫—Ç—É–≤–∞–Ω–Ω—è¬ª</div></div>
        <div class="kpi"><span>üß†</span><div><b>–ù–∞–≤–∏—á–∫–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∞–Ω–∏–º–∏</b><br>–≤—ñ–¥ –∑–±–æ—Ä—É ‚Üí –¥–æ –ø—Ä–æ—Å—Ç–∏—Ö –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –≤–∏—Å–Ω–æ–≤–∫—ñ–≤</div></div>
      </div>
      <p class="muted">–ö–æ—Ä–∏—Å—Ç—å: —Ä–µ–∞–ª—å–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ <i>–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É</i>, <i>–≥–µ–æ–ø—ñ–¥–ø–∏—Å–∞–Ω–∏—Ö –º–µ–¥—ñ–∞</i> —ñ <i>—à–≤–∏–¥–∫–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É</i> ‚Äî 1:1 –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è —É —Å–µ–∑–æ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è.</p>
    </div>

    <div class="card">
      <h2>üéÆ –ú—ñ—Å—ñ—ó –ø–∞—Ä–∏ (—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤)</h2>
      <div class="step"><div class="n">1</div><div><label><input type="checkbox" class="mission" data-id="m1"> –ó—ñ–±—Ä–∞—Ç–∏ URL —Ñ–æ—Ä–º–∏ –∑ –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º –¥–ª—è —Å–≤–æ–≥–æ –∫–æ–¥—É –ø–æ–ª—è</label><div class="hint">–ü—ñ–¥–≥–æ—Ç—É—î –æ—Å–Ω–æ–≤—É –¥–ª—è QR/NFC.</div></div></div>
      <div class="step"><div class="n">2</div><div><label><input type="checkbox" class="mission" data-id="m2"> –î–æ–¥–∞—Ç–∏ 3+ –∑–∞–ø–∏—Å–∏ —É —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ (—Ä—ñ–∑–Ω—ñ –ø–æ–ª—è/—Å—Ç–∞–Ω–∏)</label><div class="hint">–¢—Ä–µ–Ω—É—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.</div></div></div>
      <div class="step"><div class="n">3</div><div><label><input type="checkbox" class="mission" data-id="m3"> –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –¥–∞—à–±–æ—Ä–¥ —ñ —Å—Ñ–æ—Ä–º—É–ª—é–≤–∞—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫</label><div class="hint">1‚Äì2 —Ä–µ—á–µ–Ω–Ω—è: ¬´–¥–µ –ø—Ä–æ–±–ª–µ–º–∞¬ª —ñ ¬´—â–æ —Ä–æ–±–∏–º–æ –∑–∞–≤—Ç—Ä–∞¬ª.</div></div></div>
      <div class="progress" style="margin-top:10px"><div id="progressBar" style="width:0%"></div></div>
    </div>

    <div class="card">
      <h2>üß∞ –û–±–ª–∞–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ü–ó</h2>
      <ul>
        <li>–°–º–∞—Ä—Ç—Ñ–æ–Ω –∑ –∫–∞–º–µ—Ä–æ—é —Ç–∞ (–æ–ø—Ü—ñ–π–Ω–æ) NFC.</li>
        <li>Google Form (–¥–ª—è –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö) + Google Sheets (–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ/–¥–∞—à–±–æ—Ä–¥).</li>
        <li>QR-—Å—Ç—ñ–∫–µ—Ä–∏ <i>–∞–±–æ</i> NFC-–º—ñ—Ç–∫–∏ (–Ω–∞–∫–ª–µ–π–∫–∏/–±—Ä–µ–ª–æ–∫–∏).</li>
      </ul>
      <p class="muted">–Ø–∫—â–æ NFC –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π QR. –ì–æ–ª–æ–≤–Ω–µ ‚Äî —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π URL —Ñ–æ—Ä–º–∏ –∑ –∫–æ–¥–æ–º –ø–æ–ª—è.</p>
    </div>

    <div class="card">
      <h2>üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–±—ñ–ª—å–Ω–æ—ó —Ñ–æ—Ä–º–∏ (Google Form)</h2>
      <table class="table">
        <thead><tr><th>#</th><th>–ü–æ–ª–µ</th><th>–¢–∏–ø</th><th>–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è</th></tr></thead>
        <tbody>
          <tr><td>1</td><td><b>–ö–æ–¥ –ø–æ–ª—è</b> (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, F-01)</td><td>Short text (–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)</td><td>–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –ø–æ–ª—è (–ø—ñ–¥—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è —á–µ—Ä–µ–∑ QR/NFC).</td></tr>
          <tr><td>2</td><td><b>–û–ø–µ—Ä–∞—Ç–æ—Ä</b> (–ü–Ü–ë)</td><td>Short text</td><td>–•—Ç–æ —Ä–æ–±–∏–≤ –æ–≥–ª—è–¥.</td></tr>
          <tr><td>3</td><td><b>–°—Ç–∞–Ω</b></td><td>Dropdown/Multiple choice</td><td>¬´–Ω–æ—Ä–º–∞ / –±—É—Ä‚Äô—è–Ω / —à–∫—ñ–¥–Ω–∏–∫ / –ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è / –∑–∞—Å—É—Ö–∞ / —ñ–Ω—à–µ¬ª.</td></tr>
          <tr><td>4</td><td><b>–ö–æ–º–µ–Ω—Ç–∞—Ä</b></td><td>Paragraph</td><td>–ö–æ—Ä–æ—Ç–∫–æ: —â–æ —Å–∞–º–µ –ø–æ–º—ñ—á–µ–Ω–æ.</td></tr>
          <tr><td>5</td><td><b>–§–æ—Ç–æ (1‚Äì3 —à—Ç.)</b></td><td>File upload</td><td>–ó —É–≤—ñ–º–∫–Ω–µ–Ω–æ—é –≥–µ–æ–º—ñ—Ç–∫–æ—é (EXIF).</td></tr>
          <tr><td>6</td><td><b>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏</b></td><td>Short text (–Ω–µ–æ–±–æ–≤.)</td><td>–Ø–∫—â–æ EXIF –Ω–µ–º–∞ ‚Äî –≤—Å—Ç–∞–≤ —à–∏—Ä–æ—Ç—É/–¥–æ–≤–≥–æ—Ç—É –≤—Ä—É—á–Ω—É.</td></tr>
        </tbody>
      </table>
      <p class="muted">–£–≤—ñ–º–∫–Ω–∏ –≤ –ö–∞–º–µ—Ä—ñ ¬´–ì–µ–æ–º—ñ—Ç–∫–∞/Location tags¬ª. –ù–∞ iOS ‚Äî –¥–æ–∑–≤–æ–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—é –¥–ª—è –ö–∞–º–µ—Ä–∏.</p>
    </div>

    <div class="card">
      <h2>üß™ –•—ñ–¥ —Ä–æ–±–æ—Ç–∏ (45‚Äì60 —Ö–≤)</h2>
      <div class="step"><div class="n">1</div><div><b>–ì–æ—Ç—É—î–º–æ –∫–æ–¥ –ø–æ–ª—è</b> (5 —Ö–≤). –°—Ç–≤–æ—Ä—ñ—Ç—å —Å–ø–∏—Å–æ–∫: <span class="mono">F-01, F-02, F-03‚Ä¶</span> –û–±–µ—Ä–∏ —Å–≤–æ—î –ø–æ–ª–µ.</div></div>
      <div class="step"><div class="n">2</div><div><b>URL –∑ –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è–º</b> (8‚Äì10 —Ö–≤). –£ Google Form –≤—ñ–¥–∫—Ä–∏–π ¬´–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥¬ª ‚Üí —Å–∫–æ–ø—ñ—é–π URL ‚Üí –¥–æ–¥–∞–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –∫–æ–¥—É –ø–æ–ª—è.</div></div>
      <div class="step"><div class="n">3</div><div><b>QR –∞–±–æ NFC</b> (10 —Ö–≤). –ó–≥–µ–Ω–µ—Ä—É–π QR –∞–±–æ –∑–∞–ø–∏—à–∏ URL –≤ NFC-–º—ñ—Ç–∫—É ‚Üí –Ω–∞–∫–ª–µ–π –Ω–∞ ¬´–ø–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—è¬ª ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä —Å–∫–∞–Ω.</div></div>
      <div class="step"><div class="n">4</div><div><b>–ü–æ–ª—å–æ–≤–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è (—ñ–º—ñ—Ç–∞—Ü—ñ—è)</b> (10‚Äì15 —Ö–≤). –°–∫–∞–Ω ‚Üí —Ñ–æ—Ä–º–∞ –∑ –∫–æ–¥–æ–º –ø–æ–ª—è ‚Üí 1‚Äì3 —Ñ–æ—Ç–æ + –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä ‚Üí –ù–∞–¥—ñ—Å–ª–∞—Ç–∏.</div></div>
      <div class="step"><div class="n">5</div><div><b>–í—ñ–¥–ø–æ–≤—ñ–¥—ñ —É Sheets</b> (10 —Ö–≤). ¬´–í—ñ–¥–ø–æ–≤—ñ–¥—ñ¬ª ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é ‚Üí —É–º–æ–≤–Ω–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è ¬´–∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Å—Ç–∞–Ω—ñ–≤¬ª.</div></div>
      <div class="step"><div class="n">6</div><div><b>–ú—ñ–Ω—ñ-–¥–∞—à–±–æ—Ä–¥</b> (5‚Äì8 —Ö–≤). –î—ñ–∞–≥—Ä–∞–º–∞ ¬´–°—Ç–∞–Ω –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏¬ª + —Ç–∞–±–ª–∏—Ü—è ¬´–û—Å—Ç–∞–Ω–Ω—ñ –æ–≥–ª—è–¥–∏¬ª.</div></div>
    </div>

    <div class="card">
      <h2>üîó –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä URL –¥–ª—è QR/NFC (–ª–æ–∫–∞–ª—å–Ω–æ)</h2>
      <p class="muted">–í–≤–µ–¥–∏ –±–∞–∑–æ–≤—É –∞–¥—Ä–µ—Å—É —Å–≤–æ—î—ó —Ñ–æ—Ä–º–∏ —ñ –∫–æ–¥ –ø–æ–ª—è ‚Äî –æ—Ç—Ä–∏–º–∞—î—à –≥–æ—Ç–æ–≤–∏–π URL –¥–ª—è QR/NFC.</p>
      <div class="field">
        <label for="formUrl">–ë–∞–∑–æ–≤–∏–π URL —Ñ–æ—Ä–º–∏ (viewform)</label>
        <input id="formUrl" type="text" value="" placeholder="–≤—Å—Ç–∞–≤ —Å–≤—ñ–π URL Google Form">
      </div>
      <div class="field">
        <label for="param">–ü–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, field –∞–±–æ entry.123456)</label>
        <input id="param" type="text" value="" placeholder="field –∞–±–æ entry.XXXXXX">
      </div>
      <div class="field">
        <label for="code">–ö–æ–¥ –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, F-01)</label>
        <input id="code" type="text" value="" placeholder="F-01">
      </div>
      <div class="flex no-print">
        <button class="btn" type="button" onclick="buildURL()">üîÅ –ó—ñ–±—Ä–∞—Ç–∏ URL</button>
        <button class="btn" type="button" onclick="copyURL()">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
        <a class="btn" id="openURL" href="#" target="_blank" rel="noopener">üîó –í—ñ–¥–∫—Ä–∏—Ç–∏</a>
        <button class="btn" type="button" onclick="geoTest()">üìå –ì–µ–æ-—Ç–µ—Å—Ç (–¥–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å)</button>
      </div>
      <p class="muted" id="builtUrl" style="word-break:break-all; margin-top:10px">‚Äî</p>
    </div>

    <div class="card">
      <h2>üß© –°–∏–º—É–ª—è—Ç–æ—Ä –ø–æ–ª—å–æ–≤–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (–ª–æ–∫–∞–ª—å–Ω–æ)</h2>
      <p class="muted">–¶–µ —Ç—Ä–µ–Ω–∞–∂–µ—Ä <b>–±–µ–∑ —Å–µ—Ä–≤–µ—Ä—ñ–≤</b>: –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ç–≤–æ—î–º—É –±—Ä–∞—É–∑–µ—Ä—ñ (localStorage). –î–æ–¥–∞–π 3+ –∑–∞–ø–∏—Å–∏.</p>
      <div class="grid g3">
        <div class="step"><div class="n">A</div><div>
          <div class="field"><label>–ö–æ–¥ –ø–æ–ª—è</label><input id="f_code" type="text"></div>
          <div class="field"><label>–°—Ç–∞–Ω</label>
            <select id="f_state">
              <option>–Ω–æ—Ä–º–∞</option>
              <option>–±—É—Ä‚Äô—è–Ω</option>
              <option>—à–∫—ñ–¥–Ω–∏–∫</option>
              <option>–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è</option>
              <option>–∑–∞—Å—É—Ö–∞</option>
              <option>—ñ–Ω—à–µ</option>
            </select>
          </div>
          <div class="field"><label>–ö–æ–º–µ–Ω—Ç–∞—Ä</label><input id="f_comment" type="text"></div>
          <div class="field"><label>–§–æ—Ç–æ URL</label><input id="f_photo" type="text"></div>
          <div class="flex">
            <button class="btn" type="button" onclick="addRecord()">‚ûï –î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å</button>
            <button class="btn" type="button" onclick="clearRecords()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
          </div>
        </div></div>
        <div class="step"><div class="n">B</div><div>
          <b>–ü–æ–∫–∞–∑–Ω–∏–∫–∏ (KPI):</b>
          <div class="kpi" style="margin-top:8px"><span class="badgeNum" id="k_total">0</span><div>–ó–∞–ø–∏—Å—ñ–≤ —É —Ç—Ä–µ–Ω–∞–∂–µ—Ä—ñ</div></div>
          <div class="kpi"><span class="badgeNum" id="k_fields">0</span><div>–û—Ö–æ–ø–ª–µ–Ω–∏—Ö –ø–æ–ª—ñ–≤ (—É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–æ–¥—ñ–≤)</div></div>
          <div class="kpi"><span class="badgeNum crit" id="k_crit">0</span><div class="crit">–ö—Ä–∏—Ç–∏—á–Ω—ñ —Å—Ç–∞–Ω–∏: –±—É—Ä‚Äô—è–Ω/—à–∫—ñ–¥–Ω–∏–∫/–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è/–∑–∞—Å—É—Ö–∞</div></div>
          <div class="hint">–ú–µ—Ç–∞: ‚â•3 –∑–∞–ø–∏—Å–∏, ‚â•2 –ø–æ–ª—è, ‚â•1 –∫—Ä–∏—Ç–∏—á–Ω–∏–π —Å—Ç–∞–Ω.</div>
        </div></div>
        <div class="step"><div class="n">C</div><div>
          <b>–†–æ–∑–ø–æ–¥—ñ–ª —Å—Ç–∞–Ω—ñ–≤</b>
          <div id="chartWrap" style="display:grid;gap:8px;margin-top:8px"></div>
          <div class="hint">–ß–∏–º –¥–æ–≤—à–∞ —Å–∏–Ω—è —Å–º—É–≥–∞ ‚Äî —Ç–∏–º –±—ñ–ª—å—à–µ —Ç–∞–∫–∏—Ö –∫–µ–π—Å—ñ–≤. –¶–µ ¬´–º—ñ–Ω—ñ-–¥–∞—à–±–æ—Ä–¥¬ª.</div>
        </div></div>
      </div>

      <div style="overflow:auto;margin-top:10px">
        <table class="table">
          <thead><tr><th>#</th><th>–ß–∞—Å</th><th>–ü–æ–ª–µ</th><th>–°—Ç–∞–Ω</th><th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th><th>–§–æ—Ç–æ</th></tr></thead>
          <tbody id="logBody"></tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <h2>üó∫Ô∏è –ú—ñ–Ω—ñ-–º–∞–ø–∞ –ø–æ–ª—è (5√ó5)</h2>
      <p class="muted">–ö–ª–∞—Ü–∞–π –ø–æ –∫–ª—ñ—Ç–∏–Ω–∫–∞—Ö —ñ –∑–º—ñ–Ω—é–π —Å—Ç–∞–Ω –¥—ñ–ª—è–Ω–∫–∏ ‚Äî –¥–∞—à–±–æ—Ä–¥ –≤–∏—â–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å—Å—è.</p>
      <div class="flex" style="align-items:center">
        <label>–ö–æ–¥ –ø–æ–ª—è –¥–ª—è –º–∞–ø–∏</label>
        <input id="mapCode" type="text" style="max-width:160px">
        <select id="mapState" style="max-width:220px">
          <option value="–Ω–æ—Ä–º–∞">–Ω–æ—Ä–º–∞</option>
          <option value="–±—É—Ä‚Äô—è–Ω">–±—É—Ä‚Äô—è–Ω</option>
          <option value="—à–∫—ñ–¥–Ω–∏–∫">—à–∫—ñ–¥–Ω–∏–∫</option>
          <option value="–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è">–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è</option>
          <option value="–∑–∞—Å—É—Ö–∞">–∑–∞—Å—É—Ö–∞</option>
          <option value="—ñ–Ω—à–µ">—ñ–Ω—à–µ</option>
        </select>
        <button class="btn" type="button" onclick="mapClear()">üßº –û—á–∏—Å—Ç–∏—Ç–∏</button>
      </div>
      <div id="miniMap" class="mini-map" style="margin-top:10px"></div>
      <p class="hint">–†–µ–∂–∏–º: –≤–∏–±–µ—Ä–∏ —Å—Ç–∞–Ω —É —Å–ø–∏—Å–∫—É —ñ –∫–ª–∞—Ü–Ω–∏ –ø–æ –∫–ª—ñ—Ç–∏–Ω—Ü—ñ. –ó–∞–ø–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É –∂—É—Ä–Ω–∞–ª –≤–∏—â–µ.</p>
    </div>

    <div class="card">
      <h2>üé≤ –ö–µ–π—Å-—Ä–∞–Ω–¥–æ–º—ñ–∑–∞—Ç–æ—Ä</h2>
      <p class="muted">–û—Ç—Ä–∏–º–∞–π –≤–∏–ø–∞–¥–∫–æ–≤—É —Å–∏—Ç—É–∞—Ü—ñ—é, –æ–±–µ—Ä–∏ –¥—ñ—é —ñ –æ—Ç—Ä–∏–º–∞–π –º–∏—Ç—Ç—î–≤–∏–π —Ñ—ñ–¥–±–µ–∫. –¢—Ä–∏–º–∞–π —Å–µ—Ä—ñ—é –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å!</p>
      <div id="caseBox" class="step">
        <div class="n">üé≤</div>
        <div>
          <div id="caseText" class="soft">–ù–∞—Ç–∏—Å–Ω–∏ ¬´–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–µ–π—Å¬ª</div>
          <div class="flex" style="margin-top:8px">
            <button class="btn" onclick="newCase()">üéØ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–µ–π—Å</button>
            <select id="caseAction">
              <option value="">‚Äî –û–±–µ—Ä–∏ –¥—ñ—é ‚Äî</option>
              <option value="–æ–≥–ª—è–¥_—Å—å–æ–≥–æ–¥–Ω—ñ">–¢–µ—Ä–º—ñ–Ω–æ–≤–∏–π –æ–≥–ª—è–¥ —Å—å–æ–≥–æ–¥–Ω—ñ</option>
              <option value="–ª–æ–∫–∞–ª—å–Ω–∞_–æ–±—Ä–æ–±–∫–∞">–õ–æ–∫–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞</option>
              <option value="–º–∞—Å—à—Ç–∞–±–Ω–∞_–æ–±—Ä–æ–±–∫–∞">–ú–∞—Å—à—Ç–∞–±–Ω–∞ –æ–±—Ä–æ–±–∫–∞</option>
              <option value="–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥_48–≥">–°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è 48 –≥–æ–¥</option>
              <option value="–±–µ–∑_–¥—ñ—ó">–ë–µ–∑ –¥—ñ–π</option>
            </select>
            <button class="btn" onclick="checkCase()">‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          </div>
          <div id="caseFeedback" class="hint" style="margin-top:6px"></div>
          <div class="kpi" style="margin-top:8px"><span class="badgeNum" id="streak">0</span><div>–°–µ—Ä—ñ—è –≤–¥–∞–ª–∏—Ö —Ä—ñ—à–µ–Ω—å</div></div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>üß† –í–∏—Å–Ω–æ–≤–æ–∫ —ñ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫</h2>
      <p>–°—Ñ–æ—Ä–º—É–ª—é–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ –º—ñ–Ω—ñ-–¥–∞—à–±–æ—Ä–¥—É (2‚Äì3 —Ä–µ—á–µ–Ω–Ω—è):</p>
      <ul>
        <li>–Ø–∫—ñ –ø–æ–ª—è –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —É–≤–∞–≥–∏ <b>—Å—å–æ–≥–æ–¥–Ω—ñ</b> —ñ —á–æ–º—É?</li>
        <li>–©–æ —Ä–æ–±–∏–º–æ <b>–∑–∞–≤—Ç—Ä–∞ –∑—Ä–∞–Ω–∫—É</b> (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –¥—ñ—è)?</li>
      </ul>
      <div class="field"><label>–¢–µ–∫—Å—Ç –≤–∏—Å–Ω–æ–≤–∫—É</label><input id="conclusion" type="text" value=""></div>
      <div class="flex no-print">
        <button class="btn" type="button" onclick="saveConclusion()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
        <button class="btn" type="button" onclick="copyConclusion()">üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏</button>
      </div>
      <p class="hint">–í–∏—Å–Ω–æ–≤–æ–∫ –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è —É –±—Ä–∞—É–∑–µ—Ä—ñ.</p>
    </div>

    <div class="card">
      <h2>‚úÖ –û—Ü—ñ–Ω—é–≤–∞–Ω–Ω—è (10 –±–∞–ª—ñ–≤)</h2>
      <table class="table">
        <thead><tr><th>–ö—Ä–∏—Ç–µ—Ä—ñ–π</th><th>–ë–∞–ª–∏</th></tr></thead>
        <tbody>
          <tr><td>–ü—Ä–∞—Ü—é—é—á–∏–π QR –∞–±–æ NFC –¥–ª—è <b>—Å–≤–æ–≥–æ</b> –∫–æ–¥—É –ø–æ–ª—è</td><td>3</td></tr>
          <tr><td>–ö–æ—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–∞ —Ñ–æ—Ä–º–∞ –∑ 1‚Äì3 —Ñ–æ—Ç–æ (EXIF –∞–±–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏)</td><td>3</td></tr>
          <tr><td>–í—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ Google Sheets + —É–º–æ–≤–Ω–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è ¬´–∫—Ä–∏—Ç–∏–∫–∏¬ª</td><td>2</td></tr>
          <tr><td>–ú—ñ–Ω—ñ-–¥–∞—à–±–æ—Ä–¥: –¥—ñ–∞–≥—Ä–∞–º–∞ —Å—Ç–∞–Ω—ñ–≤ + —Ç–∞–±–ª–∏—Ü—è ¬´–æ—Å—Ç–∞–Ω–Ω—ñ –æ–≥–ª—è–¥–∏¬ª</td><td>2</td></tr>
        </tbody>
      </table>
      <p class="pill">üì± –ú–∞–∫—Å–∏–º—É–º —Ç–µ–ª–µ—Ñ–æ–Ω—É</p>
      <p class="pill">üîñ QR/NFC</p>
      <p class="pill">üìä –®–≤–∏–¥–∫–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</p>
      <p class="pill">üéÆ –ú—ñ—Å—ñ—ó</p>
      <p class="pill">üß© –°–∏–º—É–ª—è—Ç–æ—Ä</p>
      <p class="pill">üó∫Ô∏è –ú—ñ–Ω—ñ-–º–∞–ø–∞</p>
      <p class="pill">üìå –ì–µ–æ-—Ç–µ—Å—Ç</p>
    </div>

    <div class="card">
      <h2>üÜò –ü–æ—Ä–∞–¥–∏</h2>
      <ul>
        <li><b>EXIF –Ω–µ–º–∞—î?</b> –î–æ–∑–≤–æ–ª—å –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—é –¥–ª—è –ö–∞–º–µ—Ä–∏ –∞–±–æ –¥–æ–¥–∞–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤ –æ–∫—Ä–µ–º–µ –ø–æ–ª–µ.</li>
        <li><b>URL –¥–æ–≤–≥–∏–π?</b> –ú–æ–∂–Ω–∞ —Å–∫–æ—Ä–æ—Ç–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–º —Å–µ—Ä–≤—ñ—Å–æ–º –∑–∞–∫–ª–∞–¥—É.</li>
        <li><b>–ù–µ –∑–Ω–∞—î—à entry-ID?</b> –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Å–ø—ñ–ª—å–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä <span class="mono">field=F-01</span> —ñ –∑—á–∏—Ç–∞–π –π–æ–≥–æ –æ–∫—Ä–µ–º–æ—é –∫–æ–ª–æ–Ω–∫–æ—é.</li>
      </ul>
    </div>
  </div>

<script>
  // –í–±—É–¥–æ–≤–∞–Ω–∏–π —Ä–µ–∂–∏–º (Moodle iFrame)
  (function(){ if (window.self !== window.top) document.documentElement.classList.add('embedded'); })();

  // ===== –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä URL
  function buildURL(){
    const u = document.getElementById('formUrl').value.trim();
    const p = document.getElementById('param').value.trim();
    const c = document.getElementById('code').value.trim();
    if(!u || !p || !c){ show('–ü–µ—Ä–µ–≤—ñ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–ª—ñ–≤.'); return; }
    const sep = u.includes('?') ? '&' : '?';
    const url = `${u}${sep}${encodeURIComponent(p)}=${encodeURIComponent(c)}`;
    document.getElementById('builtUrl').textContent = url;
    document.getElementById('openURL').href = url;
    markMissionAuto('m1');
  }
  function copyURL(){
    const t = document.getElementById('builtUrl').textContent.trim();
    if(!t || t==='‚Äî'){ show('–°–ø–æ—á–∞—Ç–∫—É –∑–≥–µ–Ω–µ—Ä—É–π URL.'); return; }
    navigator.clipboard.writeText(t).then(()=>show('‚úÖ URL —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'), ()=>show('–°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –Ω–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  function show(msg){
    const old = document.title;
    document.title = msg;
    setTimeout(()=>document.title = old, 900);
  }

  // ===== LocalStorage keys
  const LS_KEY = 'agro_para2_sim_records';
  const LS_CONC = 'agro_para2_conclusion';
  const LS_MISS = 'agro_para2_missions';
  const LS_MAP  = 'agro_para2_mapgrid';

  // ===== –°–∏–º—É–ª—è—Ç–æ—Ä
  const byId = id => document.getElementById(id);
  function loadRecords(){ try{ return JSON.parse(localStorage.getItem(LS_KEY)||'[]'); }catch(_){ return []; } }
  function saveRecords(arr){ try{ localStorage.setItem(LS_KEY, JSON.stringify(arr)); }catch(_){ } }

  function addRecord(){
    const code = byId('f_code').value.trim();
    const state = byId('f_state').value.trim();
    const comment = byId('f_comment').value.trim();
    const photo = byId('f_photo').value.trim();
    if(!code || !state){ show('–í–≤–µ–¥–∏ –∫–æ–¥ –ø–æ–ª—è —ñ —Å—Ç–∞–Ω.'); return; }
    const rec = {ts:new Date().toISOString(), code, state, comment, photo};
    const data = loadRecords(); data.push(rec); saveRecords(data);
    renderAll(); markMissionAuto('m2');
  }
  function clearRecords(){
    if(!confirm('–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞?')) return;
    saveRecords([]); renderAll();
  }

  function renderTable(){
    const body = byId('logBody');
    const data = loadRecords();
    body.innerHTML = data.map((r,i)=>`
      <tr>
        <td>${i+1}</td>
        <td>${r.ts.replace('T',' ').slice(0,19)}</td>
        <td>${r.code}</td>
        <td>${r.state}</td>
        <td>${r.comment||'‚Äî'}</td>
        <td>${r.photo?`<a href="${r.photo}" target="_blank" rel="noopener">–≤—ñ–¥–∫—Ä–∏—Ç–∏</a>`:'‚Äî'}</td>
      </tr>
    `).join('') || '<tr><td colspan="6" class="soft">–ù–µ–º–∞—î –∑–∞–ø–∏—Å—ñ–≤</td></tr>';
  }
  function uniq(arr){ return Array.from(new Set(arr)); }
  function isCritical(state){
    return ['–±—É—Ä‚Äô—è–Ω','—à–∫—ñ–¥–Ω–∏–∫','–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è','–∑–∞—Å—É—Ö–∞'].includes((state||'').toLowerCase());
  }
  function renderKPI(){
    const data = loadRecords();
    byId('k_total').textContent = data.length;
    byId('k_fields').textContent = uniq(data.map(x=>x.code)).length;
    byId('k_crit').textContent = data.filter(x=>isCritical(x.state)).length;
  }
  function renderChart(){
    const data = loadRecords();
    const wrap = byId('chartWrap'); wrap.innerHTML='';
    const counts = {};
    data.forEach(r=>{ counts[r.state] = (counts[r.state]||0)+1; });
    const entries = Object.entries(counts).sort((a,b)=>b[1]-a[1]);
    const max = Math.max(1, ...entries.map(x=>x[1]));
    if(entries.length===0){ wrap.innerHTML='<div class="soft">–©–µ –Ω–µ–º–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫–∞</div>'; return; }
    entries.forEach(([state,cnt])=>{
      const row = document.createElement('div');
      row.innerHTML = `
        <div style="display:grid;grid-template-columns:120px 1fr 40px;gap:8px;align-items:center">
          <div>${state}</div>
          <div class="bar"><div style="width:${Math.round(cnt/max*100)}%"></div></div>
          <div style="text-align:right">${cnt}</div>
        </div>
      `;
      wrap.appendChild(row);
    });
  }
  function renderAll(){ renderTable(); renderKPI(); renderChart(); updateProgress(); }

  // ===== –ì–µ–æ-—Ç–µ—Å—Ç (–¥–æ–¥–∞—î –∑–∞–ø–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
  function geoTest(){
    if(!navigator.geolocation){ show('–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ —É —Ü—å–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ'); return; }
    navigator.geolocation.getCurrentPosition(pos=>{
      const {latitude, longitude, accuracy} = pos.coords;
      const code = byId('f_code').value.trim() || 'F-GEO';
      const state = '–Ω–æ—Ä–º–∞';
      const comment = `GPS ${latitude.toFixed(5)}, ${longitude.toFixed(5)} ¬±${Math.round(accuracy)}–º`;
      const rec = {ts:new Date().toISOString(), code, state, comment, photo:''};
      const data = loadRecords(); data.push(rec); saveRecords(data);
      renderAll(); markMissionAuto('m2'); show('‚úÖ –ì–µ–æ-–∑–∞–ø–∏—Å –¥–æ–¥–∞–Ω–æ');
    }, err=>{
      show('–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—é –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ –∞–±–æ –ø–æ–º–∏–ª–∫–∞: '+(err&&err.message?err.message:''));
    }, {enableHighAccuracy:true, timeout:8000, maximumAge:0});
  }

  // ===== –ú—ñ–Ω—ñ-–º–∞–ø–∞ 5√ó5
  const MAP_SIZE = 5;
  function loadMap(){ try{ return JSON.parse(localStorage.getItem(LS_MAP)||'[]'); }catch(_){ return []; } }
  function saveMap(arr){ try{ localStorage.setItem(LS_MAP, JSON.stringify(arr)); }catch(_){ } }
  function mapStateClass(s){
    if(s==='–Ω–æ—Ä–º–∞') return 'norma';
    if(s==='–±—É—Ä‚Äô—è–Ω') return 'weed';
    if(s==='—à–∫—ñ–¥–Ω–∏–∫') return 'pest';
    if(s==='–ø–µ—Ä–µ–∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è') return 'wet';
    if(s==='–∑–∞—Å—É—Ö–∞') return 'dry';
    return 'other';
  }
  function mapInit(){
    const wrap = byId('miniMap'); wrap.innerHTML='';
    const grid = loadMap();
    for(let i=0;i<MAP_SIZE*MAP_SIZE;i++){
      const cell = document.createElement('div');
      const cur = grid[i] || {state:''};
      cell.className = 'cell ' + (cur.state? mapStateClass(cur.state): '');
      cell.textContent = cur.state || '';
      cell.addEventListener('click', ()=>{
        const code = byId('mapCode').value.trim() || 'F-MAP';
        const s = byId('mapState').value;
        const data = loadMap();
        data[i] = {state:s};
        saveMap(data);
        cell.className = 'cell ' + mapStateClass(s);
        cell.textContent = s;
        // –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î–º–æ —É –∂—É—Ä–Ω–∞–ª —Å–∏–º—É–ª—è—Ç–æ—Ä–∞
        const rec = {ts:new Date().toISOString(), code, state:s, comment:`–º–∞–ø–∞, –∫–ª—ñ—Ç–∏–Ω–∫–∞ ${i+1}`, photo:''};
        const list = loadRecords(); list.push(rec); saveRecords(list);
        renderAll(); markMissionAuto('m2');
      });
      wrap.appendChild(cell);
    }
  }
  function mapClear(){ saveMap([]); mapInit(); }

  // ===== –í–∏—Å–Ω–æ–≤–æ–∫
  function saveConclusion(){
    const t = byId('conclusion').value.trim();
    try{ localStorage.setItem(LS_CONC, t); show('‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ'); }catch(_){}
    if(t) markMissionAuto('m3');
  }
  function copyConclusion(){
    const t = byId('conclusion').value.trim();
    if(!t){ show('–°–ø–µ—Ä—à—É –≤–≤–µ–¥–∏ –≤–∏—Å–Ω–æ–≤–æ–∫'); return; }
    navigator.clipboard.writeText(t).then(()=>show('‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),()=>show('–ù–µ –≤–¥–∞–ª–æ—Å—è'));
  }
  (function loadConclusion(){
    try{
      const t = localStorage.getItem(LS_CONC)||'';
      if(t) byId('conclusion').value = t;
    }catch(_){}
  })();

  // ===== –ú—ñ—Å—ñ—ó + –ø—Ä–æ–≥—Ä–µ—Å
  function loadMissions(){ try{ return JSON.parse(localStorage.getItem(LS_MISS)||'{}'); }catch(_){ return {}; } }
  function saveMissions(obj){ try{ localStorage.setItem(LS_MISS, JSON.stringify(obj)); }catch(_){} }
  function updateProgress(){
    const miss = loadMissions();
    const all = ['m1','m2','m3'];
    const done = all.filter(k=>miss[k]).length;
    const pct = Math.round(done/all.length*100);
    byId('progressBar').style.width = pct+'%';
    document.querySelectorAll('.mission').forEach(ch=>{ ch.checked = !!miss[ch.dataset.id]; });
  }
  function markMissionAuto(id){
    const miss = loadMissions();
    miss[id] = true;
    saveMissions(miss);
    updateProgress();
  }
  document.querySelectorAll('.mission').forEach(ch=>{
    ch.addEventListener('change',()=>{
      const miss = loadMissions();
      miss[ch.dataset.id] = ch.checked;
      saveMissions(miss);
      updateProgress();
    });
  });

  // ===== –ö–µ–π—Å-—Ä–∞–Ω–¥–æ–º—ñ–∑–∞—Ç–æ—Ä
  const CASES = [
    {t:'F-02, –∫—Ä–∞–π –ø–æ–ª—è –ø—ñ—Å–ª—è –¥–æ—â—É: –ø–æ—è–≤–∞ –æ—Å–æ—Ç—É –Ω–∞ 15% –ø–ª–æ—â—ñ', ok:['–æ–≥–ª—è–¥_—Å—å–æ–≥–æ–¥–Ω—ñ','–ª–æ–∫–∞–ª—å–Ω–∞_–æ–±—Ä–æ–±–∫–∞'], bad:['–±–µ–∑_–¥—ñ—ó']},
    {t:'F-03, –≥–∞—Ä—è—á–∏–π —Ç–∏–∂–¥–µ–Ω—å: –≤‚Äô—è–Ω–µ–Ω–Ω—è –Ω–∞ –≤–∏—Å–æ–∫–∏—Ö –¥—ñ–ª—è–Ω–∫–∞—Ö', ok:['–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥_48–≥'], bad:[]},
    {t:'F-05, –≤–æ–ª–æ–≥—ñ ¬´–∫–∏—à–µ–Ω—ñ¬ª: —Å—Ç–æ—ó—Ç—å –≤–æ–¥–∞', ok:['–æ–≥–ª—è–¥_—Å—å–æ–≥–æ–¥–Ω—ñ','–ª–æ–∫–∞–ª—å–Ω–∞_–æ–±—Ä–æ–±–∫–∞'], bad:['–±–µ–∑_–¥—ñ—ó']},
    {t:'F-01, –ø–æ–æ–¥–∏–Ω–æ–∫—ñ –∂—É–∫–∏ (–ø–æ—Ä—ñ–≥ –¥–∞–ª–µ–∫–æ)', ok:['–º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥_48–≥'], bad:['–º–∞—Å—à—Ç–∞–±–Ω–∞_–æ–±—Ä–æ–±–∫–∞']},
    {t:'F-04, –º–∞—Å–æ–≤–∏–π –±—É—Ä‚Äô—è–Ω –ø–æ –º–µ–∂—ñ', ok:['–ª–æ–∫–∞–ª—å–Ω–∞_–æ–±—Ä–æ–±–∫–∞','–æ–≥–ª—è–¥_—Å—å–æ–≥–æ–¥–Ω—ñ'], bad:['–±–µ–∑_–¥—ñ—ó']}
  ];
  let CASE_IDX = -1, STREAK = 0;
  function newCase(){
    CASE_IDX = Math.floor(Math.random()*CASES.length);
    byId('caseText').textContent = CASES[CASE_IDX].t;
    byId('caseFeedback').textContent = '';
    byId('caseAction').value = '';
  }
  function checkCase(){
    if(CASE_IDX<0){ show('–°–ø–æ—á–∞—Ç–∫—É –∑–≥–µ–Ω–µ—Ä—É–π –∫–µ–π—Å'); return; }
    const act = byId('caseAction').value;
    if(!act){ show('–û–±–µ—Ä–∏ –¥—ñ—é'); return; }
    const c = CASES[CASE_IDX];
    if(c.ok.includes(act)){
      STREAK++; byId('caseFeedback').textContent = '‚úÖ –ì–∞—Ä–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è';
      byId('caseFeedback').className = 'hint ok';
    }else if(c.bad.includes(act)){
      STREAK = 0; byId('caseFeedback').textContent = '‚ùå –ü–æ–≥–∞–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è (—Ä–∏–∑–∏–∫ –∑–∞–ø—ñ–∑–Ω–µ–Ω–Ω—è –∞–±–æ –ø–µ—Ä–µ–≤–∏—Ç—Ä–∞—Ç)';
      byId('caseFeedback').className = 'hint crit';
    }else{
      STREAK = Math.max(0, STREAK-1); byId('caseFeedback').textContent = '‚ÑπÔ∏è –ü—Ä–∏–π–Ω—è—Ç–Ω–æ, –∞–ª–µ —î –∫—Ä–∞—â—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏';
      byId('caseFeedback').className = 'hint';
    }
    byId('streak').textContent = STREAK;
  }

  // ===== –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
  (function init(){
    renderAll();
    mapInit();
    // –ê–≤—Ç–æ–Ω–∞—Ç—è–∫ –¥–ª—è buildURL
    // (–Ω—ñ—á–æ–≥–æ –Ω–µ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—é —É value, —â–æ–± –Ω–µ –±—É–ª–æ ¬´–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–Ω–æ—ó —Ç—Ä–∞–≤–º–∏¬ª)
  })();
</script>


</body></html>